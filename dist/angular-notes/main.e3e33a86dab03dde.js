(self.webpackChunkangular_notes=self.webpackChunkangular_notes||[]).push([[179],{3132:(Ge,Ne,K)=>{"use strict";function I(n){return"function"==typeof n}let V=!1;const z={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else V&&console.log("RxJS: Back to a better error behavior. Thank you. <3");V=n},get useDeprecatedSynchronousErrorHandling(){return V}};function re(n){setTimeout(()=>{throw n},0)}const oe={closed:!0,next(n){},error(n){if(z.useDeprecatedSynchronousErrorHandling)throw n;re(n)},complete(){}},J=Array.isArray||(n=>n&&"number"==typeof n.length);function S(n){return null!==n&&"object"==typeof n}const X=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class ee{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof ee)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(I(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof X?ge(o.errors):[o]}}if(J(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(S(l))try{l.unsubscribe()}catch(c){e=e||[],c instanceof X?e=e.concat(ge(c.errors)):e.push(c)}}}if(e)throw new X(e)}add(e){let t=e;if(!e)return ee.EMPTY;switch(typeof e){case"function":t=new ee(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof ee)){const s=t;t=new ee,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof ee){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function ge(n){return n.reduce((e,t)=>e.concat(t instanceof X?t.errors:t),[])}ee.EMPTY=((n=new ee).closed=!0,n);const le="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class P extends ee{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=oe;break;case 1:if(!e){this.destination=oe;break}if("object"==typeof e){e instanceof P?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new q(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new q(this,e,t,i)}}[le](){return this}static create(e,t,i){const r=new P(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class q extends P{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;I(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==oe&&(o=Object.create(t),I(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;z.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=z;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):re(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;re(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);z.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),z.useDeprecatedSynchronousErrorHandling)throw i;re(i)}}__tryOrSetError(e,t,i){if(!z.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return z.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(re(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const U="function"==typeof Symbol&&Symbol.observable||"@@observable";function Y(n){return n}let x=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function Re(n,e,t){if(n){if(n instanceof P)return n;if(n[le])return n[le]()}return n||e||t?new P(n,e,t):new P(oe)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||z.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),z.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){z.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function _e(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof P?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=F(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[U](){return this}pipe(...t){return 0===t.length?this:function M(n){return 0===n.length?Y:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=F(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function F(n){if(n||(n=z.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const L=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class be extends ee{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class Z extends P{constructor(e){super(e),this.destination=e}}let pe=(()=>{class n extends x{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[le](){return new Z(this)}lift(t){const i=new He(this,this);return i.operator=t,i}next(t){if(this.closed)throw new L;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new L;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new L;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new L;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new L;return this.hasError?(t.error(this.thrownError),ee.EMPTY):this.isStopped?(t.complete(),ee.EMPTY):(this.observers.push(t),new be(this,t))}asObservable(){const t=new x;return t.source=this,t}}return n.create=(e,t)=>new He(e,t),n})();class He extends pe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):ee.EMPTY}}function Je(n){return n&&"function"==typeof n.schedule}function nt(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new un(n,e))}}class un{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new ht(e,this.project,this.thisArg))}}class ht extends P{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Gn=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},on=function jr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),co=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Qa(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const N=n=>{if(n&&"function"==typeof n[U])return(n=>e=>{const t=n[U]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(co(n))return Gn(n);if(Qa(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,re),e))(n);if(n&&"function"==typeof n[on])return(n=>e=>{const t=n[on]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${S(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function de(n,e){return new x(t=>{const i=new ee;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function An(n,e){return e?function ui(n,e){if(null!=n){if(function On(n){return n&&"function"==typeof n[U]}(n))return function D(n,e){return new x(t=>{const i=new ee;return i.add(e.schedule(()=>{const r=n[U]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(Qa(n))return function Oe(n,e){return new x(t=>{const i=new ee;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(co(n))return de(n,e);if(function pn(n){return n&&"function"==typeof n[on]}(n)||"string"==typeof n)return function ln(n,e){if(!n)throw new Error("Iterable cannot be null");return new x(t=>{const i=new ee;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[on](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof x?n:new x(N(n))}class R extends P{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class b extends P{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function fe(n,e){if(e.closed)return;if(n instanceof x)return n.subscribe(e);let t;try{t=N(n)(e)}catch(i){e.error(i)}return t}function Ce(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(Ce((r,s)=>An(n(r,s)).pipe(nt((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new qe(n,t)))}class qe{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new an(e,this.project,this.concurrent))}}class an extends b{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new R(this),i=this.destination;i.add(t);const r=fe(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function mn(n=Number.POSITIVE_INFINITY){return Ce(Y,n)}function hi(n,e){return e?de(n,e):new x(Gn(n))}function Un(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return Je(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof x?n[0]:mn(e)(hi(n,t))}function uo(){return function(e){return e.lift(new $h(e))}}class $h{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new qh(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class qh extends P{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Ib extends x{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new ee,e.add(this.source.subscribe(new nR(this.getSubject(),this))),e.closed&&(this._connection=null,e=ee.EMPTY)),e}refCount(){return uo()(this)}}const tR=(()=>{const n=Ib.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class nR extends Z{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class sR{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function oR(){return new pe}function In(n){for(let e in n)if(n[e]===In)return e;throw Error("Could not find renamed property on target object.")}function km(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function bn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(bn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Bm(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const lR=In({__forward_ref__:In});function Um(n){return n.__forward_ref__=Um,n.toString=function(){return bn(this())},n}function Gt(n){return Pb(n)?n():n}function Pb(n){return"function"==typeof n&&n.hasOwnProperty(lR)&&n.__forward_ref__===Um}class ft extends Error{constructor(e,t){super(function Hm(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function kt(n){return"string"==typeof n?n:null==n?"":String(n)}function Wi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():kt(n)}function Xh(n,e){const t=e?` in ${e}`:"";throw new ft(-201,`No provider for ${Wi(n)} found${t}`)}function dr(n,e){null==n&&function Hn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function _t(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vm(n){return Rb(n,Yh)||Rb(n,Nb)}function Rb(n,e){return n.hasOwnProperty(e)?n[e]:null}function Lb(n){return n&&(n.hasOwnProperty(zm)||n.hasOwnProperty(mR))?n[zm]:null}const Yh=In({\u0275prov:In}),zm=In({\u0275inj:In}),Nb=In({ngInjectableDef:In}),mR=In({ngInjectorDef:In});var Nt=(()=>((Nt=Nt||{})[Nt.Default=0]="Default",Nt[Nt.Host=1]="Host",Nt[Nt.Self=2]="Self",Nt[Nt.SkipSelf=4]="SkipSelf",Nt[Nt.Optional=8]="Optional",Nt))();let Gm;function ho(n){const e=Gm;return Gm=n,e}function Ob(n,e,t){const i=Vm(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Nt.Optional?null:void 0!==e?e:void Xh(bn(n),"Injector")}function fo(n){return{toString:n}.toString()}var $r=(()=>(($r=$r||{})[$r.OnPush=0]="OnPush",$r[$r.Default=1]="Default",$r))(),qr=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(qr||(qr={})),qr))();const yR="undefined"!=typeof globalThis&&globalThis,_R="undefined"!=typeof window&&window,vR="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Cn=yR||"undefined"!=typeof global&&global||_R||vR,el={},Pn=[],Kh=In({\u0275cmp:In}),Wm=In({\u0275dir:In}),jm=In({\u0275pipe:In}),Fb=In({\u0275mod:In}),ks=In({\u0275fac:In}),Qc=In({__NG_ELEMENT_ID__:In});let bR=0;function Wn(n){return fo(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$r.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Pn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||qr.Emulated,id:"c",styles:n.styles||Pn,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=bR++,i.inputs=Hb(n.inputs,t),i.outputs=Hb(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(kb):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Bb):null,i})}function kb(n){return Fi(n)||function po(n){return n[Wm]||null}(n)}function Bb(n){return function ta(n){return n[jm]||null}(n)}const Ub={};function Dn(n){return fo(()=>{const e={type:n.type,bootstrap:n.bootstrap||Pn,declarations:n.declarations||Pn,imports:n.imports||Pn,exports:n.exports||Pn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Ub[n.id]=n.type),e})}function Hb(n,e){if(null==n)return el;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const St=Wn;function Fi(n){return n[Kh]||null}function Tr(n,e){const t=n[Fb]||null;if(!t&&!0===e)throw new Error(`Type ${bn(n)} does not have '\u0275mod' property.`);return t}function fs(n){return Array.isArray(n)&&"object"==typeof n[1]}function Yr(n){return Array.isArray(n)&&!0===n[1]}function Xm(n){return 0!=(8&n.flags)}function ed(n){return 2==(2&n.flags)}function td(n){return 1==(1&n.flags)}function Kr(n){return null!==n.template}function TR(n){return 0!=(512&n[2])}function sa(n,e){return n.hasOwnProperty(ks)?n[ks]:null}class AR{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function ps(){return zb}function zb(n){return n.type.prototype.ngOnChanges&&(n.setInput=PR),IR}function IR(){const n=Wb(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===el)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function PR(n,e,t,i){const r=Wb(n)||function RR(n,e){return n[Gb]=e}(n,{previous:el,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new AR(l&&l.currentValue,e,o===el),n[i]=e}ps.ngInherit=!0;const Gb="__ngSimpleChanges__";function Wb(n){return n[Gb]||null}let Qm;function Qn(n){return!!n.listen}const jb={createRenderer:(n,e)=>function eg(){return void 0!==Qm?Qm:"undefined"!=typeof document?document:void 0}()};function di(n){for(;Array.isArray(n);)n=n[0];return n}function nd(n,e){return di(e[n])}function Ar(n,e){return di(e[n.index])}function tg(n,e){return n.data[e]}function pr(n,e){const t=e[n];return fs(t)?t:t[0]}function $b(n){return 4==(4&n[2])}function ng(n){return 128==(128&n[2])}function mo(n,e){return null==e?null:n[e]}function qb(n){n[18]=0}function ig(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Rt={lFrame:tx(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xb(){return Rt.bindingsEnabled}function ze(){return Rt.lFrame.lView}function cn(){return Rt.lFrame.tView}function id(n){return Rt.lFrame.contextLView=n,n[8]}function wi(){let n=Yb();for(;null!==n&&64===n.type;)n=n.parent;return n}function Yb(){return Rt.lFrame.currentTNode}function ms(n,e){const t=Rt.lFrame;t.currentTNode=n,t.isParent=e}function rg(){return Rt.lFrame.isParent}function sg(){Rt.lFrame.isParent=!1}function rd(){return Rt.isInCheckNoChangesMode}function sd(n){Rt.isInCheckNoChangesMode=n}function ol(){return Rt.lFrame.bindingIndex++}function YR(n,e){const t=Rt.lFrame;t.bindingIndex=t.bindingRootIndex=n,og(e)}function og(n){Rt.lFrame.currentDirectiveIndex=n}function Jb(){return Rt.lFrame.currentQueryIndex}function lg(n){Rt.lFrame.currentQueryIndex=n}function ZR(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Qb(n,e,t){if(t&Nt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Nt.Host||(r=ZR(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Rt.lFrame=ex();return i.currentTNode=e,i.lView=n,!0}function od(n){const e=ex(),t=n[1];Rt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ex(){const n=Rt.lFrame,e=null===n?null:n.child;return null===e?tx(n):e}function tx(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function nx(){const n=Rt.lFrame;return Rt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ix=nx;function ad(){const n=nx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $i(){return Rt.lFrame.selectedIndex}function go(n){Rt.lFrame.selectedIndex=n}function ei(){const n=Rt.lFrame;return tg(n.tView,n.selectedIndex)}function Hs(){Rt.lFrame.currentNamespace="svg"}function oa(){!function t2(){Rt.lFrame.currentNamespace=null}()}function ld(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function cd(n,e,t){rx(n,e,3,t)}function ud(n,e,t,i){(3&n[2])===t&&rx(n,e,t,i)}function cg(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function rx(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(s2(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function s2(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ru{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function hd(n,e,t){const i=Qn(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];hg(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function sx(n){return 3===n||4===n||6===n}function hg(n){return 64===n.charCodeAt(0)}function dd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||ox(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function ox(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function ax(n){return-1!==n}function al(n){return 32767&n}function ll(n,e){let t=function u2(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let dg=!0;function fd(n){const e=dg;return dg=n,e}let h2=0;function ou(n,e){const t=pg(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,fg(i.data,n),fg(e,null),fg(i.blueprint,null));const r=pd(n,e),s=n.injectorIndex;if(ax(r)){const o=al(r),a=ll(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function fg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function pg(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function pd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function md(n,e,t){!function d2(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Qc)&&(i=t[Qc]),null==i&&(i=t[Qc]=h2++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function ux(n,e,t){if(t&Nt.Optional)return n;Xh(e,"NodeInjector")}function hx(n,e,t,i){if(t&Nt.Optional&&void 0===i&&(i=null),0==(t&(Nt.Self|Nt.Host))){const r=n[9],s=ho(void 0);try{return r?r.get(e,i,t&Nt.Optional):Ob(e,i,t&Nt.Optional)}finally{ho(s)}}return ux(i,e,t)}function dx(n,e,t,i=Nt.Default,r){if(null!==n){const s=function g2(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Qc)?n[Qc]:void 0;return"number"==typeof e?e>=0?255&e:p2:e}(t);if("function"==typeof s){if(!Qb(e,n,i))return i&Nt.Host?ux(r,t,i):hx(e,t,i,r);try{const o=s(i);if(null!=o||i&Nt.Optional)return o;Xh(t)}finally{ix()}}else if("number"==typeof s){let o=null,a=pg(n,e),l=-1,c=i&Nt.Host?e[16][6]:null;for((-1===a||i&Nt.SkipSelf)&&(l=-1===a?pd(n,e):e[a+8],-1!==l&&mx(i,!1)?(o=e[1],a=al(l),e=ll(l,e)):a=-1);-1!==a;){const u=e[1];if(px(s,a,u.data)){const h=m2(a,e,t,o,i,c);if(h!==fx)return h}l=e[a+8],-1!==l&&mx(i,e[1].data[a+8]===c)&&px(s,a,e)?(o=u,a=al(l),e=ll(l,e)):a=-1}}}return hx(e,t,i,r)}const fx={};function p2(){return new cl(wi(),ze())}function m2(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=gd(a,o,t,null==i?ed(a)&&dg:i!=o&&0!=(3&a.type),r&Nt.Host&&s===a);return null!==u?au(e,o,u,a):fx}function gd(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,d=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<d;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&Kr(f)&&f.type===t)return l}return null}function au(n,e,t,i){let r=n[t];const s=e.data;if(function o2(n){return n instanceof ru}(r)){const o=r;o.resolving&&function cR(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ft(-200,`Circular dependency in DI detected for ${n}${t}`)}(Wi(s[t]));const a=fd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ho(o.injectImpl):null;Qb(n,i,Nt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function r2(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=zb(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&ho(l),fd(a),o.resolving=!1,ix()}}return r}function px(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function mx(n,e){return!(n&Nt.Self||n&Nt.Host&&e)}class cl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return dx(this._tNode,this._lView,e,i,t)}}function mg(n){return Pb(n)?()=>{const e=mg(Gt(n));return e&&e()}:sa(n)}function ul(n){return function f2(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(sx(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(wi(),n)}const dl="__parameters__";function pl(n,e,t){return fo(()=>{const i=function gg(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(dl)?l[dl]:Object.defineProperty(l,dl,{value:[]})[dl];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class xt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=_t({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const _2=new xt("AnalyzeForEntryComponents");function Ir(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Ir(i,e)):e!==n&&e.push(i)}return e}function gs(n,e){n.forEach(t=>Array.isArray(t)?gs(t,e):e(t))}function yx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function yd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function hu(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function mr(n,e,t){let i=ml(n,e);return i>=0?n[1|i]=t:(i=~i,function x2(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function _g(n,e){const t=ml(n,e);if(t>=0)return n[1|t]}function ml(n,e){return function bx(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const du={},bg="__NG_DI_FLAG__",vd="ngTempTokenPath",D2=/\n/gm,wx="__source",I2=In({provide:String,useValue:In});let fu;function Mx(n){const e=fu;return fu=n,e}function P2(n,e=Nt.Default){if(void 0===fu)throw new ft(203,"");return null===fu?Ob(n,void 0,e):fu.get(n,e&Nt.Optional?null:void 0,e)}function Ie(n,e=Nt.Default){return(function gR(){return Gm}()||P2)(Gt(n),e)}const xg=Ie;function wg(n){const e=[];for(let t=0;t<n.length;t++){const i=Gt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ft(900,"");let r,s=Nt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=R2(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(Ie(r,s))}else e.push(Ie(i))}return e}function pu(n,e){return n[bg]=e,n.prototype[bg]=e,n}function R2(n){return n[bg]}const bd=pu(pl("Inject",n=>({token:n})),-1),_o=pu(pl("Optional"),8),mu=pu(pl("SkipSelf"),4);class Rx{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function vo(n){return n instanceof Rx?n.changingThisBreaksApplicationSecurity:n}const eL=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,tL=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var fi=(()=>((fi=fi||{})[fi.NONE=0]="NONE",fi[fi.HTML=1]="HTML",fi[fi.STYLE=2]="STYLE",fi[fi.SCRIPT=3]="SCRIPT",fi[fi.URL=4]="URL",fi[fi.RESOURCE_URL=5]="RESOURCE_URL",fi))();function aa(n){const e=function vu(){const n=ze();return n&&n[12]}();return e?e.sanitize(fi.URL,n)||"":function yu(n,e){const t=function K2(n){return n instanceof Rx&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}(n,"URL")?vo(n):function Ed(n){return(n=String(n)).match(eL)||n.match(tL)?n:"unsafe:"+n}(kt(n))}const zx="__ngContext__";function Bi(n,e){n[zx]=e}function Pg(n){const e=function bu(n){return n[zx]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Lg(n){return n.ngOriginalError}function EL(n,...e){n.error(...e)}class xu{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function ML(n){return n&&n.ngErrorLogger||EL}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Lg(e);for(;t&&Lg(t);)t=Lg(t);return t||null}}const NL=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Cn))();function _s(n){return n instanceof Function?n():n}var gr=(()=>((gr=gr||{})[gr.Important=1]="Important",gr[gr.DashCase=2]="DashCase",gr))();function Og(n,e){return undefined(n,e)}function wu(n){const e=n[3];return Yr(e)?e[3]:e}function Fg(n){return Zx(n[13])}function kg(n){return Zx(n[4])}function Zx(n){for(;null!==n&&!Yr(n);)n=n[4];return n}function vl(n,e,t,i,r){if(null!=i){let s,o=!1;Yr(i)?s=i:fs(i)&&(o=!0,i=i[0]);const a=di(i);0===n&&null!==t?null==r?iw(e,t,a):la(e,t,a,r||null,!0):1===n&&null!==t?la(e,t,a,r||null,!0):2===n?function uw(n,e,t){const i=Td(n,e);i&&function XL(n,e,t,i){Qn(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function ZL(n,e,t,i,r){const s=t[7];s!==di(t)&&vl(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];Mu(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function Ug(n,e,t){if(Qn(n))return n.createElement(e,t);{const i=null!==t?function FR(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===i?n.createElement(e):n.createElementNS(i,e)}}function Qx(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,ig(r,-1)),t.splice(i,1)}function Hg(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&Qx(r,i),e>0&&(n[t-1][4]=i[4]);const s=yd(n,10+e);!function HL(n,e){Mu(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function ew(n,e){if(!(256&e[2])){const t=e[11];Qn(t)&&t.destroyNode&&Mu(n,e,t,3,null,null),function GL(n){let e=n[13];if(!e)return Vg(n[1],n);for(;e;){let t=null;if(fs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)fs(e)&&Vg(e[1],e),e=e[3];null===e&&(e=n),fs(e)&&Vg(e[1],e),t=e&&e[4]}e=t}}(e)}}function Vg(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function qL(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof ru)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function $L(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):di(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&Qn(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Yr(e[3])){t!==e[3]&&Qx(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function tw(n,e,t){return function nw(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===qr.None||r===qr.Emulated)return null}return Ar(i,t)}(n,e.parent,t)}function la(n,e,t,i,r){Qn(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function iw(n,e,t){Qn(n)?n.appendChild(e,t):e.appendChild(t)}function rw(n,e,t,i,r){null!==i?la(n,e,t,i,r):iw(n,e,t)}function Td(n,e){return Qn(n)?n.parentNode(e):e.parentNode}function sw(n,e,t){return aw(n,e,t)}let aw=function ow(n,e,t){return 40&n.type?Ar(n,t):null};function Cd(n,e,t,i){const r=tw(n,i,e),s=e[11],a=sw(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)rw(s,r,t[l],a,!1);else rw(s,r,t,a,!1)}function Dd(n,e){if(null!==e){const t=e.type;if(3&t)return Ar(e,n);if(4&t)return Gg(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Dd(n,i);{const r=n[e.index];return Yr(r)?Gg(-1,r):di(r)}}if(32&t)return Og(e,n)()||di(n[e.index]);{const i=cw(n,e);return null!==i?Array.isArray(i)?i[0]:Dd(wu(n[16]),i):Dd(n,e.next)}}return null}function cw(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Gg(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Dd(i,r)}return e[7]}function Wg(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Bi(di(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)Wg(n,e,t.child,i,r,s,!1),vl(e,n,r,a,s);else if(32&l){const c=Og(t,i);let u;for(;u=c();)vl(e,n,r,u,s);vl(e,n,r,a,s)}else 16&l?hw(n,e,i,t,r,s):vl(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Mu(n,e,t,i,r,s){Wg(t,i,n.firstChild,e,r,s,!1)}function hw(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)vl(e,n,r,l[c],s);else Wg(n,e,l,o[3],r,s,!0)}function dw(n,e,t){Qn(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function jg(n,e,t){Qn(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function fw(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const pw="ng-template";function QL(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==fw(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function mw(n){return 4===n.type&&n.value!==pw}function eN(n,e,t){return e===(4!==n.type||t?n.value:pw)}function tN(n,e,t){let i=4;const r=n.attrs||[],s=function rN(n){for(let e=0;e<n.length;e++)if(sx(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!eN(n,l,t)||""===l&&1===e.length){if(Zr(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!QL(n.attrs,c,t)){if(Zr(i))return!1;o=!0}continue}const h=nN(8&i?"class":l,r,mw(n),t);if(-1===h){if(Zr(i))return!1;o=!0;continue}if(""!==c){let d;d=h>s?"":r[h+1].toLowerCase();const f=8&i?d:null;if(f&&-1!==fw(f,c,0)||2&i&&c!==d){if(Zr(i))return!1;o=!0}}}}else{if(!o&&!Zr(i)&&!Zr(l))return!1;if(o&&Zr(l))continue;o=!1,i=l|1&i}}return Zr(i)||o}function Zr(n){return 0==(1&n)}function nN(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function sN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function gw(n,e,t=!1){for(let i=0;i<e.length;i++)if(tN(n,e[i],t))return!0;return!1}function oN(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function yw(n,e){return n?":not("+e.trim()+")":e}function aN(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Zr(o)&&(e+=yw(s,r),r=""),i=o,s=s||!Zr(i);t++}return""!==r&&(e+=yw(s,r)),e}const Bt={};function qt(n){_w(cn(),ze(),$i()+n,rd())}function _w(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&cd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&ud(e,s,0,t)}go(t)}function Ad(n,e){return n<<17|e<<2}function Jr(n){return n>>17&32767}function $g(n){return 2|n}function Vs(n){return(131068&n)>>2}function qg(n,e){return-131069&n|e<<2}function Xg(n){return 1|n}function Aw(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];lg(r),o.contentQueries(2,e[s],s)}}}function Eu(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,qb(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function bl(n,e,t,i,r){let s=n.data[e];if(null===s)s=function iy(n,e,t,i,r){const s=Yb(),o=rg(),l=n.data[e]=function SN(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function XR(){return Rt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function iu(){const n=Rt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ms(s,!0),s}function xl(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Su(n,e,t){od(e);try{const i=n.viewQuery;null!==i&&dy(1,i,t);const r=n.template;null!==r&&Iw(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Aw(n,e),n.staticViewQueries&&dy(2,n.viewQuery,t);const s=n.components;null!==s&&function wN(n,e){for(let t=0;t<e.length;t++)GN(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,ad()}}function wl(n,e,t,i){const r=e[2];if(256==(256&r))return;od(e);const s=rd();try{qb(e),function Kb(n){return Rt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Iw(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&cd(e,c,null)}else{const c=n.preOrderHooks;null!==c&&ud(e,c,0,null),cg(e,0)}if(function VN(n){for(let e=Fg(n);null!==e;e=kg(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&ig(s,1),r[2]|=1024}}}(e),function HN(n){for(let e=Fg(n);null!==e;e=kg(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];ng(i)&&wl(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&Aw(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&cd(e,c)}else{const c=n.contentHooks;null!==c&&ud(e,c,1),cg(e,1)}!function bN(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)go(~r);else{const s=r,o=t[++i],a=t[++i];YR(o,s),a(2,e[s])}}}finally{go(-1)}}(n,e);const a=n.components;null!==a&&function xN(n,e){for(let t=0;t<e.length;t++)zN(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&dy(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&cd(e,c)}else{const c=n.viewHooks;null!==c&&ud(e,c,2),cg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ig(e[3],-1))}finally{ad()}}function MN(n,e,t,i){const r=e[10],s=!rd(),o=$b(e);try{s&&!o&&r.begin&&r.begin(),o&&Su(n,e,i),wl(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function Iw(n,e,t,i,r){const s=$i(),o=2&i;try{go(-1),o&&e.length>20&&_w(n,e,20,rd()),t(i,r)}finally{go(s)}}function ry(n,e,t){!Xb()||(function RN(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||ou(t,e),Bi(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Kr(l);c&&kN(e,t,l);const u=au(e,n,a,t);Bi(u,e),null!==o&&BN(0,a-r,u,l,0,o),c&&(pr(t.index,e)[8]=u)}}(n,e,t,Ar(t,e)),128==(128&t.flags)&&function LN(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function KR(){return Rt.lFrame.currentDirectiveIndex}();try{go(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];og(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Uw(c,u)}}finally{go(-1),og(a)}}(n,e,t))}function sy(n,e,t=Ar){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function Rw(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Rd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Rd(n,e,t,i,r,s,o,a,l,c){const u=20+i,h=u+r,d=function EN(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Bt);return t}(u,h),f="function"==typeof c?c():c;return d[1]={type:n,blueprint:d,template:t,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Ow(n,e,t,i){const r=jw(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&$w(n).push(i,r.length-1))}function Fw(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function yr(n,e,t,i,r,s,o,a){const l=Ar(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(Yw(n,t,u,i,r),ed(e)&&function DN(n,e){const t=pr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function CN(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,Qn(s)?s.setProperty(l,i,r):hg(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function oy(n,e,t,i){let r=!1;if(Xb()){const s=function NN(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];gw(t,o.selectors,!1)&&(r||(r=[]),md(ou(t,e),n,o.type),Kr(o)?(Hw(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,Vw(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const h=s[u];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,c=xl(n,e,s.length,null);for(let u=0;u<s.length;u++){const h=s[u];t.mergedAttrs=dd(t.mergedAttrs,h.hostAttrs),zw(n,t,e,c,h),FN(c,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const d=h.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function TN(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],h=u.inputs,d=null===s||mw(e)?null:UN(h,s);o.push(d),a=Fw(h,c,a),l=Fw(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function ON(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ft(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=dd(t.mergedAttrs,t.attrs),r}function Bw(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function PN(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function Uw(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Hw(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function FN(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Kr(e)&&(t[""]=n)}}function Vw(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zw(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=sa(r.type)),o=new ru(s,Kr(r),null);n.blueprint[i]=o,t[i]=o,Bw(n,e,0,i,xl(n,t,r.hostVars,Bt),r)}function kN(n,e,t){const i=Ar(e,n),r=Rw(t),s=n[10],o=Ld(n,Eu(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function vs(n,e,t,i,r,s){const o=Ar(n,e);!function ay(n,e,t,i,r,s,o){if(null==s)Qn(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?kt(s):o(s,i||"",r);Qn(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function BN(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],h=o[l++];null!==a?i.setInput(t,h,c,u):t[u]=h}}}function UN(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function Gw(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function zN(n,e){const t=pr(e,n);if(ng(t)){const i=t[1];80&t[2]?wl(i,t,i.template,t[8]):t[5]>0&&ly(t)}}function ly(n){for(let i=Fg(n);null!==i;i=kg(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];wl(o,s,o.template,s[8])}else s[5]>0&&ly(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=pr(t[i],n);ng(r)&&r[5]>0&&ly(r)}}function GN(n,e){const t=pr(e,n),i=t[1];(function WN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Su(i,t,t[8])}function Ld(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function cy(n){for(;n;){n[2]|=64;const e=wu(n);if(TR(n)&&!e)return n;n=e}return null}function hy(n,e,t){const i=e[10];i.begin&&i.begin();try{wl(n,e,n.template,t)}catch(r){throw Xw(e,r),r}finally{i.end&&i.end()}}function Ww(n){!function uy(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Pg(t),r=i[1];MN(r,i,r.template,t)}}(n[8])}function dy(n,e,t){lg(0),e(n,t)}const XN=(()=>Promise.resolve(null))();function jw(n){return n[7]||(n[7]=[])}function $w(n){return n.cleanup||(n.cleanup=[])}function Xw(n,e){const t=n[9],i=t?t.get(xu,null):null;i&&i.handleError(e)}function Yw(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function zs(n,e,t){const i=nd(e,n);!function Jx(n,e,t){Qn(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Nd(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Bm(r,a):2==s&&(i=Bm(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const fy=new xt("INJECTOR",-1);class Kw{get(e,t=du){if(t===du){const i=new Error(`NullInjectorError: No provider for ${bn(e)}!`);throw i.name="NullInjectorError",i}return t}}const py=new xt("Set Injector scope."),Tu={},ZN={};let my;function Zw(){return void 0===my&&(my=new Kw),my}function Jw(n,e=null,t=null,i){const r=Qw(n,e,t,i);return r._resolveInjectorDefTypes(),r}function Qw(n,e=null,t=null,i){return new JN(n,t,e||Zw(),i)}class JN{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&gs(t,a=>this.processProvider(a,e,t)),gs([e],a=>this.processInjectorType(a,[],s)),this.records.set(fy,Ml(void 0,this));const o=this.records.get(py);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:bn(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=du,i=Nt.Default){this.assertNotDestroyed();const r=Mx(this),s=ho(void 0);try{if(!(i&Nt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function oO(n){return"function"==typeof n||"object"==typeof n&&n instanceof xt}(e)&&Vm(e);a=l&&this.injectableDefInScope(l)?Ml(gy(e),Tu):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Nt.Self?Zw():this.parent).get(e,t=i&Nt.Optional&&t===du?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[vd]=o[vd]||[]).unshift(bn(e)),r)throw o;return function L2(n,e,t,i){const r=n[vd];throw e[wx]&&r.unshift(e[wx]),n.message=function N2(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=bn(e);if(Array.isArray(e))r=e.map(bn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):bn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(D2,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[vd]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{ho(s),Mx(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(bn(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ft(205,!1)}processInjectorType(e,t,i){if(!(e=Gt(e)))return!1;let r=Lb(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=Lb(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{gs(r.imports,h=>{this.processInjectorType(h,t,i)&&(void 0===u&&(u=[]),u.push(h))})}finally{}if(void 0!==u)for(let h=0;h<u.length;h++){const{ngModule:d,providers:f}=u[h];gs(f,p=>this.processProvider(p,d,f||Pn))}}this.injectorDefTypes.add(o);const l=sa(o)||(()=>new o);this.records.set(o,Ml(l,Tu));const c=r.providers;if(null!=c&&!a){const u=e;gs(c,h=>this.processProvider(h,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=El(e=Gt(e))?e:Gt(e&&e.provide);const s=function eO(n,e,t){return tM(n)?Ml(void 0,n.useValue):Ml(eM(n),Tu)}(e);if(El(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Ml(void 0,Tu,!0),o.factory=()=>wg(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===Tu&&(t.value=ZN,t.value=t.factory()),"object"==typeof t.value&&t.value&&function sO(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Gt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function gy(n){const e=Vm(n),t=null!==e?e.factory:sa(n);if(null!==t)return t;if(n instanceof xt)throw new ft(204,!1);if(n instanceof Function)return function QN(n){const e=n.length;if(e>0)throw hu(e,"?"),new ft(204,!1);const t=function fR(n){const e=n&&(n[Yh]||n[Nb]);if(e){const t=function pR(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ft(204,!1)}function eM(n,e,t){let i;if(El(n)){const r=Gt(n);return sa(r)||gy(r)}if(tM(n))i=()=>Gt(n.useValue);else if(function nO(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...wg(n.deps||[]));else if(function tO(n){return!(!n||!n.useExisting)}(n))i=()=>Ie(Gt(n.useExisting));else{const r=Gt(n&&(n.useClass||n.provide));if(!function rO(n){return!!n.deps}(n))return sa(r)||gy(r);i=()=>new r(...wg(n.deps))}return i}function Ml(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function tM(n){return null!==n&&"object"==typeof n&&I2 in n}function El(n){return"function"==typeof n}let Xi=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return Jw({name:""},i,t,"");{const s=null!==(r=t.name)&&void 0!==r?r:"";return Jw({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=du,n.NULL=new Kw,n.\u0275prov=_t({token:n,providedIn:"any",factory:()=>Ie(fy)}),n.__NG_ELEMENT_ID__=-1,n})();function pO(n,e){ld(Pg(n)[1],wi())}function ir(n){let e=function fM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Kr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ft(903,"");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=vy(n.inputs),o.declaredInputs=vy(n.declaredInputs),o.outputs=vy(n.outputs);const a=r.hostBindings;a&&_O(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&gO(n,l),c&&yO(n,c),km(n.inputs,r.inputs),km(n.declaredInputs,r.declaredInputs),km(n.outputs,r.outputs),Kr(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ir&&(t=!1)}}e=Object.getPrototypeOf(e)}!function mO(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=dd(r.hostAttrs,t=dd(t,r.hostAttrs))}}(i)}function vy(n){return n===el?{}:n===Pn?[]:n}function gO(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function yO(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function _O(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let Od=null;function Sl(){if(!Od){const n=Cn.Symbol;if(n&&n.iterator)Od=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Od=i)}}}return Od}function Cu(n){return!!by(n)&&(Array.isArray(n)||!(n instanceof Map)&&Sl()in n)}function by(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ui(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Rr(n,e,t,i){const r=ze();return Ui(r,ol(),e)&&(cn(),vs(ei(),r,n,e,t,i)),Rr}function Cl(n,e,t,i){return Ui(n,ol(),t)?e+kt(t)+i:Bt}function Gs(n,e,t,i,r,s,o,a){const l=ze(),c=cn(),u=n+20,h=c.firstCreatePass?function SO(n,e,t,i,r,s,o,a,l){const c=e.consts,u=bl(e,n,4,o||null,mo(c,a));oy(e,t,u,mo(c,l)),ld(e,u);const h=u.tViews=Rd(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];ms(h,!1);const d=l[11].createComment("");Cd(c,l,d,h),Bi(d,l),Ld(l,l[u]=Gw(d,l,d,h)),td(h)&&ry(c,l,h),null!=o&&sy(l,h,a)}function Au(n){return function sl(n,e){return n[e]}(function qR(){return Rt.lFrame.contextLView}(),20+n)}function Pe(n,e=Nt.Default){const t=ze();return null===t?Ie(n,e):dx(wi(),t,Gt(n),e)}function Sy(){throw new Error("invalid")}function Yn(n,e,t){const i=ze();return Ui(i,ol(),e)&&yr(cn(),ei(),i,n,e,i[11],t,!1),Yn}function Ty(n,e,t,i,r){const o=r?"class":"style";Yw(n,t,e.inputs[o],o,i)}function De(n,e,t,i){const r=ze(),s=cn(),o=20+n,a=r[11],l=r[o]=Ug(a,e,function n2(){return Rt.lFrame.currentNamespace}()),c=s.firstCreatePass?function $O(n,e,t,i,r,s,o){const a=e.consts,c=bl(e,n,2,r,mo(a,s));return oy(e,t,c,mo(a,o)),null!==c.attrs&&Nd(c,c.attrs,!1),null!==c.mergedAttrs&&Nd(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];ms(c,!0);const u=c.mergedAttrs;null!==u&&hd(a,l,u);const h=c.classes;null!==h&&jg(a,l,h);const d=c.styles;return null!==d&&dw(a,l,d),64!=(64&c.flags)&&Cd(s,r,l,c),0===function zR(){return Rt.lFrame.elementDepthCount}()&&Bi(l,r),function GR(){Rt.lFrame.elementDepthCount++}(),td(c)&&(ry(s,r,c),function Pw(n,e,t){if(Xm(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,r)),null!==i&&sy(r,c),De}function Ae(){let n=wi();rg()?sg():(n=n.parent,ms(n,!1));const e=n;!function WR(){Rt.lFrame.elementDepthCount--}();const t=cn();return t.firstCreatePass&&(ld(t,n),Xm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function l2(n){return 0!=(16&n.flags)}(e)&&Ty(t,e,ze(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function c2(n){return 0!=(32&n.flags)}(e)&&Ty(t,e,ze(),e.stylesWithoutHost,!1),Ae}function wn(n,e,t,i){return De(n,e,t,i),Ae(),wn}function Bd(n){return!!n&&"function"==typeof n.then}const FM=function OM(n){return!!n&&"function"==typeof n.subscribe};function rr(n,e,t,i){const r=ze(),s=cn(),o=wi();return function BM(n,e,t,i,r,s,o,a){const l=td(i),u=n.firstCreatePass&&$w(n),h=e[8],d=jw(e);let f=!0;if(3&i.type||a){const _=Ar(i,e),g=a?a(_):_,m=d.length,E=a?w=>a(di(w[i.index])):i.index;if(Qn(t)){let w=null;if(!a&&l&&(w=function XO(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,f=!1;else{s=Ay(i,e,h,s,!1);const T=t.listen(g,r,s);d.push(s,T),u&&u.push(r,E,m,m+1)}}else s=Ay(i,e,h,s,!0),g.addEventListener(r,s,o),d.push(s),u&&u.push(r,E,m,o)}else s=Ay(i,e,h,s,!1);const p=i.outputs;let y;if(f&&null!==p&&(y=p[r])){const _=y.length;if(_)for(let g=0;g<_;g+=2){const j=e[y[g]][y[g+1]].subscribe(s),Q=d.length;d.push(s,j),u&&u.push(r,i.index,Q,-(Q+1))}}}(s,r,r[11],o,n,e,!!t,i),rr}function UM(n,e,t,i){try{return!1!==t(i)}catch(r){return Xw(n,r),!1}}function Ay(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?pr(n.index,e):e;0==(32&e[2])&&cy(a);let l=UM(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=UM(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function ua(n=1){return function JR(n){return(Rt.lFrame.contextLView=function QR(n,e){for(;n>0;)e=e[15],n--;return e}(n,Rt.lFrame.contextLView))[8]}(n)}function YO(n,e){let t=null;const i=function iN(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?gw(n,s,!0):oN(i,s))return r}else t=r}return t}function _r(n){const e=ze()[16][6];if(!e.projection){const i=e.projection=hu(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?YO(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Vn(n,e=0,t){const i=ze(),r=cn(),s=bl(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),sg(),64!=(64&s.flags)&&function KL(n,e,t){hw(e[11],0,e,t,tw(n,t,e),sw(t.parent||e[6],t,e))}(r,i,s)}function Fl(n,e,t){return Iy(n,"",e,"",t),Fl}function Iy(n,e,t,i,r){const s=ze(),o=Cl(s,e,t,i);return o!==Bt&&yr(cn(),ei(),s,n,o,s[11],r,!1),Iy}function XM(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Jr(s):Vs(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];JO(n[a],e)&&(l=!0,n[a+1]=i?Xg(u):$g(u)),a=i?Jr(u):Vs(u)}l&&(n[t+1]=i?$g(s):Xg(s))}function JO(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ml(n,e)>=0}function Ud(n,e,t){return es(n,e,t,!1),Ud}function Yi(n,e){return es(n,e,null,!0),Yi}function es(n,e,t,i){const r=ze(),s=cn(),o=function Us(n){const e=Rt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function nE(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[$i()],o=function tE(n,e){return e>=n.expandoStartIndex}(n,t);(function oE(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function aF(n,e,t,i){const r=function ag(n){const e=Rt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Iu(t=Py(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Py(r,n,e,t,i),null===s){let l=function lF(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Vs(i))return n[Jr(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=Py(null,n,e,l[1],i),l=Iu(l,e.attrs,i),function cF(n,e,t,i){n[Jr(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function uF(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Iu(i,n[s].hostAttrs,t);return Iu(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function KO(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Jr(o),l=Vs(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const h=t;u=h[1],(null===u||ml(h,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const d=Jr(n[a+1]);n[i+1]=Ad(d,a),0!==d&&(n[d+1]=qg(n[d+1],i)),n[a+1]=function uN(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Ad(a,0),0!==a&&(n[a+1]=qg(n[a+1],i)),a=i;else n[i+1]=Ad(l,0),0===a?a=i:n[l+1]=qg(n[l+1],i),l=i;c&&(n[i+1]=$g(n[i+1])),XM(n,u,i,!0),XM(n,u,i,!1),function ZO(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ml(s,e)>=0&&(t[i+1]=Xg(t[i+1]))}(e,u,n,i,s),o=Ad(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==Bt&&Ui(r,o,e)&&function rE(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Hd(function xw(n){return 1==(1&n)}(c)?sE(l,e,t,r,Vs(c),o):void 0)||(Hd(s)||function bw(n){return 2==(2&n)}(c)&&(s=sE(l,null,t,r,a,o)),function JL(n,e,t,i,r){const s=Qn(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:gr.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=gr.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,nd($i(),t),r,s))}(s,s.data[$i()],r,r[11],n,r[o+1]=function fF(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=bn(vo(n)))),n}(e,t),i,o)}function Py(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Iu(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Iu(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),mr(n,o,!!t||e[++s]))}return void 0===n?null:n}function sE(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let d=t[r+1];d===Bt&&(d=h?Pn:void 0);let f=h?_g(d,i):u===i?d:void 0;if(c&&!Hd(f)&&(f=_g(l,i)),Hd(f)&&(a=f,o))return a;const p=n[r+1];r=o?Jr(p):Vs(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=_g(l,i))}return a}function Hd(n){return void 0!==n}function Ye(n,e=""){const t=ze(),i=cn(),r=n+20,s=i.firstCreatePass?bl(i,r,1,e,null):i.data[r],o=t[r]=function Bg(n,e){return Qn(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Cd(i,t,o,s),ms(s,!1)}function Pu(n){return oi("",n,""),Pu}function oi(n,e,t){const i=ze(),r=Cl(i,n,e,t);return r!==Bt&&zs(i,$i(),r),oi}const Vd="en-US";let CE=Vd;function Oy(n,e,t,i,r){if(n=Gt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Oy(n[s],e,t,i,r);else{const s=cn(),o=ze();let a=El(n)?n:Gt(n.provide),l=eM(n);const c=wi(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(El(n)||!n.multi){const f=new ru(l,r,Pe),p=ky(a,e,r?u:u+d,h);-1===p?(md(ou(c,o),s,a),Fy(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=ky(a,e,u+d,h),p=ky(a,e,u,u+d),y=f>=0&&t[f],_=p>=0&&t[p];if(r&&!_||!r&&!y){md(ou(c,o),s,a);const g=function R3(n,e,t,i,r){const s=new ru(n,t,Pe);return s.multi=[],s.index=e,s.componentProviders=0,ZE(s,r,i&&!t),s}(r?P3:I3,t.length,r,i,l);!r&&_&&(t[p].providerFactory=g),Fy(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(g),o.push(g)}else Fy(s,n,f>-1?f:p,ZE(t[r?p:f],l,!r&&i));!r&&i&&_&&t[p].componentProviders++}}}function Fy(n,e,t,i){const r=El(e),s=function iO(n){return!!n.useClass}(e);if(r||s){const l=(s?Gt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function ZE(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ky(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function I3(n,e,t,i){return By(this.multi,[])}function P3(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=au(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),By(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],By(r,s);return s}function By(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ms(n,e=[]){return t=>{t.providersResolver=(i,r)=>function A3(n,e,t){const i=cn();if(i.firstCreatePass){const r=Kr(n);Oy(t,i.data,i.blueprint,r,!0),Oy(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class JE{}class O3{resolveComponentFactory(e){throw function N3(n){const e=Error(`No component factory found for ${bn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Hl=(()=>{class n{}return n.NULL=new O3,n})();function F3(){return Vl(wi(),ze())}function Vl(n,e){return new Kn(Ar(n,e))}let Kn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=F3,n})();function k3(n){return n instanceof Kn?n.nativeElement:n}class Fu{}let $d=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function U3(){const n=ze(),t=pr(wi().index,n);return function B3(n){return n[11]}(fs(t)?t:n)}(),n})(),H3=(()=>{class n{}return n.\u0275prov=_t({token:n,providedIn:"root",factory:()=>null}),n})();class da{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const V3=new da("13.2.5"),Uy={};function qd(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(di(s)),Yr(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&qd(l[1],l,c,i)}const o=t.type;if(8&o)qd(n,e,t.child,i);else if(32&o){const a=Og(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=cw(e,t);if(Array.isArray(a))i.push(...a);else{const l=wu(e[16]);qd(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class ku{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return qd(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Yr(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Hg(e,i),yd(t,i))}this._attachedToViewContainer=!1}ew(this._lView[1],this._lView)}onDestroy(e){Ow(this._lView[1],this._lView,null,e)}markForCheck(){cy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function $N(n,e,t){sd(!0);try{hy(n,e,t)}finally{sd(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ft(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zL(n,e){Mu(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ft(902,"");this._appRef=e}}class z3 extends ku{constructor(e){super(e),this._view=e}detectChanges(){Ww(this._view)}checkNoChanges(){!function qN(n){sd(!0);try{Ww(n)}finally{sd(!1)}}(this._view)}get context(){return null}}class eS extends Hl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Fi(e);return new Hy(t,this.ngModule)}}function tS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Hy extends JE{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function lN(n){return n.map(aN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return tS(this.componentDef.inputs)}get outputs(){return tS(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function W3(n,e){return{get:(t,i,r)=>{const s=n.get(t,Uy,r);return s!==Uy||i===Uy?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(Fu,jb),a=s.get(H3,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function Nw(n,e,t){if(Qn(n))return n.selectRootElement(e,t===qr.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):Ug(o.createRenderer(null,this.componentDef),c,function G3(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),h=this.componentDef.onPush?576:528,d=function dM(n,e){return{components:[],scheduler:n||NL,clean:XN,playerHandler:e||null,flags:0}}(),f=Rd(0,null,null,1,0,null,null,null,null,null),p=Eu(null,f,d,h,null,null,o,l,a,s);let y,_;od(p);try{const g=function uM(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=bl(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Nd(l,c,!0),null!==n&&(hd(r,n,c),null!==l.classes&&jg(r,n,l.classes),null!==l.styles&&dw(r,n,l.styles)));const u=i.createRenderer(n,e),h=Eu(t,Rw(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(md(ou(l,t),o,e.type),Hw(o,l),Vw(l,t.length,1)),Ld(t,h),t[20]=h}(u,this.componentDef,p,o,l);if(u)if(i)hd(l,u,["ng-version",V3.full]);else{const{attrs:m,classes:E}=function cN(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Zr(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);m&&hd(l,u,m),E&&E.length>0&&jg(l,u,E.join(" "))}if(_=tg(f,20),void 0!==t){const m=_.projection=[];for(let E=0;E<this.ngContentSelectors.length;E++){const w=t[E];m.push(null!=w?Array.from(w):null)}}y=function hM(n,e,t,i,r){const s=t[1],o=function IN(n,e,t){const i=wi();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),zw(n,i,e,xl(n,e,1,null),t));const r=au(e,n,i.directiveStart,i);Bi(r,e);const s=Ar(i,e);return s&&Bi(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=wi();e.contentQueries(1,o,l.directiveStart)}const a=wi();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(go(a.index),Bw(t[1],a,0,a.directiveStart,a.directiveEnd,e),Uw(e,o)),o}(g,this.componentDef,p,d,[pO]),Su(f,p,null)}finally{ad()}return new $3(this.componentType,y,Vl(_,p),p,_)}}class $3 extends class L3{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new z3(r),this.componentType=e}get injector(){return new cl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Ws{}class nS{}const zl=new Map;class sS extends Ws{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eS(this);const i=Tr(e);this._bootstrapComponents=_s(i.bootstrap),this._r3Injector=Qw(e,t,[{provide:Ws,useValue:this},{provide:Hl,useValue:this.componentFactoryResolver}],bn(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Xi.THROW_IF_NOT_FOUND,i=Nt.Default){return e===Xi||e===Ws||e===fy?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Vy extends nS{constructor(e){super(),this.moduleType=e,null!==Tr(e)&&function X3(n){const e=new Set;!function t(i){const r=Tr(i,!0),s=r.id;null!==s&&(function iS(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${bn(e)} vs ${bn(e.name)}`)}(s,zl.get(s),i),zl.set(s,i));const o=_s(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new sS(this.moduleType,e)}}function zy(n){return e=>{setTimeout(n,void 0,e)}}const Rn=class dk extends pe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const h=e;a=null===(r=h.next)||void 0===r?void 0:r.bind(h),l=null===(s=h.error)||void 0===s?void 0:s.bind(h),c=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}this.__isAsync&&(l=zy(l),a&&(a=zy(a)),c&&(c=zy(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof ee&&e.add(u),u}};function fk(){return this._results[Sl()]()}class Gl{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Sl(),i=Gl.prototype;i[t]||(i[t]=fk)}get changes(){return this._changes||(this._changes=new Rn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Ir(e);(this._changesDetected=!function v2(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ns=(()=>{class n{}return n.__NG_ELEMENT_ID__=gk,n})();const pk=ns,mk=class extends pk{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=Eu(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),Su(t,i,e),new ku(i)}};function gk(){return Xd(wi(),ze())}function Xd(n,e){return 4&n.type?new mk(e,n,Vl(n,e)):null}let sr=(()=>{class n{}return n.__NG_ELEMENT_ID__=yk,n})();function yk(){return fS(wi(),ze())}const _k=sr,hS=class extends _k{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new cl(this._hostTNode,this._hostLView)}get parentInjector(){const e=pd(this._hostTNode,this._hostLView);if(ax(e)){const t=ll(e,this._hostLView),i=al(e);return new cl(t[1].data[i+8],t)}return new cl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=dS(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function uu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const h=t||{};a=h.index,i=h.injector,r=h.projectableNodes,s=h.ngModuleRef}const l=o?e:new Hy(Fi(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const d=(o?c:this.parentInjector).get(Ws,null);d&&(s=d)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function VR(n){return Yr(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const h=i[3],d=new hS(h,h[6],h[3]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function WL(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],yx(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function jL(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=Gg(s,o),l=i[11],c=Td(l,o[7]);return null!==c&&function VL(n,e,t,i,r,s){i[0]=r,i[6]=e,Mu(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),yx(Gy(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=dS(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Hg(this._lContainer,t);i&&(yd(Gy(this._lContainer),t),ew(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=Hg(this._lContainer,t);return i&&null!=yd(Gy(this._lContainer),t)?new ku(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function dS(n){return n[8]}function Gy(n){return n[8]||(n[8]=[])}function fS(n,e){let t;const i=e[n.index];if(Yr(i))t=i;else{let r;if(8&n.type)r=di(i);else{const s=e[11];r=s.createComment("");const o=Ar(n,e);la(s,Td(s,o),r,function YL(n,e){return Qn(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=Gw(i,e,r,n),Ld(e,t)}return new hS(t,n,e)}class Wy{constructor(e){this.queryList=e,this.matches=null}clone(){return new Wy(this.queryList)}setDirty(){this.queryList.setDirty()}}class jy{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new jy(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==_S(e,t).matches&&this.queries[t].setDirty()}}class pS{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class $y{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new $y(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class qy{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new qy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,xk(t,s)),this.matchTNodeWithReadOption(e,t,gd(t,e,s,!1,!1))}else i===ns?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,gd(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Kn||r===sr||r===ns&&4&t.type)this.addMatch(t.index,-2);else{const s=gd(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function xk(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Mk(n,e,t,i){return-1===t?function wk(n,e){return 11&n.type?Vl(n,e):4&n.type?Xd(n,e):null}(e,n):-2===t?function Ek(n,e,t){return t===Kn?Vl(e,n):t===ns?Xd(e,n):t===sr?fS(e,n):void 0}(n,e,i):au(n,n[1],t,e)}function mS(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:Mk(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function Xy(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=mS(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let h=10;h<u.length;h++){const d=u[h];d[17]===d[3]&&Xy(d[1],d,c,i)}if(null!==u[9]){const h=u[9];for(let d=0;d<h.length;d++){const f=h[d];Xy(f[1],f,c,i)}}}}}return i}function Lr(n){const e=ze(),t=cn(),i=Jb();lg(i+1);const r=_S(t,i);if(n.dirty&&$b(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Xy(t,e,i,[]):mS(t,e,r,i);n.reset(s,k3),n.notifyOnChanges()}return!0}return!1}function Wl(n,e,t){const i=cn();i.firstCreatePass&&(yS(i,new pS(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),gS(i,ze(),e)}function fa(n,e,t,i){const r=cn();if(r.firstCreatePass){const s=wi();yS(r,new pS(e,t,i),s.index),function Tk(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}gS(r,ze(),t)}function Nr(){return function Sk(n,e){return n[19].queries[e].queryList}(ze(),Jb())}function gS(n,e,t){const i=new Gl(4==(4&t));Ow(n,e,i,i.destroy),null===e[19]&&(e[19]=new jy),e[19].queries.push(new Wy(i))}function yS(n,e,t){null===n.queries&&(n.queries=new $y),n.queries.track(new qy(e,t))}function _S(n,e){return n.queries.getByIndex(e)}function Zd(...n){}const e_=new xt("Application Initializer");let t_=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Zd,this.reject=Zd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Bd(s))t.push(s);else if(FM(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Ie(e_,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vu=new xt("AppId",{providedIn:"root",factory:function OS(){return`${n_()}${n_()}${n_()}`}});function n_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const FS=new xt("Platform Initializer"),$l=new xt("Platform ID"),kS=new xt("appBootstrapListener");let BS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const js=new xt("LocaleId",{providedIn:"root",factory:()=>xg(js,Nt.Optional|Nt.SkipSelf)||function Wk(){return"undefined"!=typeof $localize&&$localize.locale||Vd}()});class $k{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let US=(()=>{class n{compileModuleSync(t){return new Vy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=_s(Tr(t).declarations).reduce((o,a)=>{const l=Fi(a);return l&&o.push(new Hy(l)),o},[]);return new $k(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xk=(()=>Promise.resolve(0))();function i_(n){"undefined"==typeof Zone?Xk.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class gn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rn(!1),this.onMicrotaskEmpty=new Rn(!1),this.onStable=new Rn(!1),this.onError=new Rn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Yk(){let n=Cn.requestAnimationFrame,e=Cn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Jk(n){const e=()=>{!function Zk(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Cn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,s_(n),n.isCheckStableRunning=!0,r_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),s_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return HS(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),VS(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return HS(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),VS(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,s_(n),r_(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Kk,Zd,Zd);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Kk={};function r_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function s_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function HS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VS(n){n._nesting--,r_(n)}class Qk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rn,this.onMicrotaskEmpty=new Rn,this.onStable=new Rn,this.onError=new Rn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let o_=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gn.assertNotInAngularZone(),i_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())i_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Ie(gn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),zS=(()=>{class n{constructor(){this._applications=new Map,a_.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return a_.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class eB{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let is,a_=new eB;const GS=new xt("AllowMultipleToken");class WS{constructor(e,t){this.name=e,this.token=t}}function jS(n,e,t=[]){const i=`Platform: ${e}`,r=new xt(i);return(s=[])=>{let o=$S();if(!o||o.injector.get(GS,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:py,useValue:"platform"});!function rB(n){if(is&&!is.destroyed&&!is.injector.get(GS,!1))throw new ft(400,"");is=n.get(qS);const e=n.get(FS,null);e&&e.forEach(t=>t())}(Xi.create({providers:a,name:i}))}return function sB(n){const e=$S();if(!e)throw new ft(401,"");return e}()}}function $S(){return is&&!is.destroyed?is:null}let qS=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function oB(n,e){let t;return t="noop"===n?new Qk:("zone.js"===n?void 0:n)||new gn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:gn,useValue:a}];return a.run(()=>{const c=Xi.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),h=u.injector.get(xu,null);if(!h)throw new ft(402,"");return a.runOutsideAngular(()=>{const d=a.onError.subscribe({next:f=>{h.handleError(f)}});u.onDestroy(()=>{c_(this._modules,u),d.unsubscribe()})}),function aB(n,e,t){try{const i=t();return Bd(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(h,a,()=>{const d=u.injector.get(t_);return d.runInitializers(),d.donePromise.then(()=>(function BF(n){dr(n,"Expected localeId to be defined"),"string"==typeof n&&(CE=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(js,Vd)||Vd),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=XS({},i);return function nB(n,e,t){const i=new Vy(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(l_);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ft(403,"");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ft(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Ie(Xi))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();function XS(n,e){return Array.isArray(e)?e.reduce(XS,n):Object.assign(Object.assign({},n),e)}let l_=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new x(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new x(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{gn.assertNotInAngularZone(),i_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{gn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),h.unsubscribe()}});this.isStable=Un(a,l.pipe(function aR(){return n=>uo()(function rR(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new sR(r,e));const s=Object.create(i,tR);return s.source=i,s.subjectFactory=r,s}}(oR)(n))}()))}bootstrap(t,i){if(!this._initStatus.done)throw new ft(405,"");let r;r=t instanceof JE?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function iB(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Ws),a=r.create(Xi.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(o_,null),u=c&&a.injector.get(zS);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),c_(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new ft(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;c_(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(kS,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(Ie(gn),Ie(Xi),Ie(xu),Ie(Hl),Ie(t_))},n.\u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function c_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let KS=!0,ZS=!1,wo=(()=>{class n{}return n.__NG_ELEMENT_ID__=hB,n})();function hB(n){return function dB(n,e,t){if(ed(n)&&!t){const i=pr(n.index,e);return new ku(i,i)}return 47&n.type?new ku(e[16],e):null}(wi(),ze(),16==(16&n))}class t1{constructor(){}supports(e){return Cu(e)}create(e){return new _B(e)}}const yB=(n,e)=>e;class _B{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||yB}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<i1(i,r,s)?t:i,a=i1(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let d=0;d<c;d++){const f=d<s.length?s[d]:s[d]=0,p=f+d;u<=p&&p<c&&(s[d]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Cu(e))throw new ft(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function EO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Sl()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new vB(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new n1),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new n1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class vB{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bB{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class n1{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new bB,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function i1(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class r1{constructor(){}supports(e){return e instanceof Map||by(e)}create(){return new xB}}class xB{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||by(e)))throw new ft(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new wB(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class wB{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function s1(){return new ef([new t1])}let ef=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||s1()),deps:[[n,new mu,new _o]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ft(901,"")}}return n.\u0275prov=_t({token:n,providedIn:"root",factory:s1}),n})();function o1(){return new zu([new r1])}let zu=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||o1()),deps:[[n,new mu,new _o]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new ft(901,"")}}return n.\u0275prov=_t({token:n,providedIn:"root",factory:o1}),n})();const SB=jS(null,"core",[{provide:$l,useValue:"unknown"},{provide:qS,deps:[Xi]},{provide:zS,deps:[]},{provide:BS,deps:[]}]);let TB=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Ie(l_))},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({}),n})(),tf=null;function Mo(){return tf}const yn=new xt("DocumentToken");let ma=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(){return function IB(){return Ie(a1)}()},providedIn:"platform"}),n})();const PB=new xt("Location Initialized");let a1=(()=>{class n extends ma{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mo().getBaseHref(this._doc)}onPopState(t){const i=Mo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Mo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){l1()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){l1()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Ie(yn))},n.\u0275prov=_t({token:n,factory:function(){return function RB(){return new a1(Ie(yn))}()},providedIn:"platform"}),n})();function l1(){return!!window.history.pushState}function p_(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function c1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $s(n){return n&&"?"!==n[0]?"?"+n:n}let ql=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:function(){return function LB(n){const e=Ie(yn).location;return new u1(Ie(ma),e&&e.origin||"")}()},providedIn:"root"}),n})();const m_=new xt("appBaseHref");let u1=(()=>{class n extends ql{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p_(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+$s(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+$s(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+$s(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(Ie(ma),Ie(m_,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),NB=(()=>{class n extends ql{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=p_(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+$s(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+$s(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(Ie(ma),Ie(m_,8))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),g_=(()=>{class n{constructor(t,i){this._subject=new Rn,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=c1(h1(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+$s(i))}normalize(t){return n.stripTrailingSlash(function FB(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,h1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$s(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$s(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=$s,n.joinWithSlash=p_,n.stripTrailingSlash=c1,n.\u0275fac=function(t){return new(t||n)(Ie(ql),Ie(ma))},n.\u0275prov=_t({token:n,factory:function(){return function OB(){return new g_(Ie(ql),Ie(ma))}()},providedIn:"root"}),n})();function h1(n){return n.replace(/\/index.html$/,"")}function b1(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class xU{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let x1=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new xU(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),w1(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{w1(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Pe(sr),Pe(ns),Pe(ef))},n.\u0275dir=St({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function w1(n,e){n.context.$implicit=e.item}let T_=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new wU,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){M1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){M1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Pe(sr),Pe(ns))},n.\u0275dir=St({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class wU{constructor(){this.$implicit=null,this.ngIf=null}}function M1(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${bn(e)}'.`)}class C_{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ff=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=St({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),E1=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new C_(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(Pe(sr),Pe(ns),Pe(ff,9))},n.\u0275dir=St({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),S1=(()=>{class n{constructor(t,i,r){r._addDefault(new C_(t,i))}}return n.\u0275fac=function(t){return new(t||n)(Pe(sr),Pe(ns),Pe(ff,9))},n.\u0275dir=St({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),C1=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(Pe(Kn),Pe(zu),Pe($d))},n.\u0275dir=St({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),pf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({}),n})();const A1="browser";let KU=(()=>{class n{}return n.\u0275prov=_t({token:n,providedIn:"root",factory:()=>new ZU(Ie(yn),window)}),n})();class ZU{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function JU(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=I1(this.window.history)||I1(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function I1(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class P1{}class I_ extends class QU extends class AB{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function DB(n){tf||(tf=n)}(new I_)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function e4(){return ju=ju||document.querySelector("base"),ju?ju.getAttribute("href"):null}();return null==t?null:function t4(n){mf=mf||document.createElement("a"),mf.setAttribute("href",n);const e=mf.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ju=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return b1(document.cookie,e)}}let mf,ju=null;const R1=new xt("TRANSITION_ID"),i4=[{provide:e_,useFactory:function n4(n,e,t){return()=>{t.get(t_).donePromise.then(()=>{const i=Mo(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[R1,yn,Xi],multi:!0}];class P_{static init(){!function tB(n){a_=n}(new P_)}addToWindow(e){Cn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Cn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Cn.getAllAngularRootElements=()=>e.getAllRootElements(),Cn.frameworkStabilizers||(Cn.frameworkStabilizers=[]),Cn.frameworkStabilizers.push(i=>{const r=Cn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?Mo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let r4=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const gf=new xt("EventManagerPlugins");let yf=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Ie(gf),Ie(gn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class L1{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Mo().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let N1=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),$u=(()=>{class n extends N1{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(O1),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(O1))}}return n.\u0275fac=function(t){return new(t||n)(Ie(yn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();function O1(n){Mo().remove(n)}const R_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},L_=/%COMP%/g;function _f(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?_f(n,r,t):(r=r.replace(L_,n),t.push(r))}return t}function B1(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vf=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new N_(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case qr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new u4(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case qr.ShadowDom:return new h4(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=_f(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Ie(yf),Ie($u),Ie(Vu))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class N_{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(R_[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=R_[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=R_[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(gr.DashCase|gr.Important)?e.style.setProperty(t,i,r&gr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&gr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,B1(i)):this.eventManager.addEventListener(e,t,B1(i))}}class u4 extends N_{constructor(e,t,i,r){super(e),this.component=i;const s=_f(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function a4(n){return"_ngcontent-%COMP%".replace(L_,n)}(r+"-"+i.id),this.hostAttr=function l4(n){return"_nghost-%COMP%".replace(L_,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class h4 extends N_{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=_f(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let d4=(()=>{class n extends L1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Ie(yn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const H1=["alt","control","meta","shift"],p4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},V1={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},m4={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let g4=(()=>{class n extends L1{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mo().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(H1.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function y4(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&V1.hasOwnProperty(e)&&(e=V1[e]))}return p4[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),H1.forEach(s=>{s!=r&&m4[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Ie(yn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const x4=jS(SB,"browser",[{provide:$l,useValue:A1},{provide:FS,useValue:function _4(){I_.makeCurrent(),P_.init()},multi:!0},{provide:yn,useFactory:function b4(){return function kR(n){Qm=n}(document),document},deps:[]}]),w4=[{provide:py,useValue:"root"},{provide:xu,useFactory:function v4(){return new xu},deps:[]},{provide:gf,useClass:d4,multi:!0,deps:[yn,gn,$l]},{provide:gf,useClass:g4,multi:!0,deps:[yn]},{provide:vf,useClass:vf,deps:[yf,$u,Vu]},{provide:Fu,useExisting:vf},{provide:N1,useExisting:$u},{provide:$u,useClass:$u,deps:[yn]},{provide:o_,useClass:o_,deps:[gn]},{provide:yf,useClass:yf,deps:[gf,gn]},{provide:P1,useClass:r4,deps:[]}];let z1=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Vu,useValue:t.appId},{provide:R1,useExisting:Vu},i4]}}}return n.\u0275fac=function(t){return new(t||n)(Ie(n,12))},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({providers:w4,imports:[pf,TB]}),n})();"undefined"!=typeof window&&window;class j1{}const Xs="*";function F_(n,e){return{type:7,name:n,definitions:e,options:{}}}function k_(n,e=null){return{type:4,styles:e,timings:n}}function $1(n,e=null){return{type:2,steps:n,options:e}}function So(n){return{type:6,styles:n,offset:null}}function qu(n,e,t){return{type:0,name:n,styles:e,options:t}}function B_(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function q1(n){Promise.resolve(null).then(n)}class Xu{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){q1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class X1{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?q1(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const rn=!1;function Y1(n){return new ft(3e3,rn)}function fH(){return"undefined"!=typeof window&&void 0!==window.document}function H_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function To(n){switch(n.length){case 0:return new Xu;case 1:return n[0];default:return new X1(n)}}function K1(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const h=u.offset,d=h==l,f=d&&c||{};Object.keys(u).forEach(p=>{let y=p,_=u[p];if("offset"!==p)switch(y=e.normalizePropertyName(y,o),_){case"!":_=r[p];break;case Xs:_=s[p];break;default:_=e.normalizeStyleValue(p,y,_,o)}f[y]=_}),d||a.push(f),c=f,l=h}),o.length)throw function nH(n){return new ft(3502,rn)}();return a}function V_(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&z_(t,"start",n)));break;case"done":n.onDone(()=>i(t&&z_(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&z_(t,"destroy",n)))}}function z_(n,e,t){const i=t.totalTime,s=G_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function G_(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function vr(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function Z1(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let W_=(n,e)=>!1,J1=(n,e,t)=>[],Q1=null;function j_(n){const e=n.parentNode||n.host;return e===Q1?null:e}(H_()||"undefined"!=typeof Element)&&(fH()?(Q1=(()=>document.documentElement)(),W_=(n,e)=>{for(;e;){if(e===n)return!0;e=j_(e)}return!1}):W_=(n,e)=>n.contains(e),J1=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let ga=null,eT=!1;function tT(n){ga||(ga=function mH(){return"undefined"!=typeof document?document.body:null}()||{},eT=!!ga.style&&"WebkitAppearance"in ga.style);let e=!0;return ga.style&&!function pH(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ga.style,!e&&eT&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in ga.style)),e}const nT=W_,iT=J1;let rT=(()=>{class n{validateStyleProperty(t){return tT(t)}matchesElement(t,i){return!1}containsElement(t,i){return nT(t,i)}getParentElement(t){return j_(t)}query(t,i,r){return iT(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Xu(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),$_=(()=>{class n{}return n.NOOP=new rT,n})();const q_="ng-enter",xf="ng-leave",wf="ng-trigger",Mf=".ng-trigger",oT="ng-animating",X_=".ng-animating";function ya(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Y_(parseFloat(e[1]),e[2])}function Y_(n,e){return"s"===e?1e3*n:n}function Ef(n,e,t){return n.hasOwnProperty("duration")?n:function _H(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Y1()),{duration:0,delay:0,easing:""};r=Y_(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=Y_(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function N4(){return new ft(3100,rn)}()),a=!0),s<0&&(e.push(function O4(){return new ft(3101,rn)}()),a=!0),a&&e.splice(l,0,Y1())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Xl(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Co(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Xl(n,t);return t}function lT(n,e,t){return t?e+":"+t+";":""}function cT(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=lT(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=lT(0,xH(t),n.style[t]));n.setAttribute("style",e)}function Es(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=Z_(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),H_()&&cT(n))}function _a(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=Z_(t);n.style[i]=""}),H_()&&cT(n))}function Yu(n){return Array.isArray(n)?1==n.length?n[0]:$1(n):n}const K_=new RegExp("{{\\s*(.+?)\\s*}}","g");function uT(n){let e=[];if("string"==typeof n){let t;for(;t=K_.exec(n);)e.push(t[1]);K_.lastIndex=0}return e}function Sf(n,e,t){const i=n.toString(),r=i.replace(K_,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function k4(n){return new ft(3003,rn)}()),a=""),a.toString()});return r==i?n:r}function Tf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const bH=/-+([a-z0-9])/g;function Z_(n){return n.replace(bH,(...e)=>e[1].toUpperCase())}function xH(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function br(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function B4(n){return new ft(3004,rn)}()}}function hT(n,e){return window.getComputedStyle(n)[e]}function CH(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function DH(n,e,t){if(":"==n[0]){const l=function AH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function J4(n){return new ft(3016,rn)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Z4(n){return new ft(3015,rn)}()),e;const r=i[1],s=i[2],o=i[3];e.push(dT(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(dT(o,r))}(i,t,e)):t.push(n),t}const If=new Set(["true","1"]),Pf=new Set(["false","0"]);function dT(n,e){const t=If.has(n)||Pf.has(n),i=If.has(e)||Pf.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?If.has(n):Pf.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?If.has(e):Pf.has(e)),o&&a}}const IH=new RegExp("s*:selfs*,?","g");function J_(n,e,t,i){return new PH(n).build(e,t,i)}class PH{constructor(e){this._driver=e}build(e,t,i){const r=new NH(t);this._resetContextStyleTimingState(r);const s=br(this,Yu(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function H4(){return new ft(3006,rn)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function V4(){return new ft(3007,rn)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{if(Rf(a)){const l=a;Object.keys(l).forEach(c=>{uT(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(Tf(s.values()),t.errors.push(function z4(n,e){return new ft(3008,rn)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=br(this,Yu(e.animation),t);return{type:1,matchers:CH(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:va(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>br(this,i,t)),options:va(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=br(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:va(e.options)}}visitAnimate(e,t){const i=function FH(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Q_(Ef(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Q_(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||Ef(i,e),Q_(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:So({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=So(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==Xs?i.push(o):t.errors.push(function G4(n){return new ft(3002,rn)}()):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(Rf(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(function W4(n,e,t,i,r){return new ft(3010,rn)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),t.options&&function vH(n,e,t){const i=e.params||{},r=uT(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function F4(n){return new ft(3001,rn)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function j4(){return new ft(3011,rn)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(g=>{const m=this._makeStyleAst(g,t);let E=null!=m.offset?m.offset:function OH(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Rf(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Rf(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(m.styles),w=0;return null!=E&&(s++,w=m.offset=E),l=l||w<0||w>1,a=a||w<c,c=w,o.push(w),m});l&&t.errors.push(function $4(){return new ft(3012,rn)}()),a&&t.errors.push(function q4(){return new ft(3200,rn)}());const h=e.steps.length;let d=0;s>0&&s<h?t.errors.push(function X4(){return new ft(3202,rn)}()):0==s&&(d=1/(h-1));const f=h-1,p=t.currentTime,y=t.currentAnimateTimings,_=y.duration;return u.forEach((g,m)=>{const E=d>0?m==f?1:d*m:o[m],w=E*_;t.currentTime=p+y.delay+w,y.duration=w,this._validateStyleAst(g,t),g.offset=E,i.styles.push(g)}),i}visitReference(e,t){return{type:8,animation:br(this,Yu(e.animation),t),options:va(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:va(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:va(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function RH(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(IH,"")),n=n.replace(/@\*/g,Mf).replace(/@\w+/g,t=>Mf+"-"+t.substr(1)).replace(/:animating/g,X_),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,vr(t.collectedStyles,t.currentQuerySelector,{});const a=br(this,Yu(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:va(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Y4(){return new ft(3013,rn)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ef(e.timings,t.errors,!0);return{type:12,animation:br(this,Yu(e.animation),t),timings:i,options:null}}}class NH{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Rf(n){return!Array.isArray(n)&&"object"==typeof n}function va(n){return n?(n=Xl(n)).params&&(n.params=function LH(n){return n?Xl(n):null}(n.params)):n={},n}function Q_(n,e,t){return{duration:n,delay:e,easing:t}}function ev(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Lf{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const UH=new RegExp(":enter","g"),VH=new RegExp(":leave","g");function tv(n,e,t,i,r,s={},o={},a,l,c=[]){return(new zH).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class zH{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new Lf;const h=new nv(e,t,c,r,s,u,[]);h.options=l,h.currentTimeline.setStyles([o],null,h.errors,l),br(this,i,h);const d=h.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=d.length-1;p>=0;p--){const y=d[p];if(y.element===t){f=y;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,h.errors,l)}return d.length?d.map(f=>f.buildKeyframes()):[ev(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?ya(i.duration):null,a=null!=i.delay?ya(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),br(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Nf);const o=ya(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>br(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ya(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),br(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Ef(t.params?Sf(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?ya(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Nf);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const h=t.createSubContext(e.options,c);s&&h.delayNextStep(s),c===t.element&&(l=h.currentTimeline),br(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;br(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}}const Nf={};class nv{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Nf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Of(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=ya(i.duration)),null!=i.delay&&(r.delay=ya(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Sf(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new nv(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Nf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new GH(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(UH,"."+this._enterClassName)).replace(VH,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function K4(n){return new ft(3014,rn)}()),a}}class Of{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Of(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Xs,this._currentKeyframe[t]=Xs}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function WH(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=Xs})):Co(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=Sf(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Xs),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Co(a,!0);Object.keys(c).forEach(u=>{const h=c[u];"!"==h?e.add(u):h==Xs&&t.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?Tf(e.values()):[],o=t.size?Tf(t.values()):[];if(i){const a=r[0],l=Xl(a);a.offset=0,l.offset=1,r=[a,l]}return ev(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class GH extends Of{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Co(e[0],!1);l.offset=0,s.push(l);const c=Co(e[0],!1);c.offset=mT(a),s.push(c);const u=e.length-1;for(let h=1;h<=u;h++){let d=Co(e[h],!1);d.offset=mT((t+d.offset*i)/o),s.push(d)}i=o,t=0,r="",e=s}return ev(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function mT(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class iv{}class jH extends iv{normalizePropertyName(e,t){return Z_(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if($H[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function U4(n,e){return new ft(3005,rn)}())}return o+s}}const $H=(()=>function qH(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function gT(n,e,t,i,r,s,o,a,l,c,u,h,d){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const rv={};class yT{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function XH(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,u){const h=[],d=this.ast.options&&this.ast.options.params||rv,p=this.buildStyles(i,a&&a.params||rv,h),y=l&&l.params||rv,_=this.buildStyles(r,y,h),g=new Set,m=new Map,E=new Map,w="void"===r,T={params:Object.assign(Object.assign({},d),y)},j=u?[]:tv(e,t,this.ast.animation,s,o,p,_,T,c,h);let Q=0;if(j.forEach(xe=>{Q=Math.max(xe.duration+xe.delay,Q)}),h.length)return gT(t,this._triggerName,i,r,w,p,_,[],[],m,E,Q,h);j.forEach(xe=>{const he=xe.element,A=vr(m,he,{});xe.preStyleProps.forEach(me=>A[me]=!0);const te=vr(E,he,{});xe.postStyleProps.forEach(me=>te[me]=!0),he!==t&&g.add(he)});const ae=Tf(g.values());return gT(t,this._triggerName,i,r,w,p,_,j,ae,m,E,Q)}}class YH{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Xl(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=Sf(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class ZH{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new YH(r.style,r.options&&r.options.params||{},i)}),_T(this.states,"true","1"),_T(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new yT(e,r,this.states))}),this.fallbackTransition=function JH(n,e,t){return new yT(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function _T(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const QH=new Lf;class eV{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=J_(this._driver,t,i,[]);if(i.length)throw function iH(n){return new ft(3503,rn)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=K1(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=tv(this._driver,t,s,q_,xf,{},{},i,QH,r),o.forEach(u=>{const h=vr(a,u.element,{});u.postStyleProps.forEach(d=>h[d]=null)})):(r.push(function rH(){return new ft(3300,rn)}()),o=[]),r.length)throw function sH(n){return new ft(3504,rn)}();a.forEach((u,h)=>{Object.keys(u).forEach(d=>{u[d]=this._driver.computeStyle(h,d,Xs)})});const c=To(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,{},h)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function oH(n){return new ft(3301,rn)}();return t}listen(e,t,i,r){const s=G_(t,"","","");return V_(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const vT="ng-animate-queued",sv="ng-animate-disabled",sV=[],bT={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},oV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},kr="__ng_removed";class ov{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function uV(n){return null!=n?n:null}(i?e.value:e),i){const s=Xl(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Ku="void",av=new ov(Ku);class aV{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Br(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function aH(n,e){return new ft(3302,rn)}();if(null==i||0==i.length)throw function lH(n){return new ft(3303,rn)}();if(!function hV(n){return"start"==n||"done"==n}(i))throw function cH(n,e){return new ft(3400,rn)}();const s=vr(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=vr(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Br(e,wf),Br(e,wf+"-"+t),a[t]=av),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function uH(n){return new ft(3401,rn)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new lv(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Br(e,wf),Br(e,wf+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new ov(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=av),c.value!==Ku&&l.value===c.value){if(!function pV(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const y=[],_=s.matchStyles(l.value,l.params,y),g=s.matchStyles(c.value,c.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{_a(e,_),Es(e,g)})}return}const d=vr(this._engine.playersByElement,e,[]);d.forEach(y=>{y.namespaceId==this.id&&y.triggerName==t&&y.queued&&y.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Br(e,vT),o.onStart(()=>{Yl(e,vT)})),o.onDone(()=>{let y=this.players.indexOf(o);y>=0&&this.players.splice(y,1);const _=this._engine.playersByElement.get(e);if(_){let g=_.indexOf(o);g>=0&&_.splice(g,1)}}),this.players.push(o),d.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Mf,!0);i.forEach(r=>{if(r[kr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(e,l,Ku,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&To(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||av,u=new ov(Ku),h=new lv(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[kr];(!s||s===bT)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Br(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=G_(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,V_(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class lV{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new aV(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(i[a].hostElement,t)){i.splice(a+1,0,e),o=!0;break}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(Ff(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Ff(t))return;const s=t[kr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Br(e,sv)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Yl(e,sv))}removeNode(e,t,i,r){if(Ff(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[kr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return Ff(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Mf,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,X_,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return To(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[kr];if(i&&i.setForRemoval){if(e[kr]=bT,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(sv))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Br(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?To(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function hH(n){return new ft(3402,rn)}()}_flushAnimations(e,t){const i=new Lf,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(ne=>{u.add(ne);const ue=this.driver.query(ne,".ng-animate-queued",!0);for(let se=0;se<ue.length;se++)u.add(ue[se])});const h=this.bodyNode,d=Array.from(this.statesByElement.keys()),f=MT(d,this.collectedEnterElements),p=new Map;let y=0;f.forEach((ne,ue)=>{const se=q_+y++;p.set(ue,se),ne.forEach(we=>Br(we,se))});const _=[],g=new Set,m=new Set;for(let ne=0;ne<this.collectedLeaveElements.length;ne++){const ue=this.collectedLeaveElements[ne],se=ue[kr];se&&se.setForRemoval&&(_.push(ue),g.add(ue),se.hasAnimation?this.driver.query(ue,".ng-star-inserted",!0).forEach(we=>g.add(we)):m.add(ue))}const E=new Map,w=MT(d,Array.from(g));w.forEach((ne,ue)=>{const se=xf+y++;E.set(ue,se),ne.forEach(we=>Br(we,se))}),e.push(()=>{f.forEach((ne,ue)=>{const se=p.get(ue);ne.forEach(we=>Yl(we,se))}),w.forEach((ne,ue)=>{const se=E.get(ue);ne.forEach(we=>Yl(we,se))}),_.forEach(ne=>{this.processLeaveNode(ne)})});const T=[],j=[];for(let ne=this._namespaceList.length-1;ne>=0;ne--)this._namespaceList[ne].drainQueuedTransitions(t).forEach(se=>{const we=se.player,Fe=se.element;if(T.push(we),this.collectedEnterElements.length){const Pt=Fe[kr];if(Pt&&Pt.setForMove){if(Pt.previousTriggersValues&&Pt.previousTriggersValues.has(se.triggerName)){const It=Pt.previousTriggersValues.get(se.triggerName),at=this.statesByElement.get(se.element);at&&at[se.triggerName]&&(at[se.triggerName].value=It)}return void we.destroy()}}const We=!h||!this.driver.containsElement(h,Fe),$e=E.get(Fe),gt=p.get(Fe),vt=this._buildInstruction(se,i,gt,$e,We);if(vt.errors&&vt.errors.length)return void j.push(vt);if(We)return we.onStart(()=>_a(Fe,vt.fromStyles)),we.onDestroy(()=>Es(Fe,vt.toStyles)),void r.push(we);if(se.isFallbackTransition)return we.onStart(()=>_a(Fe,vt.fromStyles)),we.onDestroy(()=>Es(Fe,vt.toStyles)),void r.push(we);const Dt=[];vt.timelines.forEach(Pt=>{Pt.stretchStartingKeyframe=!0,this.disabledNodes.has(Pt.element)||Dt.push(Pt)}),vt.timelines=Dt,i.append(Fe,vt.timelines),o.push({instruction:vt,player:we,element:Fe}),vt.queriedElements.forEach(Pt=>vr(a,Pt,[]).push(we)),vt.preStyleProps.forEach((Pt,It)=>{const at=Object.keys(Pt);if(at.length){let ct=l.get(It);ct||l.set(It,ct=new Set),at.forEach(Xt=>ct.add(Xt))}}),vt.postStyleProps.forEach((Pt,It)=>{const at=Object.keys(Pt);let ct=c.get(It);ct||c.set(It,ct=new Set),at.forEach(Xt=>ct.add(Xt))})});if(j.length){const ne=[];j.forEach(ue=>{ne.push(function dH(n,e){return new ft(3505,rn)}())}),T.forEach(ue=>ue.destroy()),this.reportError(ne)}const Q=new Map,ae=new Map;o.forEach(ne=>{const ue=ne.element;i.has(ue)&&(ae.set(ue,ue),this._beforeAnimationBuild(ne.player.namespaceId,ne.instruction,Q))}),r.forEach(ne=>{const ue=ne.element;this._getPreviousPlayers(ue,!1,ne.namespaceId,ne.triggerName,null).forEach(we=>{vr(Q,ue,[]).push(we),we.destroy()})});const xe=_.filter(ne=>ST(ne,l,c)),he=new Map;wT(he,this.driver,m,c,Xs).forEach(ne=>{ST(ne,l,c)&&xe.push(ne)});const te=new Map;f.forEach((ne,ue)=>{wT(te,this.driver,new Set(ne),l,"!")}),xe.forEach(ne=>{const ue=he.get(ne),se=te.get(ne);he.set(ne,Object.assign(Object.assign({},ue),se))});const me=[],ve=[],Me={};o.forEach(ne=>{const{element:ue,player:se,instruction:we}=ne;if(i.has(ue)){if(u.has(ue))return se.onDestroy(()=>Es(ue,we.toStyles)),se.disabled=!0,se.overrideTotalTime(we.totalTime),void r.push(se);let Fe=Me;if(ae.size>1){let $e=ue;const gt=[];for(;$e=$e.parentNode;){const vt=ae.get($e);if(vt){Fe=vt;break}gt.push($e)}gt.forEach(vt=>ae.set(vt,Fe))}const We=this._buildAnimation(se.namespaceId,we,Q,s,te,he);if(se.setRealPlayer(We),Fe===Me)me.push(se);else{const $e=this.playersByElement.get(Fe);$e&&$e.length&&(se.parentPlayer=To($e)),r.push(se)}}else _a(ue,we.fromStyles),se.onDestroy(()=>Es(ue,we.toStyles)),ve.push(se),u.has(ue)&&r.push(se)}),ve.forEach(ne=>{const ue=s.get(ne.element);if(ue&&ue.length){const se=To(ue);ne.setRealPlayer(se)}}),r.forEach(ne=>{ne.parentPlayer?ne.syncPlayerEvents(ne.parentPlayer):ne.destroy()});for(let ne=0;ne<_.length;ne++){const ue=_[ne],se=ue[kr];if(Yl(ue,xf),se&&se.hasAnimation)continue;let we=[];if(a.size){let We=a.get(ue);We&&We.length&&we.push(...We);let $e=this.driver.query(ue,X_,!0);for(let gt=0;gt<$e.length;gt++){let vt=a.get($e[gt]);vt&&vt.length&&we.push(...vt)}}const Fe=we.filter(We=>!We.destroyed);Fe.length?dV(this,ue,Fe):this.processLeaveNode(ue)}return _.length=0,me.forEach(ne=>{this.players.push(ne),ne.onDone(()=>{ne.destroy();const ue=this.players.indexOf(ne);this.players.splice(ue,1)}),ne.play()}),me}elementContainsData(e,t){let i=!1;const r=t[kr];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Ku;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,h=vr(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),h.push(f)})}_a(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,d=t.timelines.map(p=>{const y=p.element;u.add(y);const _=y[kr];if(_&&_.removedBeforeQueried)return new Xu(p.duration,p.delay);const g=y!==l,m=function fV(n){const e=[];return ET(n,e),e}((i.get(y)||sV).map(Q=>Q.getRealPlayer())).filter(Q=>!!Q.element&&Q.element===y),E=s.get(y),w=o.get(y),T=K1(0,this._normalizer,0,p.keyframes,E,w),j=this._buildPlayer(p,T,m);if(p.subTimeline&&r&&h.add(y),g){const Q=new lv(e,a,y);Q.setRealPlayer(j),c.push(Q)}return j});c.forEach(p=>{vr(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function cV(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Br(p,oT));const f=To(d);return f.onDestroy(()=>{u.forEach(p=>Yl(p,oT)),Es(l,t.toStyles)}),h.forEach(p=>{vr(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Xu(e.duration,e.delay)}}class lv{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Xu,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>V_(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){vr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Ff(n){return n&&1===n.nodeType}function xT(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function wT(n,e,t,i,r){const s=[];t.forEach(l=>s.push(xT(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(h=>{const d=u[h]=e.computeStyle(c,h,r);(!d||0==d.length)&&(c[kr]=oV,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>xT(l,s[a++])),o}function MT(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Br(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Yl(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function dV(n,e,t){To(t).onDone(()=>n.processLeaveNode(e))}function ET(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof X1?ET(i.players,e):e.push(i)}}function ST(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class kf{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new lV(e,t,i),this._timelineEngine=new eV(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=J_(this._driver,s,l,[]);if(l.length)throw function tH(n,e){return new ft(3404,rn)}();a=function KH(n,e,t){return new ZH(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=Z1(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=Z1(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let gV=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Es(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Es(this._element,this._initialStyles),this._endStyles&&(Es(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(_a(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_a(this._element,this._endStyles),this._endStyles=null),Es(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cv(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];yV(r)&&(e=e||{},e[r]=n[r])}return e}function yV(n){return"display"===n||"position"===n}class TT{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:hT(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class _V{validateStyleProperty(e){return tT(e)}matchesElement(e,t){return!1}containsElement(e,t){return nT(e,t)}getParentElement(e){return j_(e)}query(e,t,i){return iT(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(d=>d instanceof TT);(function wH(n,e){return 0===n||0===e})(i,r)&&u.forEach(d=>{let f=d.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),t=function MH(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=hT(n,l)})}}return e}(e,t=t.map(d=>Co(d,!1)),c);const h=function mV(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=cv(e[0]),e.length>1&&(i=cv(e[e.length-1]))):e&&(t=cv(e)),t||i?new gV(n,t,i):null}(e,t);return new TT(e,t,l,h)}}let vV=(()=>{class n extends j1{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:qr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?$1(t):t;return CT(this._renderer,null,i,"register",[r]),new bV(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Ie(Fu),Ie(yn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class bV extends class L4{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new xV(this._id,e,t||{},this._renderer)}}class xV{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return CT(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function CT(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const DT="@.disabled";let wV=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new AT("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new MV(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Ie(Fu),Ie(kf),Ie(gn))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class AT{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==DT?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class MV extends AT{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==DT?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function EV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function SV(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let TV=(()=>{class n extends kf{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Ie(yn),Ie($_),Ie(iv))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const Ys=new xt("AnimationModuleType"),IT=[{provide:j1,useClass:vV},{provide:iv,useFactory:function CV(){return new jH}},{provide:kf,useClass:TV},{provide:Fu,useFactory:function DV(n,e,t){return new wV(n,e,t)},deps:[vf,kf,gn]}],PT=[{provide:$_,useFactory:()=>new _V},{provide:Ys,useValue:"BrowserAnimations"},...IT],AV=[{provide:$_,useClass:rT},{provide:Ys,useValue:"NoopAnimations"},...IT];let IV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?AV:PT}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({providers:PT,imports:[z1]}),n})();function Ot(...n){let e=n[n.length-1];return Je(e)?(n.pop(),de(n,e)):hi(n)}class Ur extends pe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new L;return this._value}next(e){super.next(this._value=e)}}class PV extends P{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class RV extends P{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function LV(n,e,t,i,r=new RV(n,t,i)){if(!r.closed)return e instanceof x?e.subscribe(r):N(e)(r)}const RT={};class OV{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new FV(e,this.resultSelector))}}class FV extends PV{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(RT),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(LV(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===RT?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function Uf(n,e){return new x(e?t=>e.schedule(kV,0,{error:n,subscriber:t}):t=>t.error(n))}function kV({error:n,subscriber:e}){e.error(n)}const Hf=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function uv(...n){return function BV(){return mn(1)}()(Ot(...n))}const ba=new x(n=>n.complete());function hv(n){return n?function UV(n){return new x(e=>n.schedule(()=>e.complete()))}(n):ba}function LT(n){return new x(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?An(t):hv()).subscribe(e)})}function Do(n,e){return"function"==typeof e?t=>t.pipe(Do((i,r)=>An(n(i,r)).pipe(nt((s,o)=>e(i,s,r,o))))):t=>t.lift(new HV(n))}class HV{constructor(e){this.project=e}call(e,t){return t.subscribe(new VV(e,this.project))}}class VV extends b{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new R(this),r=this.destination;r.add(i),this.innerSubscription=fe(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const NT=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Zu(n){return e=>0===n?hv():e.lift(new zV(n))}class zV{constructor(e){if(this.total=e,this.total<0)throw new NT}call(e,t){return t.subscribe(new GV(e,this.total))}}class GV extends P{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function Vf(...n){const e=n[n.length-1];return Je(e)?(n.pop(),t=>uv(n,t,e)):t=>uv(n,t)}function OT(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new WV(n,e,t))}}class WV{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new jV(e,this.accumulator,this.seed,this.hasSeed))}}class jV extends P{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function Hr(n,e){return function(i){return i.lift(new $V(n,e))}}class $V{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new qV(e,this.predicate,this.thisArg))}}class qV extends P{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function xa(n){return function(t){const i=new XV(n),r=t.lift(i);return i.caught=r}}class XV{constructor(e){this.selector=e}call(e,t){return t.subscribe(new YV(e,this.selector,this.caught))}}class YV extends b{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new R(this);this.add(i);const r=fe(t,i);r!==i&&this.add(r)}}}function Kl(n,e){return Ce(n,e,1)}function dv(n){return function(t){return 0===n?hv():t.lift(new KV(n))}}class KV{constructor(e){if(this.total=e,this.total<0)throw new NT}call(e,t){return t.subscribe(new ZV(e,this.total))}}class ZV extends P{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}function FT(n=e5){return e=>e.lift(new JV(n))}class JV{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new QV(e,this.errorFactory))}}class QV extends P{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function e5(){return new Hf}function kT(n=null){return e=>e.lift(new t5(n))}class t5{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new n5(e,this.defaultValue))}}class n5 extends P{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Zl(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Hr((r,s)=>n(r,s,i)):Y,Zu(1),t?kT(e):FT(()=>new Hf))}function Ao(){}function ar(n,e,t){return function(r){return r.lift(new r5(n,e,t))}}class r5{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new s5(e,this.nextOrObserver,this.error,this.complete))}}class s5 extends P{constructor(e,t,i,r){super(e),this._tapNext=Ao,this._tapError=Ao,this._tapComplete=Ao,this._tapError=i||Ao,this._tapComplete=r||Ao,I(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Ao,this._tapError=t.error||Ao,this._tapComplete=t.complete||Ao)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class a5{constructor(e){this.callback=e}call(e,t){return t.subscribe(new l5(e,this.callback))}}class l5 extends P{constructor(e,t){super(e),this.add(new ee(t))}}class Ks{constructor(e,t){this.id=e,this.url=t}}class fv extends Ks{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ju extends Ks{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class BT extends Ks{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class c5 extends Ks{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class u5 extends Ks{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h5 extends Ks{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d5 extends Ks{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class f5 extends Ks{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p5 extends Ks{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UT{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class HT{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class m5{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g5{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y5{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _5{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VT{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jt="primary";class v5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Jl(n){return new v5(n)}const zT="ngNavigationCancelingError";function pv(n){const e=Error("NavigationCancelingError: "+n);return e[zT]=!0,e}function x5(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ss(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!GT(n[r],e[r]))return!1;return!0}function GT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function WT(n){return Array.prototype.concat.apply([],n)}function jT(n){return n.length>0?n[n.length-1]:null}function Ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ts(n){return FM(n)?n:Bd(n)?An(Promise.resolve(n)):Ot(n)}const E5={exact:function XT(n,e,t){if(!Ma(n.segments,e.segments)||!zf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!XT(n.children[i],e.children[i],t))return!1;return!0},subset:YT},$T={exact:function S5(n,e){return Ss(n,e)},subset:function T5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>GT(n[t],e[t]))},ignored:()=>!0};function qT(n,e,t){return E5[t.paths](n.root,e.root,t.matrixParams)&&$T[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function YT(n,e,t){return KT(n,e,e.segments,t)}function KT(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Ma(r,t)||e.hasChildren()||!zf(r,t,i))}if(n.segments.length===t.length){if(!Ma(n.segments,t)||!zf(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!YT(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ma(n.segments,r)&&zf(n.segments,r,i)&&n.children[Jt])&&KT(n.children[Jt],e,s,i)}}function zf(n,e,t){return e.every((i,r)=>$T[t](n[r].parameters,i.parameters))}class wa{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jl(this.queryParams)),this._queryParamMap}toString(){return A5.serialize(this)}}class sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ri(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gf(this)}}class Qu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Jl(this.parameters)),this._parameterMap}toString(){return tC(this)}}function Ma(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class ZT{}class JT{parse(e){const t=new B5(e);return new wa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${eh(e.root,!0)}`,i=function R5(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Wf(t)}=${Wf(r)}`).join("&"):`${Wf(t)}=${Wf(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function I5(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const A5=new JT;function Gf(n){return n.segments.map(e=>tC(e)).join("/")}function eh(n,e){if(!n.hasChildren())return Gf(n);if(e){const t=n.children[Jt]?eh(n.children[Jt],!1):"",i=[];return Ri(n.children,(r,s)=>{s!==Jt&&i.push(`${s}:${eh(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function D5(n,e){let t=[];return Ri(n.children,(i,r)=>{r===Jt&&(t=t.concat(e(i,r)))}),Ri(n.children,(i,r)=>{r!==Jt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Jt?[eh(n.children[Jt],!1)]:[`${r}:${eh(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${Gf(n)}/${t[0]}`:`${Gf(n)}/(${t.join("//")})`}}function QT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wf(n){return QT(n).replace(/%3B/gi,";")}function mv(n){return QT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jf(n){return decodeURIComponent(n)}function eC(n){return jf(n.replace(/\+/g,"%20"))}function tC(n){return`${mv(n.path)}${function P5(n){return Object.keys(n).map(e=>`;${mv(e)}=${mv(n[e])}`).join("")}(n.parameters)}`}const L5=/^[^\/()?;=#]+/;function $f(n){const e=n.match(L5);return e?e[0]:""}const N5=/^[^=?&#]+/,F5=/^[^&#]+/;class B5{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Jt]=new sn(e,t)),i}parseSegment(){const e=$f(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Qu(jf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=$f(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=$f(this.remaining);r&&(i=r,this.capture(i))}e[jf(t)]=jf(i)}parseQueryParam(e){const t=function O5(n){const e=n.match(N5);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function k5(n){const e=n.match(F5);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=eC(t),s=eC(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=$f(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Jt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Jt]:new sn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class nC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=gv(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=gv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return yv(e,this._root).map(t=>t.value)}}function gv(n,e){if(n===e.value)return e;for(const t of e.children){const i=gv(n,t);if(i)return i}return null}function yv(n,e){if(n===e.value)return[e];for(const t of e.children){const i=yv(n,t);if(i.length)return i.unshift(e),i}return[]}class Zs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ql(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class iC extends nC{constructor(e,t){super(e),this.snapshot=t,_v(this,e)}toString(){return this.snapshot.toString()}}function rC(n,e){const t=function U5(n,e){const o=new qf([],{},{},"",{},Jt,e,null,n.root,-1,{});return new oC("",new Zs(o,[]))}(n,e),i=new Ur([new Qu("",{})]),r=new Ur({}),s=new Ur({}),o=new Ur({}),a=new Ur(""),l=new ec(i,r,o,a,s,Jt,e,t.root);return l.snapshot=t.root,new iC(new Zs(l,[]),t)}class ec{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(nt(e=>Jl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(nt(e=>Jl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sC(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function H5(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class qf{constructor(e,t,i,r,s,o,a,l,c,u,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oC extends nC{constructor(e,t){super(t),this.url=e,_v(this,t)}toString(){return aC(this._root)}}function _v(n,e){e.value._routerState=n,e.children.forEach(t=>_v(n,t))}function aC(n){const e=n.children.length>0?` { ${n.children.map(aC).join(", ")} } `:"";return`${n.value}${e}`}function vv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ss(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ss(e.params,t.params)||n.params.next(t.params),function w5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ss(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ss(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function bv(n,e){const t=Ss(n.params,e.params)&&function C5(n,e){return Ma(n,e)&&n.every((t,i)=>Ss(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||bv(n.parent,e.parent))}function th(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function z5(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return th(n,i,r);return th(n,i)})}(n,e,t);return new Zs(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>th(n,a)),o}}const i=function G5(n){return new ec(new Ur(n.url),new Ur(n.params),new Ur(n.queryParams),new Ur(n.fragment),new Ur(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>th(n,s));return new Zs(i,r)}}function Xf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function nh(n){return"object"==typeof n&&null!=n&&n.outlets}function xv(n,e,t,i,r){let s={};return i&&Ri(i,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new wa(t.root===n?e:lC(t.root,n,e),s,r)}function lC(n,e,t){const i={};return Ri(n.children,(r,s)=>{i[s]=r===e?t:lC(r,e,t)}),new sn(n.segments,i)}class cC{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Xf(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(nh);if(r&&r!==jT(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wv{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function uC(n,e,t){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return Yf(n,e,t);const i=function Y5(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(nh(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!dC(l,c,o))return s;i+=2}else{if(!dC(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new sn(n.segments.slice(0,i.pathIndex),{});return s.children[Jt]=new sn(n.segments.slice(i.pathIndex),n.children),Yf(s,0,r)}return i.match&&0===r.length?new sn(n.segments,{}):i.match&&!n.hasChildren()?Mv(n,e,t):i.match?Yf(n,0,r):Mv(n,e,t)}function Yf(n,e,t){if(0===t.length)return new sn(n.segments,{});{const i=function X5(n){return nh(n[0])?n[0].outlets:{[Jt]:n}}(t),r={};return Ri(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=uC(n.children[o],e,s))}),Ri(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new sn(n.segments,r)}}function Mv(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(nh(s)){const l=K5(s.outlets);return new sn(i,l)}if(0===r&&Xf(t[0])){i.push(new Qu(n.segments[e].path,hC(t[0]))),r++;continue}const o=nh(s)?s.outlets[Jt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Xf(a)?(i.push(new Qu(o,hC(a))),r+=2):(i.push(new Qu(o,{})),r++)}return new sn(i,{})}function K5(n){const e={};return Ri(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Mv(new sn([],{}),0,t))}),e}function hC(n){const e={};return Ri(n,(t,i)=>e[i]=`${t}`),e}function dC(n,e,t){return n==t.path&&Ss(e,t.parameters)}class J5{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),vv(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ql(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Ri(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ql(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ql(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ql(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new _5(s.value.snapshot))}),e.children.length&&this.forwardEvent(new g5(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(vv(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),vv(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function Q5(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class Ev{constructor(e,t){this.routes=e,this.module=t}}function Io(n){return"function"==typeof n}function Ea(n){return n instanceof wa}const ih=Symbol("INITIAL_VALUE");function rh(){return Do(n=>function NV(...n){let e,t;return Je(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&J(n[0])&&(n=n[0]),hi(n,t).lift(new OV(e))}(n.map(e=>e.pipe(Zu(1),Vf(ih)))).pipe(OT((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==ih?r:(s===ih&&(i=!0),i||!1!==s&&o!==t.length-1&&!Ea(s)?r:s),e)},ih),Hr(e=>e!==ih),nt(e=>Ea(e)?e:!0===e),Zu(1)))}class s8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new sh,this.attachRef=null}}class sh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new s8,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Sv=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Rn,this.deactivateEvents=new Rn,this.attachEvents=new Rn,this.detachEvents=new Rn,this.name=s||Jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new o8(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(Pe(sh),Pe(sr),Pe(Hl),ul("name"),Pe(wo))},n.\u0275dir=St({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class o8{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ec?this.route:e===sh?this.childContexts:this.parent.get(e,t)}}let fC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&wn(0,"router-outlet")},directives:[Sv],encapsulation:2}),n})();function pC(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];a8(i,l8(e,i))}}function a8(n,e){n.children&&pC(n.children,e)}function l8(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Tv(n){const e=n.children&&n.children.map(Tv),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=fC),t}function Vr(n){return n.outlet||Jt}function mC(n,e){const t=n.filter(i=>Vr(i)===e);return t.push(...n.filter(i=>Vr(i)!==e)),t}const gC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kf(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},gC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||x5)(t,n,e);if(!s)return Object.assign({},gC);const o={};Ri(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function Zf(n,e,t,i,r="corrected"){if(t.length>0&&function h8(n,e,t){return t.some(i=>Jf(n,e,i)&&Vr(i)!==Jt)}(n,t,i)){const o=new sn(e,function u8(n,e,t,i){const r={};r[Jt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Vr(s)!==Jt){const o=new sn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Vr(s)]=o}return r}(n,e,i,new sn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function d8(n,e,t){return t.some(i=>Jf(n,e,i))}(n,t,i)){const o=new sn(n.segments,function c8(n,e,t,i,r,s){const o={};for(const a of i)if(Jf(n,t,a)&&!r[Vr(a)]){const l=new sn([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Vr(a)]=l}return Object.assign(Object.assign({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new sn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Jf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function yC(n,e,t,i){return!!(Vr(n)===i||i!==Jt&&Jf(e,t,n))&&("**"===n.path||Kf(e,n,t).matched)}function _C(n,e,t){return 0===e.length&&!n.children[t]}class oh{constructor(e){this.segmentGroup=e||null}}class vC{constructor(e){this.urlTree=e}}function Qf(n){return Uf(new oh(n))}function bC(n){return Uf(new vC(n))}function f8(n){return Uf(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class g8{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Ws)}apply(){const e=Zf(this.urlTree.root,[],[],this.config).segmentGroup,t=new sn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Jt).pipe(nt(s=>this.createUrlTree(Cv(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xa(s=>{if(s instanceof vC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof oh?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Jt).pipe(nt(r=>this.createUrlTree(Cv(r),e.queryParams,e.fragment))).pipe(xa(r=>{throw r instanceof oh?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new sn([],{[Jt]:e}):e;return new wa(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(nt(s=>new sn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return An(r).pipe(Kl(s=>{const o=i.children[s],a=mC(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(nt(l=>({segment:l,outlet:s})))}),OT((s,o)=>(s[o.outlet]=o.segment,s),{}),function i5(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Hr((r,s)=>n(r,s,i)):Y,dv(1),t?kT(e):FT(()=>new Hf))}())}expandSegment(e,t,i,r,s,o){return An(i).pipe(Kl(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(xa(c=>{if(c instanceof oh)return Ot(null);throw c}))),Zl(a=>!!a),xa((a,l)=>{if(a instanceof Hf||"EmptyError"===a.name){if(_C(t,r,s))return Ot(new sn([],{}));throw new oh(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return yC(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Qf(t):Qf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?bC(s):this.lineralizeSegments(i,s).pipe(Ce(o=>{const a=new sn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Kf(t,r,s);if(!a)return Qf(t);const h=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?bC(h):this.lineralizeSegments(r,h).pipe(Ce(d=>this.expandSegment(e,t,i,d.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Ot(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(nt(h=>(i._loadedConfig=h,new sn(r,{})))):Ot(new sn(r,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=Kf(t,i,r);return o?this.getChildConfig(e,i,r).pipe(Ce(u=>{const h=u.module,d=u.routes,{segmentGroup:f,slicedSegments:p}=Zf(t,a,l,d),y=new sn(f.segments,f.children);if(0===p.length&&y.hasChildren())return this.expandChildren(h,d,y).pipe(nt(E=>new sn(a,E)));if(0===d.length&&0===p.length)return Ot(new sn(a,{}));const _=Vr(i)===s;return this.expandSegment(h,y,d,p,_?Jt:s,!0).pipe(nt(m=>new sn(a.concat(m.segments),m.children)))})):Qf(t)}getChildConfig(e,t,i){return t.children?Ot(new Ev(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ot(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(Ce(r=>r?this.configLoader.load(e.injector,t).pipe(nt(s=>(t._loadedConfig=s,s))):function p8(n){return Uf(pv(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Ot(new Ev([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return Ot(!0);const s=r.map(o=>{const a=e.get(o);let l;if(function t8(n){return n&&Io(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!Io(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return Ts(l)});return Ot(s).pipe(rh(),ar(o=>{if(!Ea(o))return;const a=pv(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),nt(o=>!0===o))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ot(i);if(r.numberOfChildren>1||!r.children[Jt])return f8(e.redirectTo);r=r.children[Jt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new wa(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Ri(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Ri(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new sn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function Cv(n){const e={};for(const i of Object.keys(n.children)){const s=Cv(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function y8(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new sn(n.segments.concat(e.segments),e.children)}return n}(new sn(n.segments,e))}class xC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ep{constructor(e,t){this.component=e,this.route=t}}function v8(n,e,t){const i=n._root;return ah(i,e?e._root:null,t,[i.value])}function tp(n,e,t){const i=function x8(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function ah(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ql(e);return n.children.forEach(o=>{(function w8(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function M8(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ma(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ma(n.url,e.url)||!Ss(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bv(n,e)||!Ss(n.queryParams,e.queryParams);default:return!bv(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new xC(i)):(s.data=o.data,s._resolvedData=o._resolvedData),ah(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ep(a.outlet.component,o))}else o&&lh(e,a,r),r.canActivateChecks.push(new xC(i)),ah(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Ri(s,(o,a)=>lh(o,t.getContext(a),r)),r}function lh(n,e,t){const i=Ql(n),r=n.value;Ri(i,(s,o)=>{lh(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new ep(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class R8{}function wC(n){return new x(e=>e.error(n))}class N8{constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Zf(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Jt);if(null===t)return null;const i=new qf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Zs(i,t),s=new oC(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=sC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=mC(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=MC(i);return function O8(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return _C(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!yC(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const f=i.length>0?jT(i).parameters:{};s=new qf(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,TC(e),Vr(e),e.component,e,EC(t),SC(t)+i.length,CC(e))}else{const f=Kf(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new qf(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,TC(e),Vr(e),e.component,e,EC(t),SC(t)+o.length,CC(e))}const l=function F8(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=Zf(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new Zs(s,f)]}if(0===l.length&&0===u.length)return[new Zs(s,[])];const h=Vr(e)===r,d=this.processSegment(l,c,u,h?Jt:r);return null===d?null:[new Zs(s,d)]}}function k8(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function MC(n){const e=[],t=new Set;for(const i of n){if(!k8(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=MC(i.children);e.push(new Zs(i.value,r))}return e.filter(i=>!t.has(i))}function EC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function SC(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function TC(n){return n.data||{}}function CC(n){return n.resolve||{}}function DC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Dv(n){return Do(e=>{const t=n(e);return t?An(t).pipe(nt(()=>e)):Ot(e)})}class j8 extends class W8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Av=new xt("ROUTES");class AC{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new Ev(WT(o.injector.get(Av,void 0,Nt.Self|Nt.Optional)).map(Tv),o)}),xa(s=>{throw t._loader$=void 0,s}));return t._loader$=new Ib(r,()=>new pe).pipe(uo()),t._loader$}loadModuleFactory(e){return Ts(e()).pipe(Ce(t=>t instanceof nS?Ot(t):An(this.compiler.compileModuleAsync(t))))}}class q8{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function X8(n){throw n}function Y8(n,e,t){return e.parse("/")}function IC(n,e){return Ot(null)}const K8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xr=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pe,this.errorHandler=X8,this.malformedUriErrorHandler=Y8,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:IC,afterPreactivation:IC},this.urlHandlingStrategy=new q8,this.routeReuseStrategy=new j8,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Ws),this.console=o.get(BS);const h=o.get(gn);this.isNgZoneEnabled=h instanceof gn&&gn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function M5(){return new wa(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new AC(o,a,d=>this.triggerEvent(new UT(d)),d=>this.triggerEvent(new HT(d))),this.routerState=rC(this.currentUrlTree,this.rootComponentType),this.transitions=new Ur({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(Hr(r=>0!==r.id),nt(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Do(r=>{let s=!1,o=!1;return Ot(r).pipe(ar(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Do(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return np(a.source)&&(this.browserUrlTree=a.extractedUrl),Ot(a).pipe(Do(h=>{const d=this.transitions.getValue();return i.next(new fv(h.id,this.serializeUrl(h.extractedUrl),h.source,h.restoredState)),d!==this.transitions.getValue()?ba:Promise.resolve(h)}),function _8(n,e,t,i){return Do(r=>function m8(n,e,t,i,r){return new g8(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(nt(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ar(h=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:h.urlAfterRedirects})}),function B8(n,e,t,i,r){return Ce(s=>function L8(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new N8(n,e,t,i,r,s).recognize();return null===o?wC(new R8):Ot(o)}catch(o){return wC(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(nt(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,h=>this.serializeUrl(h),this.paramsInheritanceStrategy,this.relativeLinkResolution),ar(h=>{if("eager"===this.urlUpdateStrategy){if(!h.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl);this.setBrowserUrl(f,h)}this.browserUrlTree=h.urlAfterRedirects}const d=new u5(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);i.next(d)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:d,extractedUrl:f,source:p,restoredState:y,extras:_}=a,g=new fv(d,this.serializeUrl(f),p,y);i.next(g);const m=rC(f,this.rootComponentType).snapshot;return Ot(Object.assign(Object.assign({},a),{targetSnapshot:m,urlAfterRedirects:f,extras:Object.assign(Object.assign({},_),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),ba}),Dv(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:h,extras:{skipLocationChange:d,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:h,skipLocationChange:!!d,replaceUrl:!!f})}),ar(a=>{const l=new h5(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),nt(a=>Object.assign(Object.assign({},a),{guards:v8(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function E8(n,e){return Ce(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ot(Object.assign(Object.assign({},t),{guardsResult:!0})):function S8(n,e,t,i){return An(n).pipe(Ce(r=>function P8(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ot(s.map(a=>{const l=tp(a,e,r);let c;if(function r8(n){return n&&Io(n.canDeactivate)}(l))c=Ts(l.canDeactivate(n,e,t,i));else{if(!Io(l))throw new Error("Invalid CanDeactivate guard");c=Ts(l(n,e,t,i))}return c.pipe(Zl())})).pipe(rh()):Ot(!0)}(r.component,r.route,t,e,i)),Zl(r=>!0!==r,!0))}(o,i,r,n).pipe(Ce(a=>a&&function e8(n){return"boolean"==typeof n}(a)?function T8(n,e,t,i){return An(e).pipe(Kl(r=>uv(function D8(n,e){return null!==n&&e&&e(new m5(n)),Ot(!0)}(r.route.parent,i),function C8(n,e){return null!==n&&e&&e(new y5(n)),Ot(!0)}(r.route,i),function I8(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function b8(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>LT(()=>Ot(o.guards.map(l=>{const c=tp(l,o.node,t);let u;if(function i8(n){return n&&Io(n.canActivateChild)}(c))u=Ts(c.canActivateChild(i,n));else{if(!Io(c))throw new Error("Invalid CanActivateChild guard");u=Ts(c(i,n))}return u.pipe(Zl())})).pipe(rh())));return Ot(s).pipe(rh())}(n,r.path,t),function A8(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ot(!0);const r=i.map(s=>LT(()=>{const o=tp(s,e,t);let a;if(function n8(n){return n&&Io(n.canActivate)}(o))a=Ts(o.canActivate(e,n));else{if(!Io(o))throw new Error("Invalid CanActivate guard");a=Ts(o(e,n))}return a.pipe(Zl())}));return Ot(r).pipe(rh())}(n,r.route,t))),Zl(r=>!0!==r,!0))}(i,s,n,e):Ot(a)),nt(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),ar(a=>{if(Ea(a.guardsResult)){const c=pv(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new d5(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Hr(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),Dv(a=>{if(a.guards.canActivateChecks.length)return Ot(a).pipe(ar(l=>{const c=new f5(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Do(l=>{let c=!1;return Ot(l).pipe(function U8(n,e){return Ce(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ot(t);let s=0;return An(r).pipe(Kl(o=>function H8(n,e,t,i){return function V8(n,e,t,i){const r=DC(n);if(0===r.length)return Ot({});const s={};return An(r).pipe(Ce(o=>function z8(n,e,t,i){const r=tp(n,e,i);return Ts(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(ar(a=>{s[o]=a}))),dv(1),Ce(()=>DC(s).length===r.length?Ot(s):ba))}(n._resolve,n,e,i).pipe(nt(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),sC(n,t).resolve),null)))}(o.route,i,n,e)),ar(()=>s++),dv(1),Ce(o=>s===r.length?Ot(t):ba))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ar({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),ar(l=>{const c=new p5(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Dv(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:h,extras:{skipLocationChange:d,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:h,skipLocationChange:!!d,replaceUrl:!!f})}),nt(a=>{const l=function V5(n,e,t){const i=th(n,e._root,t?t._root:void 0);return new iC(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),ar(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>nt(i=>(new J5(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),ar({next(){s=!0},complete(){s=!0}}),function o5(n){return e=>e.lift(new a5(n))}(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),xa(a=>{if(o=!0,function b5(n){return n&&n[zT]}(a)){const l=Ea(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new BT(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),h={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||np(r.source)};this.scheduleNavigation(u,"imperative",null,h,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new c5(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return ba}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){pC(t),this.config=t.map(Tv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let h=null;switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}return null!==h&&(h=this.removeEmptyProps(h)),function W5(n,e,t,i,r){if(0===t.length)return xv(e.root,e.root,e,i,r);const s=function j5(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cC(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ri(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new cC(t,e,i)}(t);if(s.toRoot())return xv(e.root,new sn([],{}),e,i,r);const o=function $5(n,e,t){if(n.isAbsolute)return new wv(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new wv(s,s===e.root,0)}const i=Xf(n.commands[0])?0:1;return function q5(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new wv(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Yf(o.segmentGroup,o.index,s.commands):uC(o.segmentGroup,o.index,s.commands);return xv(o.segmentGroup,a,e,i,r)}(c,this.currentUrlTree,t,h,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ea(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function J8(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},K8):!1===i?Object.assign({},Z8):i,Ea(t))return qT(this.currentUrlTree,t,r);const s=this.parseUrl(t);return qT(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ju(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var a,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,h=np(i)&&u&&!np(u.source),d=u.rawUrl.toString()===t.toString(),f=u.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(h&&d&&f)return Promise.resolve(!0);let y,_,g;o?(y=o.resolve,_=o.reject,g=o.promise):g=new Promise((w,T)=>{y=w,_=T});const m=++this.navigationId;let E;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),E=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):E=0,this.setTransition({id:m,targetPageId:E,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:_,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(w=>Promise.reject(w))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new BT(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Sy()},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();function np(n){return"imperative"!==n}let ip=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new pe,this.subscription=t.events.subscribe(s=>{s instanceof Ju&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,o){if(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:tc(this.skipLocationChange),replaceUrl:tc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:tc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(Pe(xr),Pe(ec),Pe(ql))},n.\u0275dir=St({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&rr("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Rr("target",i.target)("href",i.href,aa)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ps]}),n})();function tc(n){return""===n||!!n}class PC{}class RC{preload(e,t){return Ot(null)}}let LC=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new AC(r,i,l=>t.triggerEvent(new UT(l)),l=>t.triggerEvent(new HT(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Hr(t=>t instanceof Ju),Kl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Ws);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return An(r).pipe(mn(),nt(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Ot(i._loadedConfig):this.loader.load(t.injector,i)).pipe(Ce(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(Ie(xr),Ie(US),Ie(Xi),Ie(PC))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),Pv=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ju&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof VT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new VT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Sy()},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const Sa=new xt("ROUTER_CONFIGURATION"),NC=new xt("ROUTER_FORROOT_GUARD"),nz=[g_,{provide:ZT,useClass:JT},{provide:xr,useFactory:function az(n,e,t,i,r,s,o={},a,l){const c=new xr(null,n,e,t,i,r,WT(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function lz(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var h,d;null===(h=console.group)||void 0===h||h.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(d=console.groupEnd)||void 0===d||d.call(console)}),c},deps:[ZT,sh,g_,Xi,US,Av,Sa,[class $8{},new _o],[class G8{},new _o]]},sh,{provide:ec,useFactory:function cz(n){return n.routerState.root},deps:[xr]},LC,RC,class tz{preload(e,t){return t().pipe(xa(()=>Ot(null)))}},{provide:Sa,useValue:{enableTracing:!1}}];function iz(){return new WS("Router",xr)}let OC=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[nz,FC(t),{provide:NC,useFactory:oz,deps:[[xr,new _o,new mu]]},{provide:Sa,useValue:i||{}},{provide:ql,useFactory:sz,deps:[ma,[new bd(m_),new _o],Sa]},{provide:Pv,useFactory:rz,deps:[xr,KU,Sa]},{provide:PC,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:RC},{provide:WS,multi:!0,useFactory:iz},[Rv,{provide:e_,multi:!0,useFactory:uz,deps:[Rv]},{provide:kC,useFactory:hz,deps:[Rv]},{provide:kS,multi:!0,useExisting:kC}]]}}static forChild(t){return{ngModule:n,providers:[FC(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Ie(NC,8),Ie(xr,8))},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({}),n})();function rz(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Pv(n,e,t)}function sz(n,e,t={}){return t.useHash?new NB(n,e):new u1(n,e)}function oz(n){return"guarded"}function FC(n){return[{provide:_2,multi:!0,useValue:n},{provide:Av,multi:!0,useValue:n}]}let Rv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new pe}appInitializer(){return this.injector.get(PB,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(xr),o=this.injector.get(Sa);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ot(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Sa),r=this.injector.get(LC),s=this.injector.get(Pv),o=this.injector.get(xr),a=this.injector.get(l_);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(Ie(Xi))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();function uz(n){return n.appInitializer.bind(n)}function hz(n){return n.bootstrapListener.bind(n)}const kC=new xt("Router Initializer");let fz=(()=>{class n{constructor(){this.encryptedMessage="",this.decryptedMessage="",this.numbers=""}ngOnInit(){this.encrypt(),Ot("1","2","3").pipe(nt(t=>" next number: "+t)).subscribe(t=>{this.numbers=t,console.log(this.numbers)})}encrypt(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-premier-league"]],decls:4,vars:1,template:function(t,i){1&t&&(De(0,"p"),Ye(1,"premier-league works!"),Ae(),De(2,"div"),Ye(3),Ae()),2&t&&(qt(3),Pu(i.numbers))},styles:[""]}),n})();function os(n){return null!=n&&"false"!=`${n}`}function ch(n,e=0){return function pz(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function nc(n){return n instanceof Kn?n.nativeElement:n}let BC=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({factory:function(){return new n},token:n,providedIn:"root"}),n})(),mz=0;const Lv=new xt("CdkAccordion");let gz=(()=>{class n{constructor(){this._stateChanges=new pe,this._openCloseAllActions=new pe,this.id="cdk-accordion-"+mz++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=os(t)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=St({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[Ms([{provide:Lv,useExisting:n}]),ps]}),n})(),yz=0,vz=(()=>{class n{constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=ee.EMPTY,this.closed=new Rn,this.opened=new Rn,this.destroyed=new Rn,this.expandedChange=new Rn,this.id="cdk-accordion-child-"+yz++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=os(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=os(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(Pe(Lv,12),Pe(wo),Pe(BC))},n.\u0275dir=St({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Ms([{provide:Lv,useValue:void 0}])]}),n})(),bz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({}),n})();class Nv{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class xz extends Nv{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Ov extends Nv{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class wz extends Nv{constructor(e){super(),this.element=e instanceof Kn?e.nativeElement:e}}let Fv=(()=>{class n extends class Mz{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof xz?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Ov?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof wz?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Rn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(Pe(Hl),Pe(sr),Pe(yn))},n.\u0275dir=St({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ir]}),n})(),Ez=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({}),n})();function kv(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class Vz extends ee{constructor(e,t){super()}schedule(e,t=0){return this}}let zC=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class Po extends zC{constructor(e,t=zC.now){super(e,()=>Po.delegate&&Po.delegate!==this?Po.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return Po.delegate&&Po.delegate!==this?Po.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const Gz=new Po(class zz extends Vz{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}});class Wz{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new jz(e,this.dueTime,this.scheduler))}}class jz extends P{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule($z,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function $z(n){n.debouncedNext()}class Xz{constructor(e){this.total=e}call(e,t){return t.subscribe(new Yz(e,this.total))}}class Yz extends P{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function WC(n,e){return t=>t.lift(new Kz(n,e))}class Kz{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Zz(e,this.compare,this.keySelector))}}class Zz extends P{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}class Qz{constructor(e){this.notifier=e}call(e,t){const i=new e6(e),r=fe(this.notifier,new R(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class e6 extends b{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Bv;try{Bv="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Bv=!1}let uh,Vv,as,Cs=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function YU(n){return n===A1}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Bv)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Ie($l))},n.\u0275prov=_t({factory:function(){return new n(Ie($l))},token:n,providedIn:"root"}),n})(),Uv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({}),n})();function Hv(n){return function t6(){if(null==uh&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>uh=!0}))}finally{uh=uh||!1}return uh}()?n:!!n.capture}function hh(n){return n.composedPath?n.composedPath()[0]:n.target}as="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class u6 extends class c6{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new pe,this._typeaheadSubscription=ee.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new pe,this.change=new pe,e instanceof Gl&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(ar(t=>this._pressedLetters.push(t)),function GC(n,e=Gz){return t=>t.lift(new Wz(n,e))}(e),Hr(()=>this._pressedLetters.length>0),nt(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||kv(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Gl?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function JC(n){return 0===n.offsetX&&0===n.offsetY}function QC(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const eD=new xt("cdk-input-modality-detector-options"),C6={ignoreKeys:[18,17,224,91,16]},rc=Hv({passive:!0,capture:!0});let nD=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ur(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=hh(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(JC(o)?"keyboard":"mouse"),this._mostRecentTarget=hh(o))},this._onTouchstart=o=>{QC(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=hh(o))},this._options=Object.assign(Object.assign({},C6),s),this.modalityDetected=this._modality.pipe(function qz(n){return e=>e.lift(new Xz(n))}(1)),this.modalityChanged=this.modalityDetected.pipe(WC()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,rc),r.addEventListener("mousedown",this._onMousedown,rc),r.addEventListener("touchstart",this._onTouchstart,rc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,rc),document.removeEventListener("mousedown",this._onMousedown,rc),document.removeEventListener("touchstart",this._onTouchstart,rc))}}return n.\u0275fac=function(t){return new(t||n)(Ie(Cs),Ie(gn),Ie(yn),Ie(eD,8))},n.\u0275prov=_t({factory:function(){return new n(Ie(Cs),Ie(gn),Ie(yn),Ie(eD,8))},token:n,providedIn:"root"}),n})();const sD=new xt("cdk-focus-monitor-default-options"),sp=Hv({passive:!0,capture:!0});let op=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new pe,this._rootNodeFocusAndBlurListener=a=>{const l=hh(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=nc(t);if(!this._platform.isBrowser||1!==r.nodeType)return Ot(null);const s=function i6(n){if(function n6(){if(null==Vv){const n="undefined"!=typeof document?document.head:null;Vv=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Vv}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new pe,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=nc(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=nc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,i,r){r?t.classList.add(i):t.classList.remove(i)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){this._toggleClass(t,"cdk-focused",!!i),this._toggleClass(t,"cdk-touch-focused","touch"===i),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(t,"cdk-mouse-focused","mouse"===i),this._toggleClass(t,"cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=hh(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,sp),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,sp)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(function Jz(n){return e=>e.lift(new Qz(n))}(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,sp),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,sp),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(Ie(gn),Ie(Cs),Ie(nD),Ie(yn,8),Ie(sD,8))},n.\u0275prov=_t({factory:function(){return new n(Ie(gn),Ie(Cs),Ie(nD),Ie(yn,8),Ie(sD,8))},token:n,providedIn:"root"}),n})();const oD="cdk-high-contrast-black-on-white",aD="cdk-high-contrast-white-on-black",Gv="cdk-high-contrast-active";let lD=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Gv),t.remove(oD),t.remove(aD),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(Gv),t.add(oD)):2===i&&(t.add(Gv),t.add(aD))}}}return n.\u0275fac=function(t){return new(t||n)(Ie(Cs),Ie(yn))},n.\u0275prov=_t({factory:function(){return new n(Ie(Cs),Ie(yn))},token:n,providedIn:"root"}),n})();const cD=new xt("cdk-dir-doc",{providedIn:"root",factory:function I6(){return xg(yn)}});let uD=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Rn,t){const r=t.documentElement?t.documentElement.dir:null,s=(t.body?t.body.dir:null)||r;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Ie(cD,8))},n.\u0275prov=_t({factory:function(){return new n(Ie(cD,8))},token:n,providedIn:"root"}),n})(),hD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({}),n})();const dD=new da("12.2.10"),fD=new da("12.2.10"),k6=new xt("mat-sanity-checks",{providedIn:"root",factory:function F6(){return!0}});let Ca,wr=(()=>{class n{constructor(t,i,r){this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!function cB(){return ZS=!0,KS}()||function s6(){return void 0!==as.__karma__&&!!as.__karma__||void 0!==as.jasmine&&!!as.jasmine||void 0!==as.jest&&!!as.jest||void 0!==as.Mocha&&!!as.Mocha}())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const i=getComputedStyle(t);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&fD.full!==dD.full&&console.warn("The Angular Material version ("+fD.full+") does not match the Angular CDK version ("+dD.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(Ie(lD),Ie(k6,8),Ie(yn))},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[hD],hD]}),n})();function pD(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=os(e)}}}function B6(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function U6(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=os(e)}}}function H6(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?ch(t):this.defaultTabIndex}}}try{Ca="undefined"!=typeof Intl}catch(n){Ca=!1}let gD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[wr],wr]}),n})();class eG{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const yD={enterDuration:225,exitDuration:150},Wv=Hv({passive:!0}),_D=["mousedown","touchstart"],vD=["mouseup","mouseleave","touchend","touchcancel"];class nG{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=nc(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},yD),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function rG(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function iG(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const h=new eG(this,u,i);return h.state=0,this._activeRipples.add(h),i.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const d=h===this._mostRecentTransientRipple;h.state=1,!i.persistent&&(!d||!this._isPointerDown)&&h.fadeOut()},c),h}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},yD),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.parentNode.removeChild(i)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=nc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(_D))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(vD),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=JC(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!QC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Wv)})})}_removeTriggerEvents(){this._triggerElement&&(_D.forEach(e=>{this._triggerElement.removeEventListener(e,this,Wv)}),this._pointerUpEventsRegistered&&vD.forEach(e=>{this._triggerElement.removeEventListener(e,this,Wv)}))}}const sG=new xt("mat-ripple-global-options");let lp=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new nG(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(Pe(Kn),Pe(gn),Pe(Cs),Pe(sG,8),Pe(Ys,8))},n.\u0275dir=St({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Yi("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),bD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[wr,Uv],wr]}),n})();const fG=["body"];function pG(n,e){}const mG=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],gG=["mat-expansion-panel-header","*","mat-action-row"];function yG(n,e){1&n&&wn(0,"span",2),2&n&&Yn("@indicatorRotate",ua()._getExpandedState())}const _G=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],vG=["mat-panel-title","mat-panel-description","*"],jv=new xt("MAT_ACCORDION"),ED="225ms cubic-bezier(0.4,0.0,0.2,1)",SD={indicatorRotate:F_("indicatorRotate",[qu("collapsed, void",So({transform:"rotate(0deg)"})),qu("expanded",So({transform:"rotate(180deg)"})),B_("expanded <=> collapsed, void => collapsed",k_(ED))]),bodyExpansion:F_("bodyExpansion",[qu("collapsed, void",So({height:"0px",visibility:"hidden"})),qu("expanded",So({height:"*",visibility:"visible"})),B_("expanded <=> collapsed, void => collapsed",k_(ED))])};let bG=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(Pe(ns))},n.\u0275dir=St({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),xG=0;const TD=new xt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let CD=(()=>{class n extends vz{constructor(t,i,r,s,o,a,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Rn,this.afterCollapse=new Rn,this._inputChanges=new pe,this._headerId="mat-expansion-panel-header-"+xG++,this._bodyAnimationDone=new pe,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(WC((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=os(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Vf(null),Hr(()=>this.expanded&&!this._portal),Zu(1)).subscribe(()=>{this._portal=new Ov(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(Pe(jv,12),Pe(wo),Pe(BC),Pe(sr),Pe(yn),Pe(Ys,8),Pe(TD,8))},n.\u0275cmp=Wn({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&fa(r,bG,5),2&t){let s;Lr(s=Nr())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&Wl(fG,5),2&t){let r;Lr(r=Nr())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&Yi("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Ms([{provide:jv,useValue:void 0}]),ir,ps],ngContentSelectors:gG,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(_r(mG),Vn(0),De(1,"div",0,1),rr("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),De(3,"div",2),Vn(4,1),Gs(5,pG,0,0,"ng-template",3),Ae(),Vn(6,2),Ae()),2&t&&(qt(1),Yn("@bodyExpansion",i._getExpandedState())("id",i.id),Rr("aria-labelledby",i._headerId),qt(4),Yn("cdkPortalOutlet",i._portal))},directives:[Fv],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[SD.bodyExpansion]},changeDetection:0}),n})();class MG{}const EG=H6(MG);let DD=(()=>{class n extends EG{constructor(t,i,r,s,o,a,l){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=ee.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(Hr(u=>!(!u.hideToggle&&!u.togglePosition))):ba;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Un(t.opened,t.closed,c,t._inputChanges.pipe(Hr(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Hr(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:kv(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(Pe(CD,1),Pe(Kn),Pe(op),Pe(wo),Pe(TD,8),Pe(Ys,8),ul("tabindex"))},n.\u0275cmp=Wn({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&rr("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(Rr("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),Ud("height",i._getHeaderHeight()),Yi("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[ir],ngContentSelectors:vG,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(_r(_G),De(0,"span",0),Vn(1),Vn(2,1),Vn(3,2),Ae(),Gs(4,yG,1,1,"span",1)),2&t&&(qt(4),Yn("ngIf",i._showToggle()))},directives:[T_],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[SD.indicatorRotate]},changeDetection:0}),n})(),SG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=St({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),TG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=St({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),AD=(()=>{class n extends gz{constructor(){super(...arguments),this._ownHeaders=new Gl,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=os(t)}ngAfterContentInit(){this._headers.changes.pipe(Vf(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new u6(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=function lu(n){return fo(()=>{const e=n.prototype.constructor,t=e[ks]||mg(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[ks]||mg(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}(n)))(i||n)}}(),n.\u0275dir=St({type:n,selectors:[["mat-accordion"]],contentQueries:function(t,i,r){if(1&t&&fa(r,DD,5),2&t){let s;Lr(s=Nr())&&(i._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,i){2&t&&Yi("mat-accordion-multi",i.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[Ms([{provide:jv,useExisting:n}]),ir]}),n})(),CG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[pf,wr,bz,Ez]]}),n})();function ID(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}const lr=1001,Ti=1003,ni=1006,Ia=1009,mh=1012,No=1015,uc=1016,hc=1020,Ji=1023,Pa=1026,dc=1027,fc=2400,pc=2401,Oo=3e3,$n=3001,gh=35044,yh=35048;class Ra{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Li=[];for(let n=0;n<256;n++)Li[n]=(n<16?"0":"")+n.toString(16);const La=Math.PI/180,_h=180/Math.PI;function Mr(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Li[255&n]+Li[n>>8&255]+Li[n>>16&255]+Li[n>>24&255]+"-"+Li[255&e]+Li[e>>8&255]+"-"+Li[e>>16&15|64]+Li[e>>24&255]+"-"+Li[63&t|128]+Li[t>>8&255]+"-"+Li[t>>16&255]+Li[t>>24&255]+Li[255&i]+Li[i>>8&255]+Li[i>>16&255]+Li[i>>24&255]).toUpperCase()}function Ni(n,e,t){return Math.max(e,Math.min(t,n))}function vh(n,e,t){return(1-t)*n+t*e}function a0(n){return 0==(n&n-1)&&0!==n}function bp(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class Ve{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ve.prototype.isVector2=!0;class Ai{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],d=i[2],f=i[5],p=i[8],y=r[0],_=r[3],g=r[6],m=r[1],E=r[4],w=r[7],T=r[2],j=r[5],Q=r[8];return s[0]=o*y+a*m+l*T,s[3]=o*_+a*E+l*j,s[6]=o*g+a*w+l*Q,s[1]=c*y+u*m+h*T,s[4]=c*_+u*E+h*j,s[7]=c*g+u*w+h*Q,s[2]=d*y+f*m+p*T,s[5]=d*_+f*E+p*j,s[8]=d*g+f*w+p*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,p=t*h+i*d+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const y=1/p;return e[0]=h*y,e[1]=(r*c-u*i)*y,e[2]=(a*i-r*o)*y,e[3]=d*y,e[4]=(u*t-r*l)*y,e[5]=(r*s-a*t)*y,e[6]=f*y,e[7]=(i*l-c*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*o+i*c,r[6]=t*a+i*u,r[1]=-i*s+t*l,r[4]=-i*o+t*c,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function dA(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function bh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}Ai.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const fA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ls={h:0,s:0,l:0},xp={h:0,s:0,l:0};function l0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function yc(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function c0(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let _c,rt=(()=>{class n{constructor(t,i,r){return void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,i,r){return this.r=t,this.g=i,this.b=r,this}setHSL(t,i,r){if(t=function o0(n,e){return(n%e+e)%e}(t,1),i=Ni(i,0,1),r=Ni(r,0,1),0===i)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+i):r+i-r*i,o=2*r-s;this.r=l0(o,s,t+1/3),this.g=l0(o,s,t),this.b=l0(o,s,t-1/3)}return this}setStyle(t){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseInt(s[2],10)/100,u=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(l,c,u)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===o)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const i=fA[t.toLowerCase()];return void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=yc(t.r),this.g=yc(t.g),this.b=yc(t.b),this}copyLinearToSRGB(t){return this.r=c0(t.r),this.g=c0(t.g),this.b=c0(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const i=this.r,r=this.g,s=this.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4}l/=6}return t.h=l,t.s=c,t.l=u,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,i,r){return this.getHSL(ls),ls.h+=t,ls.s+=i,ls.l+=r,this.setHSL(ls.h,ls.s,ls.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(ls),t.getHSL(xp);const r=vh(ls.h,xp.h,i),s=vh(ls.s,xp.s,i),o=vh(ls.l,xp.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=fA,n})();rt.prototype.isColor=!0,rt.prototype.r=1,rt.prototype.g=1,rt.prototype.b=1;class Na{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_c&&(_c=bh("canvas")),_c.width=e.width,_c.height=e.height;const i=_c.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=_c}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=bh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*yc(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*yc(t[i]/255)):yc(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class vc{constructor(e=null){this.uuid=Mr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(u0(r[o].isDataTexture?r[o].image:r[o]))}else s=u0(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function u0(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?Na.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}vc.prototype.isSource=!0;let VW=0,cr=(()=>{class n extends Ra{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=lr,s=lr,o=ni,a=1008,l=Ji,c=Ia,u=1,h=Oo){super(),Object.defineProperty(this,"id",{value:VW++}),this.uuid=Mr(),this.name="",this.source=new vc(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ai,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case lr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case lr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();cr.prototype.isTexture=!0;class Mn{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],p=l[9],y=l[2],_=l[6],g=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-y)<.01&&Math.abs(p-_)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+y)<.1&&Math.abs(p+_)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,w=(f+1)/2,T=(g+1)/2,j=(u+d)/4,Q=(h+y)/4,ae=(p+_)/4;return E>w&&E>T?E<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(E),r=j/i,s=Q/i):w>T?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=j/r,s=ae/r):T<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),i=Q/s,r=ae/s),this.set(i,r,s,t),this}let m=Math.sqrt((_-p)*(_-p)+(h-y)*(h-y)+(d-u)*(d-u));return Math.abs(m)<.001&&(m=1),this.x=(_-p)/m,this.y=(h-y)/m,this.z=(d-u)/m,this.w=Math.acos((c+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Mn.prototype.isVector4=!0;class ur extends Ra{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Mn(0,0,e,t),this.scissorTest=!1,this.viewport=new Mn(0,0,e,t),this.texture=new cr({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:ni,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}ur.prototype.isWebGLRenderTarget=!0;class xh extends cr{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ti,this.minFilter=Ti,this.wrapR=lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}xh.prototype.isDataArrayTexture=!0,class zW extends ur{constructor(e,t,i){super(e,t),this.depth=i,this.texture=new xh(null,e,t,i),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class wp extends cr{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ti,this.minFilter=Ti,this.wrapR=lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}wp.prototype.isData3DTexture=!0,class GW extends ur{constructor(e,t,i){super(e,t),this.depth=i,this.texture=new wp(null,e,t,i),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class WW extends ur{constructor(e,t,i,r={}){super(e,t,r);const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Hi{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const d=s[o+0],f=s[o+1],p=s[o+2],y=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=h);if(1===a)return e[t+0]=d,e[t+1]=f,e[t+2]=p,void(e[t+3]=y);if(h!==y||l!==d||c!==f||u!==p){let _=1-a;const g=l*d+c*f+u*p+h*y,m=g>=0?1:-1,E=1-g*g;if(E>Number.EPSILON){const T=Math.sqrt(E),j=Math.atan2(T,g*m);_=Math.sin(_*j)/T,a=Math.sin(a*j)/T}const w=a*m;if(l=l*_+d*w,c=c*_+f*w,u=u*_+p*w,h=h*_+y*w,_===1-a){const T=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=T,c*=T,u*=T,h*=T}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*h+l*f-c*d,e[t+1]=l*p+u*d+c*h-a*f,e[t+2]=c*p+u*f+a*d-l*h,e[t+3]=u*p-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),h=a(s/2),d=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"YZX":this._x=d*u*h+c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h-d*f*p;break;case"XZY":this._x=d*u*h-c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=i+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>h){const f=2*Math.sqrt(1+i-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-i-h);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ni(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=i*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Hi.prototype.isQuaternion=!0;class k{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(pA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(pA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,h=l*r+s*i-o*t,d=-s*t-o*i-a*r;return this.x=c*l+d*-s+u*-a-h*-o,this.y=u*l+d*-o+h*-s-c*-a,this.z=h*l+d*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return h0.copy(this).projectOnVector(e),this.sub(h0)}reflect(e){return this.sub(h0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ni(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}k.prototype.isVector3=!0;const h0=new k,pA=new Hi;class zr{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],h=e[l+1],d=e[l+2];u<t&&(t=u),h<i&&(i=h),d<r&&(r=d),u>s&&(s=u),h>o&&(o=h),d>a&&(a=d)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),h=e.getY(l),d=e.getZ(l);u<t&&(t=u),h<i&&(i=h),d<r&&(r=d),u>s&&(s=u),h>o&&(o=h),d>a&&(a=d)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Oa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Oa.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Oa)}else null===i.boundingBox&&i.computeBoundingBox(),d0.copy(i.boundingBox),d0.applyMatrix4(e.matrixWorld),this.union(d0);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Oa),Oa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wh),Mp.subVectors(this.max,wh),bc.subVectors(e.a,wh),xc.subVectors(e.b,wh),wc.subVectors(e.c,wh),Fo.subVectors(xc,bc),ko.subVectors(wc,xc),Fa.subVectors(bc,wc);let t=[0,-Fo.z,Fo.y,0,-ko.z,ko.y,0,-Fa.z,Fa.y,Fo.z,0,-Fo.x,ko.z,0,-ko.x,Fa.z,0,-Fa.x,-Fo.y,Fo.x,0,-ko.y,ko.x,0,-Fa.y,Fa.x,0];return!(!f0(t,bc,xc,wc,Mp)||(t=[1,0,0,0,1,0,0,0,1],!f0(t,bc,xc,wc,Mp)))&&(Ep.crossVectors(Fo,ko),t=[Ep.x,Ep.y,Ep.z],f0(t,bc,xc,wc,Mp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Oa.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Oa).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Js[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Js[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Js[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Js[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Js[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Js[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Js[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Js[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Js)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}zr.prototype.isBox3=!0;const Js=[new k,new k,new k,new k,new k,new k,new k,new k],Oa=new k,d0=new zr,bc=new k,xc=new k,wc=new k,Fo=new k,ko=new k,Fa=new k,wh=new k,Mp=new k,Ep=new k,ka=new k;function f0(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ka.fromArray(n,s);const a=r.x*Math.abs(ka.x)+r.y*Math.abs(ka.y)+r.z*Math.abs(ka.z),l=e.dot(ka),c=t.dot(ka),u=i.dot(ka);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const jW=new zr,mA=new k,Sp=new k,p0=new k;class Ba{constructor(e=new k,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):jW.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){p0.subVectors(e,this.center);const t=p0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(p0.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?Sp.set(0,0,1).multiplyScalar(e.radius):Sp.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(mA.copy(e.center).add(Sp)),this.expandByPoint(mA.copy(e.center).sub(Sp)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Qs=new k,m0=new k,Tp=new k,Bo=new k,g0=new k,Cp=new k,y0=new k;class Ua{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Qs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Qs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Qs.copy(this.direction).multiplyScalar(t).add(this.origin),Qs.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){m0.copy(e).add(t).multiplyScalar(.5),Tp.copy(t).sub(e).normalize(),Bo.copy(this.origin).sub(m0);const s=.5*e.distanceTo(t),o=-this.direction.dot(Tp),a=Bo.dot(this.direction),l=-Bo.dot(Tp),c=Bo.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*l-a,d=o*a-l,p=s*u,h>=0)if(d>=-p)if(d<=p){const y=1/u;h*=y,d*=y,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-p?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=p?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(Tp).multiplyScalar(d).add(m0),f}intersectSphere(e,t){Qs.subVectors(e.center,this.origin);const i=Qs.dot(this.direction),r=Qs.dot(Qs)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Qs)}intersectTriangle(e,t,i,r,s){g0.subVectors(t,e),Cp.subVectors(i,e),y0.crossVectors(g0,Cp);let a,o=this.direction.dot(y0);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Bo.subVectors(this.origin,e);const l=a*this.direction.dot(Cp.crossVectors(Bo,Cp));if(l<0)return null;const c=a*this.direction.dot(g0.cross(Bo));if(c<0||l+c>o)return null;const u=-a*Bo.dot(y0);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class mt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c,u,h,d,f,p,y,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=h,g[14]=d,g[3]=f,g[7]=p,g[11]=y,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new mt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Mc.setFromMatrixColumn(e,0).length(),s=1/Mc.setFromMatrixColumn(e,1).length(),o=1/Mc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if("XYZ"===e.order){const d=o*u,f=o*h,p=a*u,y=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+p*c,t[5]=d-y*c,t[9]=-a*l,t[2]=y-d*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const d=l*u,f=l*h,p=c*u,y=c*h;t[0]=d+y*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=y+d*a,t[10]=o*l}else if("ZXY"===e.order){const d=l*u,f=l*h,p=c*u,y=c*h;t[0]=d-y*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=y-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const d=o*u,f=o*h,p=a*u,y=a*h;t[0]=l*u,t[4]=p*c-f,t[8]=d*c+y,t[1]=l*h,t[5]=y*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const d=o*l,f=o*c,p=a*l,y=a*c;t[0]=l*u,t[4]=y-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+p,t[10]=d-y*h}else if("XZY"===e.order){const d=o*l,f=o*c,p=a*l,y=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+y,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=y*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose($W,e,qW)}lookAt(e,t,i){const r=this.elements;return Er.subVectors(e,t),0===Er.lengthSq()&&(Er.z=1),Er.normalize(),Uo.crossVectors(i,Er),0===Uo.lengthSq()&&(1===Math.abs(i.z)?Er.x+=1e-4:Er.z+=1e-4,Er.normalize(),Uo.crossVectors(i,Er)),Uo.normalize(),Dp.crossVectors(Er,Uo),r[0]=Uo.x,r[4]=Dp.x,r[8]=Er.x,r[1]=Uo.y,r[5]=Dp.y,r[9]=Er.y,r[2]=Uo.z,r[6]=Dp.z,r[10]=Er.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],d=i[9],f=i[13],p=i[2],y=i[6],_=i[10],g=i[14],m=i[3],E=i[7],w=i[11],T=i[15],j=r[0],Q=r[4],ae=r[8],xe=r[12],he=r[1],A=r[5],te=r[9],me=r[13],ve=r[2],Me=r[6],ne=r[10],ue=r[14],se=r[3],we=r[7],Fe=r[11],We=r[15];return s[0]=o*j+a*he+l*ve+c*se,s[4]=o*Q+a*A+l*Me+c*we,s[8]=o*ae+a*te+l*ne+c*Fe,s[12]=o*xe+a*me+l*ue+c*We,s[1]=u*j+h*he+d*ve+f*se,s[5]=u*Q+h*A+d*Me+f*we,s[9]=u*ae+h*te+d*ne+f*Fe,s[13]=u*xe+h*me+d*ue+f*We,s[2]=p*j+y*he+_*ve+g*se,s[6]=p*Q+y*A+_*Me+g*we,s[10]=p*ae+y*te+_*ne+g*Fe,s[14]=p*xe+y*me+_*ue+g*We,s[3]=m*j+E*he+w*ve+T*se,s[7]=m*Q+E*A+w*Me+T*we,s[11]=m*ae+E*te+w*ne+T*Fe,s[15]=m*xe+E*me+w*ue+T*We,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14];return e[3]*(+s*l*h-r*c*h-s*a*d+i*c*d+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*d+s*o*d-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*h-t*a*f-s*o*h+i*o*f+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*h+t*a*d+r*o*h-i*o*d+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],y=e[13],_=e[14],g=e[15],m=h*_*c-y*d*c+y*l*f-a*_*f-h*l*g+a*d*g,E=p*d*c-u*_*c-p*l*f+o*_*f+u*l*g-o*d*g,w=u*y*c-p*h*c+p*a*f-o*y*f-u*a*g+o*h*g,T=p*h*l-u*y*l-p*a*d+o*y*d+u*a*_-o*h*_,j=t*m+i*E+r*w+s*T;if(0===j)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Q=1/j;return e[0]=m*Q,e[1]=(y*d*s-h*_*s-y*r*f+i*_*f+h*r*g-i*d*g)*Q,e[2]=(a*_*s-y*l*s+y*r*c-i*_*c-a*r*g+i*l*g)*Q,e[3]=(h*l*s-a*d*s-h*r*c+i*d*c+a*r*f-i*l*f)*Q,e[4]=E*Q,e[5]=(u*_*s-p*d*s+p*r*f-t*_*f-u*r*g+t*d*g)*Q,e[6]=(p*l*s-o*_*s-p*r*c+t*_*c+o*r*g-t*l*g)*Q,e[7]=(o*d*s-u*l*s+u*r*c-t*d*c-o*r*f+t*l*f)*Q,e[8]=w*Q,e[9]=(p*h*s-u*y*s-p*i*f+t*y*f+u*i*g-t*h*g)*Q,e[10]=(o*y*s-p*a*s+p*i*c-t*y*c-o*i*g+t*a*g)*Q,e[11]=(u*a*s-o*h*s-u*i*c+t*h*c+o*i*f-t*a*f)*Q,e[12]=T*Q,e[13]=(u*y*r-p*h*r+p*i*d-t*y*d-u*i*_+t*h*_)*Q,e[14]=(p*a*r-o*y*r-p*i*l+t*y*l+o*i*_-t*a*_)*Q,e[15]=(o*h*r-u*a*r+u*i*l-t*h*l-o*i*d+t*a*d)*Q,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,p=s*h,y=o*u,_=o*h,g=a*h,m=l*c,E=l*u,w=l*h,T=i.x,j=i.y,Q=i.z;return r[0]=(1-(y+g))*T,r[1]=(f+w)*T,r[2]=(p-E)*T,r[3]=0,r[4]=(f-w)*j,r[5]=(1-(d+g))*j,r[6]=(_+m)*j,r[7]=0,r[8]=(p+E)*Q,r[9]=(_-m)*Q,r[10]=(1-(d+y))*Q,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Mc.set(r[0],r[1],r[2]).length();const o=Mc.set(r[4],r[5],r[6]).length(),a=Mc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],cs.copy(this);const c=1/s,u=1/o,h=1/a;return cs.elements[0]*=c,cs.elements[1]*=c,cs.elements[2]*=c,cs.elements[4]*=u,cs.elements[5]*=u,cs.elements[6]*=u,cs.elements[8]*=h,cs.elements[9]*=h,cs.elements[10]*=h,t.setFromRotationMatrix(cs),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(i-r),u=(t+e)/(t-e),h=(i+r)/(i-r),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),h=(t+e)*l,d=(i+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}mt.prototype.isMatrix4=!0;const Mc=new k,cs=new mt,$W=new k(0,0,0),qW=new k(1,1,1),Uo=new k,Dp=new k,Er=new k,gA=new mt,yA=new Hi;class Ha{constructor(e=0,t=0,i=0,r=Ha.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Ni(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ni(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ni(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ni(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ni(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Ni(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return gA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return yA.setFromEuler(this),this.setFromQuaternion(yA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ha.prototype.isEuler=!0,Ha.DefaultOrder="XYZ",Ha.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class _0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let XW=0;const _A=new k,Ec=new Hi,eo=new mt,Ap=new k,Mh=new k,YW=new k,KW=new Hi,vA=new k(1,0,0),bA=new k(0,1,0),xA=new k(0,0,1),ZW={type:"added"},wA={type:"removed"};class _n extends Ra{constructor(){super(),Object.defineProperty(this,"id",{value:XW++}),this.uuid=Mr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_n.DefaultUp.clone();const e=new k,t=new Ha,i=new Hi,r=new k(1,1,1);t._onChange(function s(){i.setFromEuler(t,!1)}),i._onChange(function o(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new mt},normalMatrix:{value:new Ai}}),this.matrix=new mt,this.matrixWorld=new mt,this.matrixAutoUpdate=_n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ec.setFromAxisAngle(e,t),this.quaternion.multiply(Ec),this}rotateOnWorldAxis(e,t){return Ec.setFromAxisAngle(e,t),this.quaternion.premultiply(Ec),this}rotateX(e){return this.rotateOnAxis(vA,e)}rotateY(e){return this.rotateOnAxis(bA,e)}rotateZ(e){return this.rotateOnAxis(xA,e)}translateOnAxis(e,t){return _A.copy(e).applyQuaternion(this.quaternion),this.position.add(_A.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(vA,e)}translateY(e){return this.translateOnAxis(bA,e)}translateZ(e){return this.translateOnAxis(xA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(eo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Ap.copy(e):Ap.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Mh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eo.lookAt(Mh,Ap,this.up):eo.lookAt(Ap,Mh,this.up),this.quaternion.setFromRotationMatrix(eo),r&&(eo.extractRotation(r.matrixWorld),Ec.setFromRotationMatrix(eo),this.quaternion.premultiply(Ec.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ZW)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wA)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(wA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),eo.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),eo.multiply(e.parent.matrixWorld)),e.applyMatrix4(eo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(void 0!==o)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mh,e,YW),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mh,KW,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(e.shapes,l[c]);else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(e.animations,this.animations[a]))}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++)this.add(e.children[i].clone());return this}}_n.DefaultUp=new k(0,1,0),_n.DefaultMatrixAutoUpdate=!0,_n.prototype.isObject3D=!0;const us=new k,to=new k,v0=new k,no=new k,Sc=new k,Tc=new k,MA=new k,b0=new k,x0=new k,w0=new k;class yi{constructor(e=new k,t=new k,i=new k){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),us.subVectors(e,t),r.cross(us);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){us.subVectors(r,t),to.subVectors(i,t),v0.subVectors(e,t);const o=us.dot(us),a=us.dot(to),l=us.dot(v0),c=to.dot(to),u=to.dot(v0),h=o*c-a*a;if(0===h)return s.set(-2,-1,-1);const d=1/h,f=(c*l-a*u)*d,p=(o*u-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,no),no.x>=0&&no.y>=0&&no.x+no.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,no),l.set(0,0),l.addScaledVector(s,no.x),l.addScaledVector(o,no.y),l.addScaledVector(a,no.z),l}static isFrontFacing(e,t,i,r){return us.subVectors(i,t),to.subVectors(e,t),us.cross(to).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return us.subVectors(this.c,this.b),to.subVectors(this.a,this.b),.5*us.cross(to).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return yi.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return yi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Sc.subVectors(r,i),Tc.subVectors(s,i),b0.subVectors(e,i);const l=Sc.dot(b0),c=Tc.dot(b0);if(l<=0&&c<=0)return t.copy(i);x0.subVectors(e,r);const u=Sc.dot(x0),h=Tc.dot(x0);if(u>=0&&h<=u)return t.copy(r);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Sc,o);w0.subVectors(e,s);const f=Sc.dot(w0),p=Tc.dot(w0);if(p>=0&&f<=p)return t.copy(s);const y=f*c-l*p;if(y<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(Tc,a);const _=u*p-f*h;if(_<=0&&h-u>=0&&f-p>=0)return MA.subVectors(s,r),a=(h-u)/(h-u+(f-p)),t.copy(r).addScaledVector(MA,a);const g=1/(_+y+d);return o=y*g,a=d*g,t.copy(i).addScaledVector(Sc,o).addScaledVector(Tc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let JW=0;class _i extends Ra{constructor(){super(),Object.defineProperty(this,"id",{value:JW++}),this.uuid=Mr(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}_i.prototype.isMaterial=!0,_i.fromType=function(){return null};class io extends _i{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}io.prototype.isMeshBasicMaterial=!0;const Bn=new k,Ip=new Ve;class Ln{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=gh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new rt),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Ve),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new k),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Mn),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ip.fromBufferAttribute(this,t),Ip.applyMatrix3(e),this.setXY(t,Ip.x,Ip.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Bn.fromBufferAttribute(this,t),Bn.applyMatrix3(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Bn.x=this.getX(t),Bn.y=this.getY(t),Bn.z=this.getZ(t),Bn.applyMatrix4(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Bn.x=this.getX(t),Bn.y=this.getY(t),Bn.z=this.getZ(t),Bn.applyNormalMatrix(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Bn.x=this.getX(t),Bn.y=this.getY(t),Bn.z=this.getZ(t),Bn.transformDirection(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==gh&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Ln.prototype.isBufferAttribute=!0;class M0 extends Ln{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class E0 extends Ln{constructor(e,t,i){super(new Uint32Array(e),t,i)}}(class rj extends Ln{constructor(e,t,i){super(new Uint16Array(e),t,i)}}).prototype.isFloat16BufferAttribute=!0;class pt extends Ln{constructor(e,t,i){super(new Float32Array(e),t,i)}}let oj=0;const Gr=new mt,S0=new _n,Cc=new k,Sr=new zr,Eh=new zr,Ii=new k;class Ct extends Ra{constructor(){super(),Object.defineProperty(this,"id",{value:oj++}),this.uuid=Mr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(dA(e)?E0:M0)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Ai).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Gr.makeRotationFromQuaternion(e),this.applyMatrix4(Gr),this}rotateX(e){return Gr.makeRotationX(e),this.applyMatrix4(Gr),this}rotateY(e){return Gr.makeRotationY(e),this.applyMatrix4(Gr),this}rotateZ(e){return Gr.makeRotationZ(e),this.applyMatrix4(Gr),this}translate(e,t,i){return Gr.makeTranslation(e,t,i),this.applyMatrix4(Gr),this}scale(e,t,i){return Gr.makeScale(e,t,i),this.applyMatrix4(Gr),this}lookAt(e){return S0.lookAt(e),S0.updateMatrix(),this.applyMatrix4(S0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cc).negate(),this.translate(Cc.x,Cc.y,Cc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new pt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new zr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Sr.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Ii.addVectors(this.boundingBox.min,Sr.min),this.boundingBox.expandByPoint(Ii),Ii.addVectors(this.boundingBox.max,Sr.max),this.boundingBox.expandByPoint(Ii)):(this.boundingBox.expandByPoint(Sr.min),this.boundingBox.expandByPoint(Sr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ba);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new k,1/0);if(e){const i=this.boundingSphere.center;if(Sr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Eh.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Ii.addVectors(Sr.min,Eh.min),Sr.expandByPoint(Ii),Ii.addVectors(Sr.max,Eh.max),Sr.expandByPoint(Ii)):(Sr.expandByPoint(Eh.min),Sr.expandByPoint(Eh.max));Sr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Ii.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ii));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Ii.fromBufferAttribute(a,c),l&&(Cc.fromBufferAttribute(e,c),Ii.add(Cc)),r=Math.max(r,i.distanceToSquared(Ii))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ln(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let he=0;he<a;he++)c[he]=new k,u[he]=new k;const h=new k,d=new k,f=new k,p=new Ve,y=new Ve,_=new Ve,g=new k,m=new k;function E(he,A,te){h.fromArray(r,3*he),d.fromArray(r,3*A),f.fromArray(r,3*te),p.fromArray(o,2*he),y.fromArray(o,2*A),_.fromArray(o,2*te),d.sub(h),f.sub(h),y.sub(p),_.sub(p);const me=1/(y.x*_.y-_.x*y.y);!isFinite(me)||(g.copy(d).multiplyScalar(_.y).addScaledVector(f,-y.y).multiplyScalar(me),m.copy(f).multiplyScalar(y.x).addScaledVector(d,-_.x).multiplyScalar(me),c[he].add(g),c[A].add(g),c[te].add(g),u[he].add(m),u[A].add(m),u[te].add(m))}let w=this.groups;0===w.length&&(w=[{start:0,count:i.length}]);for(let he=0,A=w.length;he<A;++he){const te=w[he],me=te.start;for(let Me=me,ne=me+te.count;Me<ne;Me+=3)E(i[Me+0],i[Me+1],i[Me+2])}const T=new k,j=new k,Q=new k,ae=new k;function xe(he){Q.fromArray(s,3*he),ae.copy(Q);const A=c[he];T.copy(A),T.sub(Q.multiplyScalar(Q.dot(A))).normalize(),j.crossVectors(ae,A);const me=j.dot(u[he])<0?-1:1;l[4*he]=T.x,l[4*he+1]=T.y,l[4*he+2]=T.z,l[4*he+3]=me}for(let he=0,A=w.length;he<A;++he){const te=w[he],me=te.start;for(let Me=me,ne=me+te.count;Me<ne;Me+=3)xe(i[Me+0]),xe(i[Me+1]),xe(i[Me+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Ln(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const r=new k,s=new k,o=new k,a=new k,l=new k,c=new k,u=new k,h=new k;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),y=e.getX(d+1),_=e.getX(d+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,_),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,y),c.fromBufferAttribute(i,_),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===e.attributes[r])continue;const o=i[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let h=0,d=c;h<u;h++,d++)o[d]=l[h]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ii.fromBufferAttribute(e,t),Ii.normalize(),e.setXYZ(t,Ii.x,Ii.y,Ii.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,p=0;for(let y=0,_=l.length;y<_;y++){f=a.isInterleavedBufferAttribute?l[y]*a.data.stride+a.offset:l[y]*u;for(let g=0;g<u;g++)d[p++]=c[f++]}return new Ln(d,u,h)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ct,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++)u.push(c[h].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Ct.prototype.isBufferGeometry=!0;const EA=new mt,Dc=new Ua,T0=new Ba,Ho=new k,Vo=new k,zo=new k,C0=new k,D0=new k,A0=new k,Pp=new k,Rp=new k,Lp=new k,Np=new Ve,Op=new Ve,Fp=new Ve,I0=new k,kp=new k;class Ci extends _n{constructor(e=new Ct,t=new io){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),T0.copy(i.boundingSphere),T0.applyMatrix4(s),!1===e.ray.intersectsSphere(T0))||(EA.copy(s).invert(),Dc.copy(e.ray).applyMatrix4(EA),null!==i.boundingBox&&!1===Dc.intersectsBox(i.boundingBox)))return;let o;if(i.isBufferGeometry){const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,h=i.attributes.uv,d=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let y=0,_=f.length;y<_;y++){const g=f[y],m=r[g.materialIndex];for(let T=Math.max(g.start,p.start),j=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));T<j;T+=3){const Q=a.getX(T),ae=a.getX(T+1),xe=a.getX(T+2);o=Bp(this,m,e,Dc,l,c,u,h,d,Q,ae,xe),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else for(let g=Math.max(0,p.start),m=Math.min(a.count,p.start+p.count);g<m;g+=3){const E=a.getX(g),w=a.getX(g+1),T=a.getX(g+2);o=Bp(this,r,e,Dc,l,c,u,h,d,E,w,T),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let y=0,_=f.length;y<_;y++){const g=f[y],m=r[g.materialIndex];for(let T=Math.max(g.start,p.start),j=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));T<j;T+=3)o=Bp(this,m,e,Dc,l,c,u,h,d,T,T+1,T+2),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=g.materialIndex,t.push(o))}else for(let g=Math.max(0,p.start),m=Math.min(l.count,p.start+p.count);g<m;g+=3)o=Bp(this,r,e,Dc,l,c,u,h,d,g,g+1,g+2),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Bp(n,e,t,i,r,s,o,a,l,c,u,h){Ho.fromBufferAttribute(r,c),Vo.fromBufferAttribute(r,u),zo.fromBufferAttribute(r,h);const d=n.morphTargetInfluences;if(s&&d){Pp.set(0,0,0),Rp.set(0,0,0),Lp.set(0,0,0);for(let p=0,y=s.length;p<y;p++){const _=d[p],g=s[p];0!==_&&(C0.fromBufferAttribute(g,c),D0.fromBufferAttribute(g,u),A0.fromBufferAttribute(g,h),o?(Pp.addScaledVector(C0,_),Rp.addScaledVector(D0,_),Lp.addScaledVector(A0,_)):(Pp.addScaledVector(C0.sub(Ho),_),Rp.addScaledVector(D0.sub(Vo),_),Lp.addScaledVector(A0.sub(zo),_)))}Ho.add(Pp),Vo.add(Rp),zo.add(Lp)}n.isSkinnedMesh&&(n.boneTransform(c,Ho),n.boneTransform(u,Vo),n.boneTransform(h,zo));const f=function aj(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;kp.copy(a),kp.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(kp);return c<t.near||c>t.far?null:{distance:c,point:kp.clone(),object:n}}(n,e,t,i,Ho,Vo,zo,I0);if(f){a&&(Np.fromBufferAttribute(a,c),Op.fromBufferAttribute(a,u),Fp.fromBufferAttribute(a,h),f.uv=yi.getUV(I0,Ho,Vo,zo,Np,Op,Fp,new Ve)),l&&(Np.fromBufferAttribute(l,c),Op.fromBufferAttribute(l,u),Fp.fromBufferAttribute(l,h),f.uv2=yi.getUV(I0,Ho,Vo,zo,Np,Op,Fp,new Ve));const p={a:c,b:u,c:h,normal:new k,materialIndex:0};yi.getNormal(Ho,Vo,zo,p.normal),f.face=p}return f}Ci.prototype.isMesh=!0;class Go extends Ct{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;function p(y,_,g,m,E,w,T,j,Q,ae,xe){const he=w/Q,A=T/ae,te=w/2,me=T/2,ve=j/2,Me=Q+1,ne=ae+1;let ue=0,se=0;const we=new k;for(let Fe=0;Fe<ne;Fe++){const We=Fe*A-me;for(let $e=0;$e<Me;$e++)we[y]=($e*he-te)*m,we[_]=We*E,we[g]=ve,c.push(we.x,we.y,we.z),we[y]=0,we[_]=0,we[g]=j>0?1:-1,u.push(we.x,we.y,we.z),h.push($e/Q),h.push(1-Fe/ae),ue+=1}for(let Fe=0;Fe<ae;Fe++)for(let We=0;We<Q;We++){const gt=d+We+Me*(Fe+1),vt=d+(We+1)+Me*(Fe+1),Dt=d+(We+1)+Me*Fe;l.push(d+We+Me*Fe,gt,Dt),l.push(gt,vt,Dt),se+=6}a.addGroup(f,se,xe),f+=se,d+=ue}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new pt(c,3)),this.setAttribute("normal",new pt(u,3)),this.setAttribute("uv",new pt(h,2))}static fromJSON(e){return new Go(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ac(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function Vi(n){const e={};for(let t=0;t<n.length;t++){const i=Ac(n[t]);for(const r in i)e[r]=i[r]}return e}const lj={clone:Ac,merge:Vi};class hs extends _i{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ac(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}hs.prototype.isShaderMaterial=!0;class Up extends _n{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new mt,this.projectionMatrix=new mt,this.projectionMatrixInverse=new mt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Up.prototype.isCamera=!0;class Pi extends Up{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*_h*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*La*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*_h*Math.atan(Math.tan(.5*La*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*La*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Pi.prototype.isPerspectiveCamera=!0;class P0 extends _n{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const r=new Pi(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new k(1,0,0)),this.add(r);const s=new Pi(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new k(-1,0,0)),this.add(s);const o=new Pi(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new k(0,1,0)),this.add(o);const a=new Pi(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new k(0,-1,0)),this.add(a);const l=new Pi(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new k(0,0,1)),this.add(l);const c=new Pi(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new k(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(h),e.xr.enabled=u,i.texture.needsPMREMUpdate=!0}}class Sh extends cr{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Sh.prototype.isCubeTexture=!0;class R0 extends ur{constructor(e,t={}){super(e,e,t);const i={width:e,height:e,depth:1};this.texture=new Sh([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ni}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Ji,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Go(5,5,5),s=new hs({name:"CubemapFromEquirect",uniforms:Ac(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Ci(r,s),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=ni),new P0(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}R0.prototype.isWebGLCubeRenderTarget=!0;const L0=new k,hj=new k,dj=new Ai;class ro{constructor(e=new k(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=L0.subVectors(i,t).cross(hj.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(L0),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||dj.getNormalMatrix(e),r=this.coplanarPoint(L0).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}ro.prototype.isPlane=!0;const Rc=new Ba,Hp=new k;class Vp{constructor(e=new ro,t=new ro,i=new ro,r=new ro,s=new ro,o=new ro){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],y=i[11],_=i[12],g=i[13],m=i[14],E=i[15];return t[0].setComponents(a-r,h-l,y-d,E-_).normalize(),t[1].setComponents(a+r,h+l,y+d,E+_).normalize(),t[2].setComponents(a+s,h+c,y+f,E+g).normalize(),t[3].setComponents(a-s,h-c,y-f,E-g).normalize(),t[4].setComponents(a-o,h-u,y-p,E-m).normalize(),t[5].setComponents(a+o,h+u,y+p,E+m).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Rc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Rc)}intersectsSprite(e){return Rc.center.set(0,0,0),Rc.radius=.7071067811865476,Rc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Hp.x=r.normal.x>0?e.max.x:e.min.x,Hp.y=r.normal.y>0?e.max.y:e.min.y,Hp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Hp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function SA(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function fj(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const d=i.get(c);return void((!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);void 0===h?i.set(c,function r(c,u){const h=c.array,d=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,h,d),c.onUploadCallback(),h instanceof Float32Array)p=5126;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(h instanceof Int16Array)p=5122;else if(h instanceof Uint32Array)p=5125;else if(h instanceof Int32Array)p=5124;else if(h instanceof Int8Array)p=5120;else if(h instanceof Uint8Array)p=5121;else{if(!(h instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);p=5121}return{buffer:f,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}(c,u)):h.version<c.version&&(function s(c,u,h){const d=u.array,f=u.updateRange;n.bindBuffer(h,c),-1===f.count?n.bufferSubData(h,0,d):(t?n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1)}(h.buffer,c,u),h.version=c.version)}}}class Th extends Ct{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,h=e/a,d=t/l,f=[],p=[],y=[],_=[];for(let g=0;g<u;g++){const m=g*d-o;for(let E=0;E<c;E++)p.push(E*h-s,-m,0),y.push(0,0,1),_.push(E/a),_.push(1-g/l)}for(let g=0;g<l;g++)for(let m=0;m<a;m++){const w=m+c*(g+1),T=m+1+c*(g+1),j=m+1+c*g;f.push(m+c*g,w,j),f.push(w,T,j)}this.setIndex(f),this.setAttribute("position",new pt(p,3)),this.setAttribute("normal",new pt(y,3)),this.setAttribute("uv",new pt(_,2))}static fromJSON(e){return new Th(e.width,e.height,e.widthSegments,e.heightSegments)}}const nn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ]\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tfloat texelIndex = float( vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},et={common:{diffuse:{value:new rt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ai},uv2Transform:{value:new Ai},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ai}},sprite:{diffuse:{value:new rt(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ai}}},Ds={basic:{uniforms:Vi([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:Vi([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.fog,et.lights,{emissive:{value:new rt(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:Vi([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new rt(0)},specular:{value:new rt(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:Vi([et.common,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.roughnessmap,et.metalnessmap,et.fog,et.lights,{emissive:{value:new rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:Vi([et.common,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.gradientmap,et.fog,et.lights,{emissive:{value:new rt(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:Vi([et.common,et.bumpmap,et.normalmap,et.displacementmap,et.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:Vi([et.points,et.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:Vi([et.common,et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:Vi([et.common,et.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:Vi([et.common,et.bumpmap,et.normalmap,et.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:Vi([et.sprite,et.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new Ai},t2D:{value:null}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},cube:{uniforms:Vi([et.envmap,{opacity:{value:1}}]),vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:Vi([et.common,et.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:Vi([et.lights,et.fog,{color:{value:new rt(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};function c9(n,e,t,i,r,s){const o=new rt(0);let l,c,a=!0===r?0:1,u=null,h=0,d=null;function p(y,_){t.buffers.color.setClear(y.r,y.g,y.b,_,s)}return{getClearColor:function(){return o},setClearColor:function(y,_=1){o.set(y),a=_,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,p(o,a)},render:function f(y,_){let g=!1,m=!0===_.isScene?_.background:null;m&&m.isTexture&&(m=e.get(m));const E=n.xr,w=E.getSession&&E.getSession();w&&"additive"===w.environmentBlendMode&&(m=null),null===m?p(o,a):m&&m.isColor&&(p(m,1),g=!0),(n.autoClear||g)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),m&&(m.isCubeTexture||306===m.mapping)?(void 0===c&&(c=new Ci(new Go(1,1,1),new hs({name:"BackgroundCubeMaterial",uniforms:Ac(Ds.cube.uniforms),vertexShader:Ds.cube.vertexShader,fragmentShader:Ds.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(T,j,Q){this.matrixWorld.copyPosition(Q.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=m,c.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,(u!==m||h!==m.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,u=m,h=m.version,d=n.toneMapping),y.unshift(c,c.geometry,c.material,0,0,null)):m&&m.isTexture&&(void 0===l&&(l=new Ci(new Th(2,2),new hs({name:"BackgroundMaterial",uniforms:Ac(Ds.background.uniforms),vertexShader:Ds.background.vertexShader,fragmentShader:Ds.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),l.material.uniforms.uvTransform.value.copy(m.matrix),(u!==m||h!==m.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,u=m,h=m.version,d=n.toneMapping),y.unshift(l,l.geometry,l.material,0,0,null))}}}function u9(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=y(null);let c=l;function d(me){return i.isWebGL2?n.bindVertexArray(me):s.bindVertexArrayOES(me)}function f(me){return i.isWebGL2?n.deleteVertexArray(me):s.deleteVertexArrayOES(me)}function y(me){const ve=[],Me=[],ne=[];for(let ue=0;ue<r;ue++)ve[ue]=0,Me[ue]=0,ne[ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ve,enabledAttributes:Me,attributeDivisors:ne,object:me,attributes:{},index:null}}function m(){const me=c.newAttributes;for(let ve=0,Me=me.length;ve<Me;ve++)me[ve]=0}function E(me){w(me,0)}function w(me,ve){const ne=c.enabledAttributes,ue=c.attributeDivisors;c.newAttributes[me]=1,0===ne[me]&&(n.enableVertexAttribArray(me),ne[me]=1),ue[me]!==ve&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](me,ve),ue[me]=ve)}function T(){const me=c.newAttributes,ve=c.enabledAttributes;for(let Me=0,ne=ve.length;Me<ne;Me++)ve[Me]!==me[Me]&&(n.disableVertexAttribArray(Me),ve[Me]=0)}function j(me,ve,Me,ne,ue,se){!0!==i.isWebGL2||5124!==Me&&5125!==Me?n.vertexAttribPointer(me,ve,Me,ne,ue,se):n.vertexAttribIPointer(me,ve,Me,ue,se)}function A(){te(),c!==l&&(c=l,d(c.object))}function te(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function u(me,ve,Me,ne,ue){let se=!1;if(o){const we=function p(me,ve,Me){const ne=!0===Me.wireframe;let ue=a[me.id];void 0===ue&&(ue={},a[me.id]=ue);let se=ue[ve.id];void 0===se&&(se={},ue[ve.id]=se);let we=se[ne];return void 0===we&&(we=y(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),se[ne]=we),we}(ne,Me,ve);c!==we&&(c=we,d(c.object)),se=function _(me,ve){const Me=c.attributes,ne=me.attributes;let ue=0;for(const se in ne){const we=Me[se],Fe=ne[se];if(void 0===we||we.attribute!==Fe||we.data!==Fe.data)return!0;ue++}return c.attributesNum!==ue||c.index!==ve}(ne,ue),se&&function g(me,ve){const Me={},ne=me.attributes;let ue=0;for(const se in ne){const we=ne[se],Fe={};Fe.attribute=we,we.data&&(Fe.data=we.data),Me[se]=Fe,ue++}c.attributes=Me,c.attributesNum=ue,c.index=ve}(ne,ue)}else{const we=!0===ve.wireframe;(c.geometry!==ne.id||c.program!==Me.id||c.wireframe!==we)&&(c.geometry=ne.id,c.program=Me.id,c.wireframe=we,se=!0)}!0===me.isInstancedMesh&&(se=!0),null!==ue&&t.update(ue,34963),se&&(function Q(me,ve,Me,ne){if(!1===i.isWebGL2&&(me.isInstancedMesh||ne.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;m();const ue=ne.attributes,se=Me.getAttributes(),we=ve.defaultAttributeValues;for(const Fe in se){const We=se[Fe];if(We.location>=0){let $e=ue[Fe];if(void 0===$e&&("instanceMatrix"===Fe&&me.instanceMatrix&&($e=me.instanceMatrix),"instanceColor"===Fe&&me.instanceColor&&($e=me.instanceColor)),void 0!==$e){const gt=$e.normalized,vt=$e.itemSize,Dt=t.get($e);if(void 0===Dt)continue;const Be=Dt.buffer,Pt=Dt.type,It=Dt.bytesPerElement;if($e.isInterleavedBufferAttribute){const at=$e.data,ct=at.stride,Xt=$e.offset;if(at.isInstancedInterleavedBuffer){for(let Se=0;Se<We.locationSize;Se++)w(We.location+Se,at.meshPerAttribute);!0!==me.isInstancedMesh&&void 0===ne._maxInstanceCount&&(ne._maxInstanceCount=at.meshPerAttribute*at.count)}else for(let Se=0;Se<We.locationSize;Se++)E(We.location+Se);n.bindBuffer(34962,Be);for(let Se=0;Se<We.locationSize;Se++)j(We.location+Se,vt/We.locationSize,Pt,gt,ct*It,(Xt+vt/We.locationSize*Se)*It)}else{if($e.isInstancedBufferAttribute){for(let at=0;at<We.locationSize;at++)w(We.location+at,$e.meshPerAttribute);!0!==me.isInstancedMesh&&void 0===ne._maxInstanceCount&&(ne._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let at=0;at<We.locationSize;at++)E(We.location+at);n.bindBuffer(34962,Be);for(let at=0;at<We.locationSize;at++)j(We.location+at,vt/We.locationSize,Pt,gt,vt*It,vt/We.locationSize*at*It)}}else if(void 0!==we){const gt=we[Fe];if(void 0!==gt)switch(gt.length){case 2:n.vertexAttrib2fv(We.location,gt);break;case 3:n.vertexAttrib3fv(We.location,gt);break;case 4:n.vertexAttrib4fv(We.location,gt);break;default:n.vertexAttrib1fv(We.location,gt)}}}}T()}(me,ve,Me,ne),null!==ue&&n.bindBuffer(34963,t.get(ue).buffer))},reset:A,resetDefaultState:te,dispose:function ae(){A();for(const me in a){const ve=a[me];for(const Me in ve){const ne=ve[Me];for(const ue in ne)f(ne[ue].object),delete ne[ue];delete ve[Me]}delete a[me]}},releaseStatesOfGeometry:function xe(me){if(void 0===a[me.id])return;const ve=a[me.id];for(const Me in ve){const ne=ve[Me];for(const ue in ne)f(ne[ue].object),delete ne[ue];delete ve[Me]}delete a[me.id]},releaseStatesOfProgram:function he(me){for(const ve in a){const Me=a[ve];if(void 0===Me[me.id])continue;const ne=Me[me.id];for(const ue in ne)f(ne[ue].object),delete ne[ue];delete Me[me.id]}},initAttributes:m,enableAttribute:E,disableUnusedAttributes:T}}function h9(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,h){if(0===h)return;let d,f;if(r)d=n,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===d)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[f](s,c,u,h),t.update(u,s,h)}}function d9(n,e,t){let i;function s(Q){if("highp"===Q){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Q="mediump"}return"mediump"===Q&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,h=n.getParameter(34930),d=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),y=n.getParameter(34921),_=n.getParameter(36347),g=n.getParameter(36348),m=n.getParameter(36349),E=d>0,w=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const Q=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(Q.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:y,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:E,floatFragmentTextures:w,floatVertexTextures:E&&w,maxSamples:o?n.getParameter(36183):0}}function f9(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ro,a=new Ai,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,d,f,p){const y=null!==h?h.length:0;let _=null;if(0!==y){if(_=l.value,!0!==p||null===_){const g=f+4*y,m=d.matrixWorldInverse;a.getNormalMatrix(m),(null===_||_.length<g)&&(_=new Float32Array(g));for(let E=0,w=f;E!==y;++E,w+=4)o.copy(h[E]).applyMatrix4(m,a),o.normal.toArray(_,w),_[w+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,_}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d,f){const p=0!==h.length||d||0!==i||r;return r=d,t=u(h,f,0),i=h.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(h,d,f){const p=h.clippingPlanes,y=h.clipIntersection,_=h.clipShadows,g=n.get(h);if(!r||null===p||0===p.length||s&&!_)s?u(null):c();else{const m=s?0:i,E=4*m;let w=g.clippingState||null;l.value=w,w=u(p,d,E,f);for(let T=0;T!==E;++T)w[T]=t[T];g.clippingState=w,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=m}}}function p9(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new R0(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}Ds.physical={uniforms:Vi([Ds.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new rt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new rt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new rt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};class zp extends Up{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}zp.prototype.isOrthographicCamera=!0;const TA=[.125,.215,.35,.446,.526,.582],N0=new zp,CA=new rt;let O0=null;const za=(1+Math.sqrt(5))/2,Nc=1/za,DA=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,za,Nc),new k(0,za,-Nc),new k(Nc,0,za),new k(-Nc,0,za),new k(za,Nc,0),new k(-za,Nc,0)];class AA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){O0=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=RA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=PA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(O0),e.scissorTest=!1,Gp(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),O0=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,i={magFilter:ni,minFilter:ni,generateMipmaps:!1,type:uc,format:Ji,encoding:Oo,depthBuffer:!1},r=IA(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=IA(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function m9(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+TA.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=TA[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-1),u=-c/2,h=1+c/2,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,p=6,y=3,_=2,g=1,m=new Float32Array(y*p*f),E=new Float32Array(_*p*f),w=new Float32Array(g*p*f);for(let j=0;j<f;j++){const Q=j%3*2/3-1,ae=j>2?0:-1;m.set([Q,ae,0,Q+2/3,ae,0,Q+2/3,ae+1,0,Q,ae,0,Q+2/3,ae+1,0,Q,ae+1,0],y*p*j),E.set(d,_*p*j),w.set([j,j,j,j,j,j],g*p*j)}const T=new Ct;T.setAttribute("position",new Ln(m,y)),T.setAttribute("uv",new Ln(E,_)),T.setAttribute("faceIndex",new Ln(w,g)),e.push(T),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function g9(n,e,t){const i=new Float32Array(20),r=new k(0,1,0);return new hs({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ci(this._lodPlanes[0],e);this._renderer.compile(t,N0)}_sceneToCubeUV(e,t,i,r){const a=new Pi(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(CA),u.toneMapping=0,u.autoClear=!1;const f=new io({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Ci(new Go,f);let y=!1;const _=e.background;_?_.isColor&&(f.color.copy(_),e.background=null,y=!0):(f.color.copy(CA),y=!0);for(let g=0;g<6;g++){const m=g%3;0===m?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):1===m?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const E=this._cubeSize;Gp(r,m*E,g>2?E:0,E,E),u.setRenderTarget(r),y&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=RA()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=PA());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ci(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;Gp(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,N0)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,DA[(r-1)%DA.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new Ci(this._lodPlanes[r],c),d=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,y=s/p,_=isFinite(s)?1+Math.floor(3*y):20;_>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to 20`);const g=[];let m=0;for(let Q=0;Q<20;++Q){const ae=Q/y,xe=Math.exp(-ae*ae/2);g.push(xe),0===Q?m+=xe:Q<_&&(m+=2*xe)}for(let Q=0;Q<g.length;Q++)g[Q]=g[Q]/m;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=g,d.latitudinal.value="latitudinal"===o,a&&(d.poleAxis.value=a);const{_lodMax:E}=this;d.dTheta.value=p,d.mipInt.value=E-i;const w=this._sizeLods[r];Gp(t,3*w*(r>E-4?r-E+4:0),4*(this._cubeSize-w),3*w,2*w),l.setRenderTarget(t),l.render(h,N0)}}function IA(n,e,t){const i=new ur(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Gp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function PA(){return new hs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function RA(){return new hs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function y9(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let h=e.get(a);return null===t&&(t=new AA(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(h)){null===t&&(t=new AA(n));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function _9(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function v9(n,e,t,i){const r={},s=new WeakMap;function o(h){const d=h.target;null!==d.index&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),!0===d.isInstancedBufferGeometry&&delete d._maxInstanceCount,t.memory.geometries--}function c(h){const d=[],f=h.index,p=h.attributes.position;let y=0;if(null!==f){const m=f.array;y=f.version;for(let E=0,w=m.length;E<w;E+=3){const T=m[E+0],j=m[E+1],Q=m[E+2];d.push(T,j,j,Q,Q,T)}}else{y=p.version;for(let E=0,w=p.array.length/3-1;E<w;E+=3){const T=E+0,j=E+1,Q=E+2;d.push(T,j,j,Q,Q,T)}}const _=new(dA(d)?E0:M0)(d,1);_.version=y;const g=s.get(h);g&&e.remove(g),s.set(h,_)}return{get:function a(h,d){return!0===r[d.id]||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d},update:function l(h){const d=h.attributes;for(const p in d)e.update(d[p],34962);const f=h.morphAttributes;for(const p in f){const y=f[p];for(let _=0,g=y.length;_<g;_++)e.update(y[_],34962)}},getWireframeAttribute:function u(h){const d=s.get(h);if(d){const f=h.index;null!==f&&d.version<f.version&&c(h)}else c(h);return s.get(h)}}}function b9(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(d){s=d},this.setIndex=function c(d){a=d.type,l=d.bytesPerElement},this.render=function u(d,f){n.drawElements(s,f,a,d*l),t.update(f,s,1)},this.renderInstances=function h(d,f,p){if(0===p)return;let y,_;if(r)y=n,_="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",null===y)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");y[_](s,f,a,d*l,p),t.update(f,s,p)}}function x9(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function w9(n,e){return n[0]-e[0]}function M9(n,e){return Math.abs(e[1])-Math.abs(n[1])}function k0(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function E9(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Mn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,h,d){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=void 0!==p?p.length:0;let _=s.get(u);if(void 0===_||_.count!==y){let Me=function(){me.dispose(),s.delete(u),u.removeEventListener("dispose",Me)};void 0!==_&&_.texture.dispose();const E=void 0!==u.morphAttributes.position,w=void 0!==u.morphAttributes.normal,T=void 0!==u.morphAttributes.color,j=u.morphAttributes.position||[],Q=u.morphAttributes.normal||[],ae=u.morphAttributes.color||[];let xe=0;!0===E&&(xe=1),!0===w&&(xe=2),!0===T&&(xe=3);let he=u.attributes.position.count*xe,A=1;he>e.maxTextureSize&&(A=Math.ceil(he/e.maxTextureSize),he=e.maxTextureSize);const te=new Float32Array(he*A*4*y),me=new xh(te,he,A,y);me.format=Ji,me.type=No,me.needsUpdate=!0;const ve=4*xe;for(let ne=0;ne<y;ne++){const ue=j[ne],se=Q[ne],we=ae[ne],Fe=he*A*4*ne;for(let We=0;We<ue.count;We++){const $e=We*ve;!0===E&&(o.fromBufferAttribute(ue,We),!0===ue.normalized&&k0(o,ue),te[Fe+$e+0]=o.x,te[Fe+$e+1]=o.y,te[Fe+$e+2]=o.z,te[Fe+$e+3]=0),!0===w&&(o.fromBufferAttribute(se,We),!0===se.normalized&&k0(o,se),te[Fe+$e+4]=o.x,te[Fe+$e+5]=o.y,te[Fe+$e+6]=o.z,te[Fe+$e+7]=0),!0===T&&(o.fromBufferAttribute(we,We),!0===we.normalized&&k0(o,se),te[Fe+$e+8]=o.x,te[Fe+$e+9]=o.y,te[Fe+$e+10]=o.z,te[Fe+$e+11]=4===we.itemSize?o.w:1)}}_={count:y,texture:me,size:new Ve(he,A)},s.set(u,_),u.addEventListener("dispose",Me)}let g=0;for(let E=0;E<f.length;E++)g+=f[E];const m=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",m),d.getUniforms().setValue(n,"morphTargetInfluences",f),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const p=void 0===f?0:f.length;let y=i[u.id];if(void 0===y||y.length!==p){y=[];for(let w=0;w<p;w++)y[w]=[w,0];i[u.id]=y}for(let w=0;w<p;w++){const T=y[w];T[0]=w,T[1]=f[w]}y.sort(M9);for(let w=0;w<8;w++)w<p&&y[w][1]?(a[w][0]=y[w][0],a[w][1]=y[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(w9);const _=u.morphAttributes.position,g=u.morphAttributes.normal;let m=0;for(let w=0;w<8;w++){const T=a[w],j=T[0],Q=T[1];j!==Number.MAX_SAFE_INTEGER&&Q?(_&&u.getAttribute("morphTarget"+w)!==_[j]&&u.setAttribute("morphTarget"+w,_[j]),g&&u.getAttribute("morphNormal"+w)!==g[j]&&u.setAttribute("morphNormal"+w,g[j]),r[w]=Q,m+=Q):(_&&!0===u.hasAttribute("morphTarget"+w)&&u.deleteAttribute("morphTarget"+w),g&&!0===u.hasAttribute("morphNormal"+w)&&u.deleteAttribute("morphNormal"+w),r[w]=0)}const E=u.morphTargetsRelative?1:1-m;d.getUniforms().setValue(n,"morphTargetBaseInfluence",E),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function S9(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,h=e.get(l,l.geometry);return r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),h},dispose:function o(){r=new WeakMap}}}const LA=new cr,NA=new xh,OA=new wp,FA=new Sh,kA=[],BA=[],UA=new Float32Array(16),HA=new Float32Array(9),VA=new Float32Array(4);function Oc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=kA[r];if(void 0===s&&(s=new Float32Array(r),kA[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Qi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function zi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Wp(n,e){let t=BA[e];void 0===t&&(t=new Int32Array(e),BA[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function T9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function C9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qi(t,e))return;n.uniform2fv(this.addr,e),zi(t,e)}}function D9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Qi(t,e))return;n.uniform3fv(this.addr,e),zi(t,e)}}function A9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qi(t,e))return;n.uniform4fv(this.addr,e),zi(t,e)}}function I9(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Qi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),zi(t,e)}else{if(Qi(t,i))return;VA.set(i),n.uniformMatrix2fv(this.addr,!1,VA),zi(t,i)}}function P9(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Qi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),zi(t,e)}else{if(Qi(t,i))return;HA.set(i),n.uniformMatrix3fv(this.addr,!1,HA),zi(t,i)}}function R9(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Qi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),zi(t,e)}else{if(Qi(t,i))return;UA.set(i),n.uniformMatrix4fv(this.addr,!1,UA),zi(t,i)}}function L9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function N9(n,e){const t=this.cache;Qi(t,e)||(n.uniform2iv(this.addr,e),zi(t,e))}function O9(n,e){const t=this.cache;Qi(t,e)||(n.uniform3iv(this.addr,e),zi(t,e))}function F9(n,e){const t=this.cache;Qi(t,e)||(n.uniform4iv(this.addr,e),zi(t,e))}function k9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function B9(n,e){const t=this.cache;Qi(t,e)||(n.uniform2uiv(this.addr,e),zi(t,e))}function U9(n,e){const t=this.cache;Qi(t,e)||(n.uniform3uiv(this.addr,e),zi(t,e))}function H9(n,e){const t=this.cache;Qi(t,e)||(n.uniform4uiv(this.addr,e),zi(t,e))}function V9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||LA,r)}function z9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||OA,r)}function G9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||FA,r)}function W9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||NA,r)}function $9(n,e){n.uniform1fv(this.addr,e)}function q9(n,e){const t=Oc(e,this.size,2);n.uniform2fv(this.addr,t)}function X9(n,e){const t=Oc(e,this.size,3);n.uniform3fv(this.addr,t)}function Y9(n,e){const t=Oc(e,this.size,4);n.uniform4fv(this.addr,t)}function K9(n,e){const t=Oc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Z9(n,e){const t=Oc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function J9(n,e){const t=Oc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Q9(n,e){n.uniform1iv(this.addr,e)}function e$(n,e){n.uniform2iv(this.addr,e)}function t$(n,e){n.uniform3iv(this.addr,e)}function n$(n,e){n.uniform4iv(this.addr,e)}function i$(n,e){n.uniform1uiv(this.addr,e)}function r$(n,e){n.uniform2uiv(this.addr,e)}function s$(n,e){n.uniform3uiv(this.addr,e)}function o$(n,e){n.uniform4uiv(this.addr,e)}function a$(n,e,t){const i=e.length,r=Wp(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||LA,r[s])}function l$(n,e,t){const i=e.length,r=Wp(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||OA,r[s])}function c$(n,e,t){const i=e.length,r=Wp(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||FA,r[s])}function u$(n,e,t){const i=e.length,r=Wp(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||NA,r[s])}function d$(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function j9(n){switch(n){case 5126:return T9;case 35664:return C9;case 35665:return D9;case 35666:return A9;case 35674:return I9;case 35675:return P9;case 35676:return R9;case 5124:case 35670:return L9;case 35667:case 35671:return N9;case 35668:case 35672:return O9;case 35669:case 35673:return F9;case 5125:return k9;case 36294:return B9;case 36295:return U9;case 36296:return H9;case 35678:case 36198:case 36298:case 36306:case 35682:return V9;case 35679:case 36299:case 36307:return z9;case 35680:case 36300:case 36308:case 36293:return G9;case 36289:case 36303:case 36311:case 36292:return W9}}(e.type)}function zA(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function h$(n){switch(n){case 5126:return $9;case 35664:return q9;case 35665:return X9;case 35666:return Y9;case 35674:return K9;case 35675:return Z9;case 35676:return J9;case 5124:case 35670:return Q9;case 35667:case 35671:return e$;case 35668:case 35672:return t$;case 35669:case 35673:return n$;case 5125:return i$;case 36294:return r$;case 36295:return s$;case 36296:return o$;case 35678:case 36198:case 36298:case 36306:case 35682:return a$;case 35679:case 36299:case 36307:return l$;case 35680:case 36300:case 36308:case 36293:return c$;case 36289:case 36303:case 36311:case 36292:return u$}}(e.type)}function GA(n){this.id=n,this.seq=[],this.map={}}zA.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),zi(e,n)},GA.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const B0=/(\w+)(\])?(\[|\.)?/g;function WA(n,e){n.seq.push(e),n.map[e.id]=e}function f$(n,e,t){const i=n.name,r=i.length;for(B0.lastIndex=0;;){const s=B0.exec(i),o=B0.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){WA(t,void 0===c?new d$(a,n,e):new zA(a,n,e));break}{let h=t.map[a];void 0===h&&(h=new GA(a),WA(t,h)),t=h}}}function Wo(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i);f$(r,n.getUniformLocation(e,r.name),this)}}function jA(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}Wo.prototype.setValue=function(n,e,t,i){const r=this.map[e];void 0!==r&&r.setValue(n,t,i)},Wo.prototype.setOptional=function(n,e,t){const i=e[t];void 0!==i&&this.setValue(n,t,i)},Wo.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];!1!==a.needsUpdate&&o.setValue(n,a.value,i)}},Wo.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};let p$=0;function $A(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&""===r?"":t.toUpperCase()+"\n\n"+r+"\n\n"+function m$(n){const e=n.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(n.getShaderSource(e))}function y$(n,e){const t=function g$(n){switch(n){case Oo:return["Linear","( value )"];case $n:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function _$(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Ch(n){return""!==n}function qA(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function XA(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const w$=/^[ \t]*#include +<([\w\d./]+)>/gm;function U0(n){return n.replace(w$,M$)}function M$(n,e){const t=nn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return U0(t)}const E$=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,S$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function YA(n){return n.replace(S$,KA).replace(E$,T$)}function T$(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),KA(0,e,t,i)}function KA(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function ZA(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function R$(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function C$(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function D$(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function A$(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),h=function I$(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),d=function P$(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e/32+1)+3,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function v$(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ch).join("\n")}(t),p=function b$(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),y=r.createProgram();let _,g,m=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(_=[p].filter(Ch).join("\n"),_.length>0&&(_+="\n"),g=[f,p].filter(Ch).join("\n"),g.length>0&&(g+="\n")):(_=[ZA(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ch).join("\n"),g=[f,ZA(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?nn.tonemapping_pars_fragment:"",0!==t.toneMapping?_$("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nn.encodings_pars_fragment,y$("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Ch).join("\n")),o=U0(o),o=qA(o,t),o=XA(o,t),a=U0(a),a=qA(a,t),a=XA(a,t),o=YA(o),a=YA(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(m="#version 300 es\n",_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,g=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const w=m+g+a,T=jA(r,35633,m+_+o),j=jA(r,35632,w);if(r.attachShader(y,T),r.attachShader(y,j),void 0!==t.index0AttributeName?r.bindAttribLocation(y,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const xe=r.getProgramInfoLog(y).trim(),he=r.getShaderInfoLog(T).trim(),A=r.getShaderInfoLog(j).trim();let te=!0,me=!0;if(!1===r.getProgramParameter(y,35714)){te=!1;const ve=$A(r,T,"vertex"),Me=$A(r,j,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+xe+"\n"+ve+"\n"+Me)}else""!==xe?console.warn("THREE.WebGLProgram: Program Info Log:",xe):(""===he||""===A)&&(me=!1);me&&(this.diagnostics={runnable:te,programLog:xe,vertexShader:{log:he,prefix:_},fragmentShader:{log:A,prefix:g}})}let Q,ae;return r.deleteShader(T),r.deleteShader(j),this.getUniforms=function(){return void 0===Q&&(Q=new Wo(r,y)),Q},this.getAttributes=function(){return void 0===ae&&(ae=function x$(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,y)),ae},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=p$++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=T,this.fragmentShader=j,this}let L$=0;class N${constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const i=new O$;t.set(e,i)}return t.get(e)}}class O${constructor(){this.id=L$++,this.usedTimes=0}}function F$(n,e,t,i,r,s,o){const a=new _0,l=new N$,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.floatVertexTextures,f=r.maxVertexUniforms,p=r.vertexTextures;let y=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function m(A,te,me,ve,Me){const ne=ve.fog,ue=Me.geometry,we=(A.isMeshStandardMaterial?t:e).get(A.envMap||(A.isMeshStandardMaterial?ve.environment:null)),Fe=!we||306!==we.mapping&&307!==we.mapping?null:we.image.height,We=_[A.type],$e=Me.isSkinnedMesh?function g(A){const me=A.skeleton.bones;if(d)return 1024;{const Me=Math.floor((f-20)/4),ne=Math.min(Me,me.length);return ne<me.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+me.length+" bones. This GPU supports "+ne+"."),0):ne}}(Me):0;null!==A.precision&&(y=r.getMaxPrecision(A.precision),y!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",y,"instead."));const gt=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,vt=void 0!==gt?gt.length:0;let Be,Pt,It,at,Dt=0;if(void 0!==ue.morphAttributes.position&&(Dt=1),void 0!==ue.morphAttributes.normal&&(Dt=2),void 0!==ue.morphAttributes.color&&(Dt=3),We){const Ze=Ds[We];Be=Ze.vertexShader,Pt=Ze.fragmentShader}else Be=A.vertexShader,Pt=A.fragmentShader,l.update(A),It=l.getVertexShaderID(A),at=l.getFragmentShaderID(A);const ct=n.getRenderTarget(),Se=A.clearcoat>0;return{isWebGL2:u,shaderID:We,shaderName:A.type,vertexShader:Be,fragmentShader:Pt,defines:A.defines,customVertexShaderID:It,customFragmentShaderID:at,isRawShaderMaterial:!0===A.isRawShaderMaterial,glslVersion:A.glslVersion,precision:y,instancing:!0===Me.isInstancedMesh,instancingColor:!0===Me.isInstancedMesh&&null!==Me.instanceColor,supportsVertexTextures:p,outputEncoding:null===ct?n.outputEncoding:!0===ct.isXRRenderTarget?ct.texture.encoding:Oo,map:!!A.map,matcap:!!A.matcap,envMap:!!we,envMapMode:we&&we.mapping,envMapCubeUVHeight:Fe,lightMap:!!A.lightMap,aoMap:!!A.aoMap,emissiveMap:!!A.emissiveMap,bumpMap:!!A.bumpMap,normalMap:!!A.normalMap,objectSpaceNormalMap:1===A.normalMapType,tangentSpaceNormalMap:0===A.normalMapType,decodeVideoTexture:!!A.map&&!0===A.map.isVideoTexture&&A.map.encoding===$n,clearcoat:Se,clearcoatMap:Se&&!!A.clearcoatMap,clearcoatRoughnessMap:Se&&!!A.clearcoatRoughnessMap,clearcoatNormalMap:Se&&!!A.clearcoatNormalMap,displacementMap:!!A.displacementMap,roughnessMap:!!A.roughnessMap,metalnessMap:!!A.metalnessMap,specularMap:!!A.specularMap,specularIntensityMap:!!A.specularIntensityMap,specularColorMap:!!A.specularColorMap,opaque:!1===A.transparent&&1===A.blending,alphaMap:!!A.alphaMap,alphaTest:A.alphaTest>0,gradientMap:!!A.gradientMap,sheen:A.sheen>0,sheenColorMap:!!A.sheenColorMap,sheenRoughnessMap:!!A.sheenRoughnessMap,transmission:A.transmission>0,transmissionMap:!!A.transmissionMap,thicknessMap:!!A.thicknessMap,combine:A.combine,vertexTangents:!!A.normalMap&&!!ue.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:!0===A.vertexColors&&!!ue.attributes.color&&4===ue.attributes.color.itemSize,vertexUvs:!!(A.map||A.bumpMap||A.normalMap||A.specularMap||A.alphaMap||A.emissiveMap||A.roughnessMap||A.metalnessMap||A.clearcoatMap||A.clearcoatRoughnessMap||A.clearcoatNormalMap||A.displacementMap||A.transmissionMap||A.thicknessMap||A.specularIntensityMap||A.specularColorMap||A.sheenColorMap||A.sheenRoughnessMap),uvsVertexOnly:!(A.map||A.bumpMap||A.normalMap||A.specularMap||A.alphaMap||A.emissiveMap||A.roughnessMap||A.metalnessMap||A.clearcoatNormalMap||A.transmission>0||A.transmissionMap||A.thicknessMap||A.specularIntensityMap||A.specularColorMap||A.sheen>0||A.sheenColorMap||A.sheenRoughnessMap||!A.displacementMap),fog:!!ne,useFog:A.fog,fogExp2:ne&&ne.isFogExp2,flatShading:!!A.flatShading,sizeAttenuation:A.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===Me.isSkinnedMesh&&$e>0,maxBones:$e,useVertexTexture:d,morphTargets:void 0!==ue.morphAttributes.position,morphNormals:void 0!==ue.morphAttributes.normal,morphColors:void 0!==ue.morphAttributes.color,morphTargetsCount:vt,morphTextureStride:Dt,numDirLights:te.directional.length,numPointLights:te.point.length,numSpotLights:te.spot.length,numRectAreaLights:te.rectArea.length,numHemiLights:te.hemi.length,numDirLightShadows:te.directionalShadowMap.length,numPointLightShadows:te.pointShadowMap.length,numSpotLightShadows:te.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&me.length>0,shadowMapType:n.shadowMap.type,toneMapping:A.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:2===A.side,flipSided:1===A.side,depthPacking:void 0!==A.depthPacking&&A.depthPacking,index0AttributeName:A.index0AttributeName,extensionDerivatives:A.extensions&&A.extensions.derivatives,extensionFragDepth:A.extensions&&A.extensions.fragDepth,extensionDrawBuffers:A.extensions&&A.extensions.drawBuffers,extensionShaderTextureLOD:A.extensions&&A.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}},getProgramCacheKey:function E(A){const te=[];if(A.shaderID?te.push(A.shaderID):(te.push(A.customVertexShaderID),te.push(A.customFragmentShaderID)),void 0!==A.defines)for(const me in A.defines)te.push(me),te.push(A.defines[me]);return!1===A.isRawShaderMaterial&&(function w(A,te){A.push(te.precision),A.push(te.outputEncoding),A.push(te.envMapMode),A.push(te.envMapCubeUVHeight),A.push(te.combine),A.push(te.vertexUvs),A.push(te.fogExp2),A.push(te.sizeAttenuation),A.push(te.maxBones),A.push(te.morphTargetsCount),A.push(te.morphAttributeCount),A.push(te.numDirLights),A.push(te.numPointLights),A.push(te.numSpotLights),A.push(te.numHemiLights),A.push(te.numRectAreaLights),A.push(te.numDirLightShadows),A.push(te.numPointLightShadows),A.push(te.numSpotLightShadows),A.push(te.shadowMapType),A.push(te.toneMapping),A.push(te.numClippingPlanes),A.push(te.numClipIntersection)}(te,A),function T(A,te){a.disableAll(),te.isWebGL2&&a.enable(0),te.supportsVertexTextures&&a.enable(1),te.instancing&&a.enable(2),te.instancingColor&&a.enable(3),te.map&&a.enable(4),te.matcap&&a.enable(5),te.envMap&&a.enable(6),te.lightMap&&a.enable(7),te.aoMap&&a.enable(8),te.emissiveMap&&a.enable(9),te.bumpMap&&a.enable(10),te.normalMap&&a.enable(11),te.objectSpaceNormalMap&&a.enable(12),te.tangentSpaceNormalMap&&a.enable(13),te.clearcoat&&a.enable(14),te.clearcoatMap&&a.enable(15),te.clearcoatRoughnessMap&&a.enable(16),te.clearcoatNormalMap&&a.enable(17),te.displacementMap&&a.enable(18),te.specularMap&&a.enable(19),te.roughnessMap&&a.enable(20),te.metalnessMap&&a.enable(21),te.gradientMap&&a.enable(22),te.alphaMap&&a.enable(23),te.alphaTest&&a.enable(24),te.vertexColors&&a.enable(25),te.vertexAlphas&&a.enable(26),te.vertexUvs&&a.enable(27),te.vertexTangents&&a.enable(28),te.uvsVertexOnly&&a.enable(29),te.fog&&a.enable(30),A.push(a.mask),a.disableAll(),te.useFog&&a.enable(0),te.flatShading&&a.enable(1),te.logarithmicDepthBuffer&&a.enable(2),te.skinning&&a.enable(3),te.useVertexTexture&&a.enable(4),te.morphTargets&&a.enable(5),te.morphNormals&&a.enable(6),te.morphColors&&a.enable(7),te.premultipliedAlpha&&a.enable(8),te.shadowMapEnabled&&a.enable(9),te.physicallyCorrectLights&&a.enable(10),te.doubleSided&&a.enable(11),te.flipSided&&a.enable(12),te.depthPacking&&a.enable(13),te.dithering&&a.enable(14),te.specularIntensityMap&&a.enable(15),te.specularColorMap&&a.enable(16),te.transmission&&a.enable(17),te.transmissionMap&&a.enable(18),te.thicknessMap&&a.enable(19),te.sheen&&a.enable(20),te.sheenColorMap&&a.enable(21),te.sheenRoughnessMap&&a.enable(22),te.decodeVideoTexture&&a.enable(23),te.opaque&&a.enable(24),A.push(a.mask)}(te,A),te.push(n.outputEncoding)),te.push(A.customProgramCacheKey),te.join()},getUniforms:function j(A){const te=_[A.type];let me;return me=te?lj.clone(Ds[te].uniforms):A.uniforms,me},acquireProgram:function Q(A,te){let me;for(let ve=0,Me=c.length;ve<Me;ve++){const ne=c[ve];if(ne.cacheKey===te){me=ne,++me.usedTimes;break}}return void 0===me&&(me=new R$(n,te,A,s),c.push(me)),me},releaseProgram:function ae(A){if(0==--A.usedTimes){const te=c.indexOf(A);c[te]=c[c.length-1],c.pop(),A.destroy()}},releaseShaderCache:function xe(A){l.remove(A)},programs:c,dispose:function he(){l.dispose()}}}function k$(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function B$(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function JA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function QA(){const n=[];let e=0;const t=[],i=[],r=[];function o(h,d,f,p,y,_){let g=n[e];return void 0===g?(g={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:y,group:_},n[e]=g):(g.id=h.id,g.object=h,g.geometry=d,g.material=f,g.groupOrder=p,g.renderOrder=h.renderOrder,g.z=y,g.group=_),e++,g}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(h,d,f,p,y,_){const g=o(h,d,f,p,y,_);f.transmission>0?i.push(g):!0===f.transparent?r.push(g):t.push(g)},unshift:function l(h,d,f,p,y,_){const g=o(h,d,f,p,y,_);f.transmission>0?i.unshift(g):!0===f.transparent?r.unshift(g):t.unshift(g)},finish:function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(h,d){t.length>1&&t.sort(h||B$),i.length>1&&i.sort(d||JA),r.length>1&&r.sort(d||JA)}}}function U$(){let n=new WeakMap;return{get:function e(i,r){let s;return!1===n.has(i)?(s=new QA,n.set(i,[s])):r>=n.get(i).length?(s=new QA,n.get(i).push(s)):s=n.get(i)[r],s},dispose:function t(){n=new WeakMap}}}function H$(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new k,color:new rt};break;case"SpotLight":t={position:new k,direction:new k,color:new rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new k,color:new rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new k,skyColor:new rt,groundColor:new rt};break;case"RectAreaLight":t={color:new rt,position:new k,halfWidth:new k,halfHeight:new k}}return n[e.id]=t,t}}}let z$=0;function G$(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function W$(n,e){const t=new H$,i=function V$(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new k);const s=new k,o=new mt,a=new mt;return{setup:function l(u,h){let d=0,f=0,p=0;for(let xe=0;xe<9;xe++)r.probe[xe].set(0,0,0);let y=0,_=0,g=0,m=0,E=0,w=0,T=0,j=0;u.sort(G$);const Q=!0!==h?Math.PI:1;for(let xe=0,he=u.length;xe<he;xe++){const A=u[xe],te=A.color,me=A.intensity,ve=A.distance,Me=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)d+=te.r*me*Q,f+=te.g*me*Q,p+=te.b*me*Q;else if(A.isLightProbe)for(let ne=0;ne<9;ne++)r.probe[ne].addScaledVector(A.sh.coefficients[ne],me);else if(A.isDirectionalLight){const ne=t.get(A);if(ne.color.copy(A.color).multiplyScalar(A.intensity*Q),A.castShadow){const ue=A.shadow,se=i.get(A);se.shadowBias=ue.bias,se.shadowNormalBias=ue.normalBias,se.shadowRadius=ue.radius,se.shadowMapSize=ue.mapSize,r.directionalShadow[y]=se,r.directionalShadowMap[y]=Me,r.directionalShadowMatrix[y]=A.shadow.matrix,w++}r.directional[y]=ne,y++}else if(A.isSpotLight){const ne=t.get(A);if(ne.position.setFromMatrixPosition(A.matrixWorld),ne.color.copy(te).multiplyScalar(me*Q),ne.distance=ve,ne.coneCos=Math.cos(A.angle),ne.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),ne.decay=A.decay,A.castShadow){const ue=A.shadow,se=i.get(A);se.shadowBias=ue.bias,se.shadowNormalBias=ue.normalBias,se.shadowRadius=ue.radius,se.shadowMapSize=ue.mapSize,r.spotShadow[g]=se,r.spotShadowMap[g]=Me,r.spotShadowMatrix[g]=A.shadow.matrix,j++}r.spot[g]=ne,g++}else if(A.isRectAreaLight){const ne=t.get(A);ne.color.copy(te).multiplyScalar(me),ne.halfWidth.set(.5*A.width,0,0),ne.halfHeight.set(0,.5*A.height,0),r.rectArea[m]=ne,m++}else if(A.isPointLight){const ne=t.get(A);if(ne.color.copy(A.color).multiplyScalar(A.intensity*Q),ne.distance=A.distance,ne.decay=A.decay,A.castShadow){const ue=A.shadow,se=i.get(A);se.shadowBias=ue.bias,se.shadowNormalBias=ue.normalBias,se.shadowRadius=ue.radius,se.shadowMapSize=ue.mapSize,se.shadowCameraNear=ue.camera.near,se.shadowCameraFar=ue.camera.far,r.pointShadow[_]=se,r.pointShadowMap[_]=Me,r.pointShadowMatrix[_]=A.shadow.matrix,T++}r.point[_]=ne,_++}else if(A.isHemisphereLight){const ne=t.get(A);ne.skyColor.copy(A.color).multiplyScalar(me*Q),ne.groundColor.copy(A.groundColor).multiplyScalar(me*Q),r.hemi[E]=ne,E++}}m>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=et.LTC_FLOAT_1,r.rectAreaLTC2=et.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=et.LTC_HALF_1,r.rectAreaLTC2=et.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;const ae=r.hash;(ae.directionalLength!==y||ae.pointLength!==_||ae.spotLength!==g||ae.rectAreaLength!==m||ae.hemiLength!==E||ae.numDirectionalShadows!==w||ae.numPointShadows!==T||ae.numSpotShadows!==j)&&(r.directional.length=y,r.spot.length=g,r.rectArea.length=m,r.point.length=_,r.hemi.length=E,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=T,r.pointShadowMap.length=T,r.spotShadow.length=j,r.spotShadowMap.length=j,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=T,r.spotShadowMatrix.length=j,ae.directionalLength=y,ae.pointLength=_,ae.spotLength=g,ae.rectAreaLength=m,ae.hemiLength=E,ae.numDirectionalShadows=w,ae.numPointShadows=T,ae.numSpotShadows=j,r.version=z$++)},setupView:function c(u,h){let d=0,f=0,p=0,y=0,_=0;const g=h.matrixWorldInverse;for(let m=0,E=u.length;m<E;m++){const w=u[m];if(w.isDirectionalLight){const T=r.directional[d];T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(g),d++}else if(w.isSpotLight){const T=r.spot[p];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(g),T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(g),p++}else if(w.isRectAreaLight){const T=r.rectArea[y];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),T.halfWidth.set(.5*w.width,0,0),T.halfHeight.set(0,.5*w.height,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),y++}else if(w.isPointLight){const T=r.point[f];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(g),f++}else if(w.isHemisphereLight){const T=r.hemi[_];T.direction.setFromMatrixPosition(w.matrixWorld),T.direction.transformDirection(g),T.direction.normalize(),_++}}},state:r}}function eI(n,e){const t=new W$(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(h){t.setup(i,h)},setupLightsView:function c(h){t.setupView(i,h)},pushLight:function o(h){i.push(h)},pushShadow:function a(h){r.push(h)}}}function j$(n,e){let t=new WeakMap;return{get:function i(s,o=0){let a;return!1===t.has(s)?(a=new eI(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new eI(n,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function r(){t=new WeakMap}}}class H0 extends _i{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}H0.prototype.isMeshDepthMaterial=!0;class V0 extends _i{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new k,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function tI(n,e,t){let i=new Vp;const r=new Ve,s=new Ve,o=new Mn,a=new H0({depthPacking:3201}),l=new V0,c={},u=t.maxTextureSize,h={0:1,1:0,2:2},d=new hs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new Ct;p.setAttribute("position",new Ln(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Ci(p,d),_=this;function g(w,T){const j=e.update(y);d.defines.VSM_SAMPLES!==w.blurSamples&&(d.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),d.uniforms.shadow_pass.value=w.map.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(T,null,j,d,y,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(T,null,j,f,y,null)}function m(w,T,j,Q,ae,xe){let he=null;const A=!0===j.isPointLight?w.customDistanceMaterial:w.customDepthMaterial;if(he=void 0!==A?A:!0===j.isPointLight?l:a,n.localClippingEnabled&&!0===T.clipShadows&&0!==T.clippingPlanes.length||T.displacementMap&&0!==T.displacementScale||T.alphaMap&&T.alphaTest>0){const te=he.uuid,me=T.uuid;let ve=c[te];void 0===ve&&(ve={},c[te]=ve);let Me=ve[me];void 0===Me&&(Me=he.clone(),ve[me]=Me),he=Me}return he.visible=T.visible,he.wireframe=T.wireframe,he.side=3===xe?null!==T.shadowSide?T.shadowSide:T.side:null!==T.shadowSide?T.shadowSide:h[T.side],he.alphaMap=T.alphaMap,he.alphaTest=T.alphaTest,he.clipShadows=T.clipShadows,he.clippingPlanes=T.clippingPlanes,he.clipIntersection=T.clipIntersection,he.displacementMap=T.displacementMap,he.displacementScale=T.displacementScale,he.displacementBias=T.displacementBias,he.wireframeLinewidth=T.wireframeLinewidth,he.linewidth=T.linewidth,!0===j.isPointLight&&!0===he.isMeshDistanceMaterial&&(he.referencePosition.setFromMatrixPosition(j.matrixWorld),he.nearDistance=Q,he.farDistance=ae),he}function E(w,T,j,Q,ae){if(!1===w.visible)return;if(w.layers.test(T.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&3===ae)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,w.matrixWorld);const A=e.update(w),te=w.material;if(Array.isArray(te)){const me=A.groups;for(let ve=0,Me=me.length;ve<Me;ve++){const ne=me[ve],ue=te[ne.materialIndex];if(ue&&ue.visible){const se=m(w,ue,Q,j.near,j.far,ae);n.renderBufferDirect(j,null,A,se,w,ne)}}}else if(te.visible){const me=m(w,te,Q,j.near,j.far,ae);n.renderBufferDirect(j,null,A,me,w,null)}}const he=w.children;for(let A=0,te=he.length;A<te;A++)E(he[A],T,j,Q,ae)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(w,T,j){if(!1===_.enabled||!1===_.autoUpdate&&!1===_.needsUpdate||0===w.length)return;const Q=n.getRenderTarget(),ae=n.getActiveCubeFace(),xe=n.getActiveMipmapLevel(),he=n.state;he.setBlending(0),he.buffers.color.setClear(1,1,1,1),he.buffers.depth.setTest(!0),he.setScissorTest(!1);for(let A=0,te=w.length;A<te;A++){const me=w[A],ve=me.shadow;if(void 0===ve){console.warn("THREE.WebGLShadowMap:",me,"has no shadow.");continue}if(!1===ve.autoUpdate&&!1===ve.needsUpdate)continue;r.copy(ve.mapSize);const Me=ve.getFrameExtents();if(r.multiply(Me),s.copy(ve.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Me.x),r.x=s.x*Me.x,ve.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Me.y),r.y=s.y*Me.y,ve.mapSize.y=s.y)),null===ve.map&&!ve.isPointLightShadow&&3===this.type){const ue={minFilter:ni,magFilter:ni,format:Ji};ve.map=new ur(r.x,r.y,ue),ve.map.texture.name=me.name+".shadowMap",ve.mapPass=new ur(r.x,r.y,ue),ve.camera.updateProjectionMatrix()}null===ve.map&&(ve.map=new ur(r.x,r.y,{minFilter:Ti,magFilter:Ti,format:Ji}),ve.map.texture.name=me.name+".shadowMap",ve.camera.updateProjectionMatrix()),n.setRenderTarget(ve.map),n.clear();const ne=ve.getViewportCount();for(let ue=0;ue<ne;ue++){const se=ve.getViewport(ue);o.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),he.viewport(o),ve.updateMatrices(me,ue),i=ve.getFrustum(),E(T,j,ve.camera,me,this.type)}!ve.isPointLightShadow&&3===this.type&&g(ve,j),ve.needsUpdate=!1}_.needsUpdate=!1,n.setRenderTarget(Q,ae,xe)}}function X$(n,e,t){const i=t.isWebGL2,a=new function r(){let ce=!1;const dt=new Mn;let ot=null;const zt=new Mn(0,0,0,0);return{setMask:function(lt){ot!==lt&&!ce&&(n.colorMask(lt,lt,lt,lt),ot=lt)},setLocked:function(lt){ce=lt},setClear:function(lt,Ke,Vt,hn,er){!0===er&&(lt*=hn,Ke*=hn,Vt*=hn),dt.set(lt,Ke,Vt,hn),!1===zt.equals(dt)&&(n.clearColor(lt,Ke,Vt,hn),zt.copy(dt))},reset:function(){ce=!1,ot=null,zt.set(-1,0,0,0)}}},l=new function s(){let ce=!1,dt=null,ot=null,zt=null;return{setTest:function(lt){lt?Dt(2929):Be(2929)},setMask:function(lt){dt!==lt&&!ce&&(n.depthMask(lt),dt=lt)},setFunc:function(lt){if(ot!==lt){if(lt)switch(lt){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);ot=lt}},setLocked:function(lt){ce=lt},setClear:function(lt){zt!==lt&&(n.clearDepth(lt),zt=lt)},reset:function(){ce=!1,dt=null,ot=null,zt=null}}},c=new function o(){let ce=!1,dt=null,ot=null,zt=null,lt=null,Ke=null,Vt=null,hn=null,er=null;return{setTest:function(Nn){ce||(Nn?Dt(2960):Be(2960))},setMask:function(Nn){dt!==Nn&&!ce&&(n.stencilMask(Nn),dt=Nn)},setFunc:function(Nn,Rs,Ls){(ot!==Nn||zt!==Rs||lt!==Ls)&&(n.stencilFunc(Nn,Rs,Ls),ot=Nn,zt=Rs,lt=Ls)},setOp:function(Nn,Rs,Ls){(Ke!==Nn||Vt!==Rs||hn!==Ls)&&(n.stencilOp(Nn,Rs,Ls),Ke=Nn,Vt=Rs,hn=Ls)},setLocked:function(Nn){ce=Nn},setClear:function(Nn){er!==Nn&&(n.clearStencil(Nn),er=Nn)},reset:function(){ce=!1,dt=null,ot=null,zt=null,lt=null,Ke=null,Vt=null,hn=null,er=null}}};let u={},h={},d=new WeakMap,f=[],p=null,y=!1,_=null,g=null,m=null,E=null,w=null,T=null,j=null,Q=!1,ae=null,xe=null,he=null,A=null,te=null;const me=n.getParameter(35661);let ve=!1,Me=0;const ne=n.getParameter(7938);-1!==ne.indexOf("WebGL")?(Me=parseFloat(/^WebGL (\d)/.exec(ne)[1]),ve=Me>=1):-1!==ne.indexOf("OpenGL ES")&&(Me=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),ve=Me>=2);let ue=null,se={};const we=n.getParameter(3088),Fe=n.getParameter(2978),We=(new Mn).fromArray(we),$e=(new Mn).fromArray(Fe);function gt(ce,dt,ot){const zt=new Uint8Array(4),lt=n.createTexture();n.bindTexture(ce,lt),n.texParameteri(ce,10241,9728),n.texParameteri(ce,10240,9728);for(let Ke=0;Ke<ot;Ke++)n.texImage2D(dt+Ke,0,6408,1,1,0,6408,5121,zt);return lt}const vt={};function Dt(ce){!0!==u[ce]&&(n.enable(ce),u[ce]=!0)}function Be(ce){!1!==u[ce]&&(n.disable(ce),u[ce]=!1)}vt[3553]=gt(3553,3553,1),vt[34067]=gt(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Dt(2929),l.setFunc(3),Ze(!1),yt(1),Dt(2884),Se(0);const ct={100:32774,101:32778,102:32779};if(i)ct[103]=32775,ct[104]=32776;else{const ce=e.get("EXT_blend_minmax");null!==ce&&(ct[103]=ce.MIN_EXT,ct[104]=ce.MAX_EXT)}const Xt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Se(ce,dt,ot,zt,lt,Ke,Vt,hn){if(0!==ce){if(!1===y&&(Dt(3042),y=!0),5===ce)lt=lt||dt,Ke=Ke||ot,Vt=Vt||zt,(dt!==g||lt!==w)&&(n.blendEquationSeparate(ct[dt],ct[lt]),g=dt,w=lt),(ot!==m||zt!==E||Ke!==T||Vt!==j)&&(n.blendFuncSeparate(Xt[ot],Xt[zt],Xt[Ke],Xt[Vt]),m=ot,E=zt,T=Ke,j=Vt),_=ce,Q=null;else if(ce!==_||hn!==Q){if((100!==g||100!==w)&&(n.blendEquation(32774),g=100,w=100),hn)switch(ce){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce)}else switch(ce){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce)}m=null,E=null,T=null,j=null,_=ce,Q=hn}}else!0===y&&(Be(3042),y=!1)}function Ze(ce){ae!==ce&&(n.frontFace(ce?2304:2305),ae=ce)}function yt(ce){0!==ce?(Dt(2884),ce!==xe&&n.cullFace(1===ce?1029:2===ce?1028:1032)):Be(2884),xe=ce}function Lt(ce,dt,ot){ce?(Dt(32823),(A!==dt||te!==ot)&&(n.polygonOffset(dt,ot),A=dt,te=ot)):Be(32823)}function Yt(ce){void 0===ce&&(ce=33984+me-1),ue!==ce&&(n.activeTexture(ce),ue=ce)}return{buffers:{color:a,depth:l,stencil:c},enable:Dt,disable:Be,bindFramebuffer:function Pt(ce,dt){return h[ce]!==dt&&(n.bindFramebuffer(ce,dt),h[ce]=dt,i&&(36009===ce&&(h[36160]=dt),36160===ce&&(h[36009]=dt)),!0)},drawBuffers:function It(ce,dt){let ot=f,zt=!1;if(ce)if(ot=d.get(dt),void 0===ot&&(ot=[],d.set(dt,ot)),ce.isWebGLMultipleRenderTargets){const lt=ce.texture;if(ot.length!==lt.length||36064!==ot[0]){for(let Ke=0,Vt=lt.length;Ke<Vt;Ke++)ot[Ke]=36064+Ke;ot.length=lt.length,zt=!0}}else 36064!==ot[0]&&(ot[0]=36064,zt=!0);else 1029!==ot[0]&&(ot[0]=1029,zt=!0);zt&&(t.isWebGL2?n.drawBuffers(ot):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ot))},useProgram:function at(ce){return p!==ce&&(n.useProgram(ce),p=ce,!0)},setBlending:Se,setMaterial:function Xe(ce,dt){2===ce.side?Be(2884):Dt(2884);let ot=1===ce.side;dt&&(ot=!ot),Ze(ot),1===ce.blending&&!1===ce.transparent?Se(0):Se(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.premultipliedAlpha),l.setFunc(ce.depthFunc),l.setTest(ce.depthTest),l.setMask(ce.depthWrite),a.setMask(ce.colorWrite);const zt=ce.stencilWrite;c.setTest(zt),zt&&(c.setMask(ce.stencilWriteMask),c.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),c.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),Lt(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),!0===ce.alphaToCoverage?Dt(32926):Be(32926)},setFlipSided:Ze,setCullFace:yt,setLineWidth:function st(ce){ce!==he&&(ve&&n.lineWidth(ce),he=ce)},setPolygonOffset:Lt,setScissorTest:function wt(ce){ce?Dt(3089):Be(3089)},activeTexture:Yt,bindTexture:function Xn(ce,dt){null===ue&&Yt();let ot=se[ue];void 0===ot&&(ot={type:void 0,texture:void 0},se[ue]=ot),(ot.type!==ce||ot.texture!==dt)&&(n.bindTexture(ce,dt||vt[ce]),ot.type=ce,ot.texture=dt)},unbindTexture:function W(){const ce=se[ue];void 0!==ce&&void 0!==ce.type&&(n.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)},compressedTexImage2D:function O(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}},texImage2D:function ke(){try{n.texImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}},texImage3D:function Ut(){try{n.texImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}},texStorage2D:function ut(){try{n.texStorage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}},texStorage3D:function At(){try{n.texStorage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}},texSubImage2D:function Le(){try{n.texSubImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}},texSubImage3D:function je(){try{n.texSubImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}},compressedTexSubImage2D:function Qe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}},scissor:function Ht(ce){!1===We.equals(ce)&&(n.scissor(ce.x,ce.y,ce.z,ce.w),We.copy(ce))},viewport:function Et(ce){!1===$e.equals(ce)&&(n.viewport(ce.x,ce.y,ce.z,ce.w),$e.copy(ce))},reset:function bt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},ue=null,se={},h={},d=new WeakMap,f=[],p=null,y=!1,_=null,g=null,m=null,E=null,w=null,T=null,j=null,Q=!1,ae=null,xe=null,he=null,A=null,te=null,We.set(0,0,n.canvas.width,n.canvas.height),$e.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function Y$(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=new WeakMap;let p;const y=new WeakMap;let _=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function g(W,O){return _?new OffscreenCanvas(W,O):bh("canvas")}function m(W,O,Le,je){let Qe=1;if((W.width>je||W.height>je)&&(Qe=je/Math.max(W.width,W.height)),Qe<1||!0===O){if("undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap){const ut=O?bp:Math.floor,At=ut(Qe*W.width),ke=ut(Qe*W.height);void 0===p&&(p=g(At,ke));const Ut=Le?g(At,ke):p;return Ut.width=At,Ut.height=ke,Ut.getContext("2d").drawImage(W,0,0,At,ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+At+"x"+ke+")."),Ut}return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W}return W}function E(W){return a0(W.width)&&a0(W.height)}function T(W,O){return W.generateMipmaps&&O&&W.minFilter!==Ti&&W.minFilter!==ni}function j(W){n.generateMipmap(W)}function Q(W,O,Le,je,Qe=!1){if(!1===a)return O;if(null!==W){if(void 0!==n[W])return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let ut=O;return 6403===O&&(5126===Le&&(ut=33326),5131===Le&&(ut=33325),5121===Le&&(ut=33321)),33319===O&&(5126===Le&&(ut=33328),5131===Le&&(ut=33327),5121===Le&&(ut=33323)),6408===O&&(5126===Le&&(ut=34836),5131===Le&&(ut=34842),5121===Le&&(ut=je===$n&&!1===Qe?35907:32856),32819===Le&&(ut=32854),32820===Le&&(ut=32855)),(33325===ut||33326===ut||33327===ut||33328===ut||34842===ut||34836===ut)&&e.get("EXT_color_buffer_float"),ut}function ae(W,O,Le){return!0===T(W,Le)||W.isFramebufferTexture&&W.minFilter!==Ti&&W.minFilter!==ni?Math.log2(Math.max(O.width,O.height))+1:void 0!==W.mipmaps&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?O.mipmaps.length:1}function xe(W){return W===Ti||1004===W||1005===W?9728:9729}function he(W){const O=W.target;O.removeEventListener("dispose",he),function te(W){const O=i.get(W);if(void 0===O.__webglInit)return;const Le=W.source,je=y.get(Le);if(je){const Qe=je[O.__cacheKey];Qe.usedTimes--,0===Qe.usedTimes&&me(W),0===Object.keys(je).length&&y.delete(Le)}i.remove(W)}(O),O.isVideoTexture&&f.delete(O)}function A(W){const O=W.target;O.removeEventListener("dispose",A),function ve(W){const O=W.texture,Le=i.get(W),je=i.get(O);if(void 0!==je.__webglTexture&&(n.deleteTexture(je.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Qe=0;Qe<6;Qe++)n.deleteFramebuffer(Le.__webglFramebuffer[Qe]),Le.__webglDepthbuffer&&n.deleteRenderbuffer(Le.__webglDepthbuffer[Qe]);else n.deleteFramebuffer(Le.__webglFramebuffer),Le.__webglDepthbuffer&&n.deleteRenderbuffer(Le.__webglDepthbuffer),Le.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Le.__webglMultisampledFramebuffer),Le.__webglColorRenderbuffer&&n.deleteRenderbuffer(Le.__webglColorRenderbuffer),Le.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Le.__webglDepthRenderbuffer);if(W.isWebGLMultipleRenderTargets)for(let Qe=0,ut=O.length;Qe<ut;Qe++){const At=i.get(O[Qe]);At.__webglTexture&&(n.deleteTexture(At.__webglTexture),o.memory.textures--),i.remove(O[Qe])}i.remove(O),i.remove(W)}(O)}function me(W){const O=i.get(W);n.deleteTexture(O.__webglTexture),delete y.get(W.source)[O.__cacheKey],o.memory.textures--}let Me=0;function we(W,O){const Le=i.get(W);if(W.isVideoTexture&&function Yt(W){const O=o.render.frame;f.get(W)!==O&&(f.set(W,O),W.update())}(W),W.version>0&&Le.__version!==W.version){const je=W.image;if(null===je)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==je.complete)return void Pt(Le,W,O);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+O),t.bindTexture(3553,Le.__webglTexture)}const gt={1e3:10497,[lr]:33071,1002:33648},vt={[Ti]:9728,1004:9984,1005:9986,[ni]:9729,1007:9985,1008:9987};function Dt(W,O,Le){if(Le?(n.texParameteri(W,10242,gt[O.wrapS]),n.texParameteri(W,10243,gt[O.wrapT]),(32879===W||35866===W)&&n.texParameteri(W,32882,gt[O.wrapR]),n.texParameteri(W,10240,vt[O.magFilter]),n.texParameteri(W,10241,vt[O.minFilter])):(n.texParameteri(W,10242,33071),n.texParameteri(W,10243,33071),(32879===W||35866===W)&&n.texParameteri(W,32882,33071),(O.wrapS!==lr||O.wrapT!==lr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(W,10240,xe(O.magFilter)),n.texParameteri(W,10241,xe(O.minFilter)),O.minFilter!==Ti&&O.minFilter!==ni&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const je=e.get("EXT_texture_filter_anisotropic");if(O.type===No&&!1===e.has("OES_texture_float_linear")||!1===a&&O.type===uc&&!1===e.has("OES_texture_half_float_linear"))return;(O.anisotropy>1||i.get(O).__currentAnisotropy)&&(n.texParameterf(W,je.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,r.getMaxAnisotropy())),i.get(O).__currentAnisotropy=O.anisotropy)}}function Be(W,O){let Le=!1;void 0===W.__webglInit&&(W.__webglInit=!0,O.addEventListener("dispose",he));const je=O.source;let Qe=y.get(je);void 0===Qe&&(Qe={},y.set(je,Qe));const ut=function se(W){const O=[];return O.push(W.wrapS),O.push(W.wrapT),O.push(W.magFilter),O.push(W.minFilter),O.push(W.anisotropy),O.push(W.internalFormat),O.push(W.format),O.push(W.type),O.push(W.generateMipmaps),O.push(W.premultiplyAlpha),O.push(W.flipY),O.push(W.unpackAlignment),O.push(W.encoding),O.join()}(O);if(ut!==W.__cacheKey){void 0===Qe[ut]&&(Qe[ut]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Le=!0),Qe[ut].usedTimes++;const At=Qe[W.__cacheKey];void 0!==At&&(Qe[W.__cacheKey].usedTimes--,0===At.usedTimes&&me(O)),W.__cacheKey=ut,W.__webglTexture=Qe[ut].texture}return Le}function Pt(W,O,Le){let je=3553;O.isDataArrayTexture&&(je=35866),O.isData3DTexture&&(je=32879);const Qe=Be(W,O),ut=O.source;if(t.activeTexture(33984+Le),t.bindTexture(je,W.__webglTexture),ut.version!==ut.__currentVersion||!0===Qe){n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const At=function w(W){return!a&&(W.wrapS!==lr||W.wrapT!==lr||W.minFilter!==Ti&&W.minFilter!==ni)}(O)&&!1===E(O.image);let ke=m(O.image,At,!1,u);ke=Xn(O,ke);const Ut=E(ke)||a,Ht=s.convert(O.format,O.encoding);let ce,Et=s.convert(O.type),bt=Q(O.internalFormat,Ht,Et,O.encoding,O.isVideoTexture);Dt(je,O,Ut);const dt=O.mipmaps,ot=a&&!0!==O.isVideoTexture,zt=void 0===W.__version,lt=ae(O,ke,Ut);if(O.isDepthTexture)bt=6402,a?bt=O.type===No?36012:1014===O.type?33190:O.type===hc?35056:33189:O.type===No&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===Pa&&6402===bt&&O.type!==mh&&1014!==O.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=mh,Et=s.convert(O.type)),O.format===dc&&6402===bt&&(bt=34041,O.type!==hc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=hc,Et=s.convert(O.type))),ot&&zt?t.texStorage2D(3553,1,bt,ke.width,ke.height):t.texImage2D(3553,0,bt,ke.width,ke.height,0,Ht,Et,null);else if(O.isDataTexture)if(dt.length>0&&Ut){ot&&zt&&t.texStorage2D(3553,lt,bt,dt[0].width,dt[0].height);for(let Ke=0,Vt=dt.length;Ke<Vt;Ke++)ce=dt[Ke],ot?t.texSubImage2D(3553,Ke,0,0,ce.width,ce.height,Ht,Et,ce.data):t.texImage2D(3553,Ke,bt,ce.width,ce.height,0,Ht,Et,ce.data);O.generateMipmaps=!1}else ot?(zt&&t.texStorage2D(3553,lt,bt,ke.width,ke.height),t.texSubImage2D(3553,0,0,0,ke.width,ke.height,Ht,Et,ke.data)):t.texImage2D(3553,0,bt,ke.width,ke.height,0,Ht,Et,ke.data);else if(O.isCompressedTexture){ot&&zt&&t.texStorage2D(3553,lt,bt,dt[0].width,dt[0].height);for(let Ke=0,Vt=dt.length;Ke<Vt;Ke++)ce=dt[Ke],O.format!==Ji?null!==Ht?ot?t.compressedTexSubImage2D(3553,Ke,0,0,ce.width,ce.height,Ht,ce.data):t.compressedTexImage2D(3553,Ke,bt,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ot?t.texSubImage2D(3553,Ke,0,0,ce.width,ce.height,Ht,Et,ce.data):t.texImage2D(3553,Ke,bt,ce.width,ce.height,0,Ht,Et,ce.data)}else if(O.isDataArrayTexture)ot?(zt&&t.texStorage3D(35866,lt,bt,ke.width,ke.height,ke.depth),t.texSubImage3D(35866,0,0,0,0,ke.width,ke.height,ke.depth,Ht,Et,ke.data)):t.texImage3D(35866,0,bt,ke.width,ke.height,ke.depth,0,Ht,Et,ke.data);else if(O.isData3DTexture)ot?(zt&&t.texStorage3D(32879,lt,bt,ke.width,ke.height,ke.depth),t.texSubImage3D(32879,0,0,0,0,ke.width,ke.height,ke.depth,Ht,Et,ke.data)):t.texImage3D(32879,0,bt,ke.width,ke.height,ke.depth,0,Ht,Et,ke.data);else if(O.isFramebufferTexture)ot&&zt?t.texStorage2D(3553,lt,bt,ke.width,ke.height):t.texImage2D(3553,0,bt,ke.width,ke.height,0,Ht,Et,null);else if(dt.length>0&&Ut){ot&&zt&&t.texStorage2D(3553,lt,bt,dt[0].width,dt[0].height);for(let Ke=0,Vt=dt.length;Ke<Vt;Ke++)ce=dt[Ke],ot?t.texSubImage2D(3553,Ke,0,0,Ht,Et,ce):t.texImage2D(3553,Ke,bt,Ht,Et,ce);O.generateMipmaps=!1}else ot?(zt&&t.texStorage2D(3553,lt,bt,ke.width,ke.height),t.texSubImage2D(3553,0,0,0,Ht,Et,ke)):t.texImage2D(3553,0,bt,Ht,Et,ke);T(O,Ut)&&j(je),ut.__currentVersion=ut.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}function at(W,O,Le,je,Qe){const ut=s.convert(Le.format,Le.encoding),At=s.convert(Le.type),ke=Q(Le.internalFormat,ut,At,Le.encoding);i.get(O).__hasExternalTextures||(32879===Qe||35866===Qe?t.texImage3D(Qe,0,ke,O.width,O.height,O.depth,0,ut,At,null):t.texImage2D(Qe,0,ke,O.width,O.height,0,ut,At,null)),t.bindFramebuffer(36160,W),wt(O)?d.framebufferTexture2DMultisampleEXT(36160,je,Qe,i.get(Le).__webglTexture,0,Lt(O)):n.framebufferTexture2D(36160,je,Qe,i.get(Le).__webglTexture,0),t.bindFramebuffer(36160,null)}function ct(W,O,Le){if(n.bindRenderbuffer(36161,W),O.depthBuffer&&!O.stencilBuffer){let je=33189;if(Le||wt(O)){const Qe=O.depthTexture;Qe&&Qe.isDepthTexture&&(Qe.type===No?je=36012:1014===Qe.type&&(je=33190));const ut=Lt(O);wt(O)?d.renderbufferStorageMultisampleEXT(36161,ut,je,O.width,O.height):n.renderbufferStorageMultisample(36161,ut,je,O.width,O.height)}else n.renderbufferStorage(36161,je,O.width,O.height);n.framebufferRenderbuffer(36160,36096,36161,W)}else if(O.depthBuffer&&O.stencilBuffer){const je=Lt(O);Le&&!1===wt(O)?n.renderbufferStorageMultisample(36161,je,35056,O.width,O.height):wt(O)?d.renderbufferStorageMultisampleEXT(36161,je,35056,O.width,O.height):n.renderbufferStorage(36161,34041,O.width,O.height),n.framebufferRenderbuffer(36160,33306,36161,W)}else{const je=!0===O.isWebGLMultipleRenderTargets?O.texture[0]:O.texture,Qe=s.convert(je.format,je.encoding),ut=s.convert(je.type),At=Q(je.internalFormat,Qe,ut,je.encoding),ke=Lt(O);Le&&!1===wt(O)?n.renderbufferStorageMultisample(36161,ke,At,O.width,O.height):wt(O)?d.renderbufferStorageMultisampleEXT(36161,ke,At,O.width,O.height):n.renderbufferStorage(36161,At,O.width,O.height)}n.bindRenderbuffer(36161,null)}function Se(W){const O=i.get(W),Le=!0===W.isWebGLCubeRenderTarget;if(W.depthTexture&&!O.__autoAllocateDepthBuffer){if(Le)throw new Error("target.depthTexture not supported in Cube render targets");!function Xt(W,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,W),!O.depthTexture||!O.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),we(O.depthTexture,0);const je=i.get(O.depthTexture).__webglTexture,Qe=Lt(O);if(O.depthTexture.format===Pa)wt(O)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,je,0,Qe):n.framebufferTexture2D(36160,36096,3553,je,0);else{if(O.depthTexture.format!==dc)throw new Error("Unknown depthTexture format");wt(O)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,je,0,Qe):n.framebufferTexture2D(36160,33306,3553,je,0)}}(O.__webglFramebuffer,W)}else if(Le){O.__webglDepthbuffer=[];for(let je=0;je<6;je++)t.bindFramebuffer(36160,O.__webglFramebuffer[je]),O.__webglDepthbuffer[je]=n.createRenderbuffer(),ct(O.__webglDepthbuffer[je],W,!1)}else t.bindFramebuffer(36160,O.__webglFramebuffer),O.__webglDepthbuffer=n.createRenderbuffer(),ct(O.__webglDepthbuffer,W,!1);t.bindFramebuffer(36160,null)}function Lt(W){return Math.min(h,W.samples)}function wt(W){const O=i.get(W);return a&&W.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==O.__useRenderToTexture}function Xn(W,O){const Le=W.encoding,je=W.format,Qe=W.type;return!0===W.isCompressedTexture||!0===W.isVideoTexture||1035===W.format||Le!==Oo&&(Le===$n?!1===a?!0===e.has("EXT_sRGB")&&je===Ji?(W.format=1035,W.minFilter=ni,W.generateMipmaps=!1):O=Na.sRGBToLinear(O):(je!==Ji||Qe!==Ia)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Le)),O}this.allocateTextureUnit=function ue(){const W=Me;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),Me+=1,W},this.resetTextureUnits=function ne(){Me=0},this.setTexture2D=we,this.setTexture2DArray=function Fe(W,O){const Le=i.get(W);W.version>0&&Le.__version!==W.version?Pt(Le,W,O):(t.activeTexture(33984+O),t.bindTexture(35866,Le.__webglTexture))},this.setTexture3D=function We(W,O){const Le=i.get(W);W.version>0&&Le.__version!==W.version?Pt(Le,W,O):(t.activeTexture(33984+O),t.bindTexture(32879,Le.__webglTexture))},this.setTextureCube=function $e(W,O){const Le=i.get(W);W.version>0&&Le.__version!==W.version?function It(W,O,Le){if(6!==O.image.length)return;const je=Be(W,O),Qe=O.source;if(t.activeTexture(33984+Le),t.bindTexture(34067,W.__webglTexture),Qe.version!==Qe.__currentVersion||!0===je){n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const ut=O.isCompressedTexture||O.image[0].isCompressedTexture,At=O.image[0]&&O.image[0].isDataTexture,ke=[];for(let Ke=0;Ke<6;Ke++)ke[Ke]=ut||At?At?O.image[Ke].image:O.image[Ke]:m(O.image[Ke],!1,!0,c),ke[Ke]=Xn(O,ke[Ke]);const Ut=ke[0],Ht=E(Ut)||a,Et=s.convert(O.format,O.encoding),bt=s.convert(O.type),ce=Q(O.internalFormat,Et,bt,O.encoding),dt=a&&!0!==O.isVideoTexture,ot=void 0===W.__version;let lt,zt=ae(O,Ut,Ht);if(Dt(34067,O,Ht),ut){dt&&ot&&t.texStorage2D(34067,zt,ce,Ut.width,Ut.height);for(let Ke=0;Ke<6;Ke++){lt=ke[Ke].mipmaps;for(let Vt=0;Vt<lt.length;Vt++){const hn=lt[Vt];O.format!==Ji?null!==Et?dt?t.compressedTexSubImage2D(34069+Ke,Vt,0,0,hn.width,hn.height,Et,hn.data):t.compressedTexImage2D(34069+Ke,Vt,ce,hn.width,hn.height,0,hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):dt?t.texSubImage2D(34069+Ke,Vt,0,0,hn.width,hn.height,Et,bt,hn.data):t.texImage2D(34069+Ke,Vt,ce,hn.width,hn.height,0,Et,bt,hn.data)}}}else{lt=O.mipmaps,dt&&ot&&(lt.length>0&&zt++,t.texStorage2D(34067,zt,ce,ke[0].width,ke[0].height));for(let Ke=0;Ke<6;Ke++)if(At){dt?t.texSubImage2D(34069+Ke,0,0,0,ke[Ke].width,ke[Ke].height,Et,bt,ke[Ke].data):t.texImage2D(34069+Ke,0,ce,ke[Ke].width,ke[Ke].height,0,Et,bt,ke[Ke].data);for(let Vt=0;Vt<lt.length;Vt++){const er=lt[Vt].image[Ke].image;dt?t.texSubImage2D(34069+Ke,Vt+1,0,0,er.width,er.height,Et,bt,er.data):t.texImage2D(34069+Ke,Vt+1,ce,er.width,er.height,0,Et,bt,er.data)}}else{dt?t.texSubImage2D(34069+Ke,0,0,0,Et,bt,ke[Ke]):t.texImage2D(34069+Ke,0,ce,Et,bt,ke[Ke]);for(let Vt=0;Vt<lt.length;Vt++){const hn=lt[Vt];dt?t.texSubImage2D(34069+Ke,Vt+1,0,0,Et,bt,hn.image[Ke]):t.texImage2D(34069+Ke,Vt+1,ce,Et,bt,hn.image[Ke])}}}T(O,Ht)&&j(34067),Qe.__currentVersion=Qe.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}(Le,W,O):(t.activeTexture(33984+O),t.bindTexture(34067,Le.__webglTexture))},this.rebindTextures=function Xe(W,O,Le){const je=i.get(W);void 0!==O&&at(je.__webglFramebuffer,W,W.texture,36064,3553),void 0!==Le&&Se(W)},this.setupRenderTarget=function Ze(W){const O=W.texture,Le=i.get(W),je=i.get(O);W.addEventListener("dispose",A),!0!==W.isWebGLMultipleRenderTargets&&(void 0===je.__webglTexture&&(je.__webglTexture=n.createTexture()),je.__version=O.version,o.memory.textures++);const Qe=!0===W.isWebGLCubeRenderTarget,ut=!0===W.isWebGLMultipleRenderTargets,At=E(W)||a;if(Qe){Le.__webglFramebuffer=[];for(let ke=0;ke<6;ke++)Le.__webglFramebuffer[ke]=n.createFramebuffer()}else if(Le.__webglFramebuffer=n.createFramebuffer(),ut)if(r.drawBuffers){const ke=W.texture;for(let Ut=0,Ht=ke.length;Ut<Ht;Ut++){const Et=i.get(ke[Ut]);void 0===Et.__webglTexture&&(Et.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&W.samples>0&&!1===wt(W)){Le.__webglMultisampledFramebuffer=n.createFramebuffer(),Le.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,Le.__webglColorRenderbuffer);const ke=s.convert(O.format,O.encoding),Ut=s.convert(O.type),Ht=Q(O.internalFormat,ke,Ut,O.encoding),Et=Lt(W);n.renderbufferStorageMultisample(36161,Et,Ht,W.width,W.height),t.bindFramebuffer(36160,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,Le.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),W.depthBuffer&&(Le.__webglDepthRenderbuffer=n.createRenderbuffer(),ct(Le.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(36160,null)}if(Qe){t.bindTexture(34067,je.__webglTexture),Dt(34067,O,At);for(let ke=0;ke<6;ke++)at(Le.__webglFramebuffer[ke],W,O,36064,34069+ke);T(O,At)&&j(34067),t.unbindTexture()}else if(ut){const ke=W.texture;for(let Ut=0,Ht=ke.length;Ut<Ht;Ut++){const Et=ke[Ut],bt=i.get(Et);t.bindTexture(3553,bt.__webglTexture),Dt(3553,Et,At),at(Le.__webglFramebuffer,W,Et,36064+Ut,3553),T(Et,At)&&j(3553)}t.unbindTexture()}else{let ke=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?ke=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ke,je.__webglTexture),Dt(ke,O,At),at(Le.__webglFramebuffer,W,O,36064,ke),T(O,At)&&j(ke),t.unbindTexture()}W.depthBuffer&&Se(W)},this.updateRenderTargetMipmap=function yt(W){const O=E(W)||a,Le=!0===W.isWebGLMultipleRenderTargets?W.texture:[W.texture];for(let je=0,Qe=Le.length;je<Qe;je++){const ut=Le[je];if(T(ut,O)){const At=W.isWebGLCubeRenderTarget?34067:3553,ke=i.get(ut).__webglTexture;t.bindTexture(At,ke),j(At),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function st(W){if(a&&W.samples>0&&!1===wt(W)){const O=W.width,Le=W.height;let je=16384;const Qe=[36064],ut=W.stencilBuffer?33306:36096;W.depthBuffer&&Qe.push(ut);const At=i.get(W),ke=void 0!==At.__ignoreDepthValues&&At.__ignoreDepthValues;!1===ke&&(W.depthBuffer&&(je|=256),W.stencilBuffer&&(je|=1024)),t.bindFramebuffer(36008,At.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,At.__webglFramebuffer),!0===ke&&(n.invalidateFramebuffer(36008,[ut]),n.invalidateFramebuffer(36009,[ut])),n.blitFramebuffer(0,0,O,Le,0,0,O,Le,je,9728),n.invalidateFramebuffer(36008,Qe),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,At.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Se,this.setupFrameBufferTexture=at,this.useMultisampledRTT=wt}function K$(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Ia)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(s===mh)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===No)return 5126;if(s===uc)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Ji)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Pa)return 6402;if(s===dc)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===$n){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===$n?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===$n?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===hc?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}V0.prototype.isMeshDistanceMaterial=!0;class nI extends Pi{constructor(e=[]){super(),this.cameras=e}}nI.prototype.isArrayCamera=!0;class Fc extends _n{constructor(){super(),this.type="Group"}}Fc.prototype.isGroup=!0;const Z$={type:"move"};class z0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Fc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Fc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Fc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Z$))),c&&e.hand){o=!0;for(const y of e.hand.values()){const _=t.getJointPose(y,i);if(void 0===c.joints[y.jointName]){const m=new Fc;m.matrixAutoUpdate=!1,m.visible=!1,c.joints[y.jointName]=m,c.add(m)}const g=c.joints[y.jointName];null!==_&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=_.radius),g.visible=null!==_}const d=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&d>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class iI extends cr{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Pa)!==Pa&&u!==dc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Pa&&(i=mh),void 0===i&&u===dc&&(i=hc),super(null,r,s,o,a,l,u,i,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Ti,this.minFilter=void 0!==l?l:Ti,this.flipY=!1,this.generateMipmaps=!1}}iI.prototype.isDepthTexture=!0;class J$ extends Ra{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,h=null,d=null;const f=t.getContextAttributes();let p=null,y=null;const _=[],g=new Map,m=new Pi;m.layers.enable(1),m.viewport=new Mn;const E=new Pi;E.layers.enable(2),E.viewport=new Mn;const w=[m,E],T=new nI;T.layers.enable(1),T.layers.enable(2);let j=null,Q=null;function ae(se){const we=g.get(se.inputSource);we&&we.dispatchEvent({type:se.type,data:se.inputSource})}function xe(){g.forEach(function(se,we){se.disconnect(we)}),g.clear(),j=null,Q=null,e.setRenderTarget(p),h=null,u=null,c=null,r=null,y=null,ue.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function he(se){const we=r.inputSources;for(let Fe=0;Fe<_.length;Fe++)g.set(we[Fe],_[Fe]);for(let Fe=0;Fe<se.removed.length;Fe++){const We=se.removed[Fe],$e=g.get(We);$e&&($e.dispatchEvent({type:"disconnected",data:We}),g.delete(We))}for(let Fe=0;Fe<se.added.length;Fe++){const We=se.added[Fe],$e=g.get(We);$e&&$e.dispatchEvent({type:"connected",data:We})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let we=_[se];return void 0===we&&(we=new z0,_[se]=we),we.getTargetRaySpace()},this.getControllerGrip=function(se){let we=_[se];return void 0===we&&(we=new z0,_[se]=we),we.getGripSpace()},this.getHand=function(se){let we=_[se];return void 0===we&&(we=new z0,_[se]=we),we.getHandSpace()},this.setFramebufferScaleFactor=function(se){s=se,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){a=se,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=function(){var se=function DG(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){ID(s,i,r,o,a,"next",l)}function a(l){ID(s,i,r,o,a,"throw",l)}o(void 0)})}}(function*(we){if(r=we,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",ae),r.addEventListener("selectstart",ae),r.addEventListener("selectend",ae),r.addEventListener("squeeze",ae),r.addEventListener("squeezestart",ae),r.addEventListener("squeezeend",ae),r.addEventListener("end",xe),r.addEventListener("inputsourceschange",he),!0!==f.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),y=new ur(h.framebufferWidth,h.framebufferHeight,{format:Ji,type:Ia,encoding:e.outputEncoding});else{let Fe=null,We=null,$e=null;f.depth&&($e=f.stencil?35056:33190,Fe=f.stencil?dc:Pa,We=f.stencil?hc:mh);const gt={colorFormat:e.outputEncoding===$n?35907:32856,depthFormat:$e,scaleFactor:s};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(gt),r.updateRenderState({layers:[u]}),y=new ur(u.textureWidth,u.textureHeight,{format:Ji,type:Ia,depthTexture:new iI(u.textureWidth,u.textureHeight,We,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0}),e.properties.get(y).__ignoreDepthValues=u.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(1),o=yield r.requestReferenceSpace(a),ue.setContext(r),ue.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(we){return se.apply(this,arguments)}}();const A=new k,te=new k;function ve(se,we){null===we?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(we.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(null===r)return;T.near=E.near=m.near=se.near,T.far=E.far=m.far=se.far,(j!==T.near||Q!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),j=T.near,Q=T.far);const we=se.parent,Fe=T.cameras;ve(T,we);for(let $e=0;$e<Fe.length;$e++)ve(Fe[$e],we);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),se.position.copy(T.position),se.quaternion.copy(T.quaternion),se.scale.copy(T.scale),se.matrix.copy(T.matrix),se.matrixWorld.copy(T.matrixWorld);const We=se.children;for(let $e=0,gt=We.length;$e<gt;$e++)We[$e].updateMatrixWorld(!0);2===Fe.length?function me(se,we,Fe){A.setFromMatrixPosition(we.matrixWorld),te.setFromMatrixPosition(Fe.matrixWorld);const We=A.distanceTo(te),$e=we.projectionMatrix.elements,gt=Fe.projectionMatrix.elements,vt=$e[14]/($e[10]-1),Dt=$e[14]/($e[10]+1),Be=($e[9]+1)/$e[5],Pt=($e[9]-1)/$e[5],It=($e[8]-1)/$e[0],at=(gt[8]+1)/gt[0],ct=vt*It,Xt=vt*at,Se=We/(-It+at),Xe=Se*-It;we.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(Xe),se.translateZ(Se),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert();const Ze=vt+Se,yt=Dt+Se;se.projectionMatrix.makePerspective(ct-Xe,Xt+(We-Xe),Be*Dt/yt*Ze,Pt*Dt/yt*Ze,Ze,yt)}(T,m,E):T.projectionMatrix.copy(m.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(se){null!==u&&(u.fixedFoveation=se),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=se)};let Me=null;const ue=new SA;ue.setAnimationLoop(function ne(se,we){if(l=we.getViewerPose(o),d=we,null!==l){const We=l.views;null!==h&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let $e=!1;We.length!==T.cameras.length&&(T.cameras.length=0,$e=!0);for(let gt=0;gt<We.length;gt++){const vt=We[gt];let Dt=null;if(null!==h)Dt=h.getViewport(vt);else{const Pt=c.getViewSubImage(u,vt);Dt=Pt.viewport,0===gt&&(e.setRenderTargetTextures(y,Pt.colorTexture,u.ignoreDepthValues?void 0:Pt.depthStencilTexture),e.setRenderTarget(y))}const Be=w[gt];Be.matrix.fromArray(vt.transform.matrix),Be.projectionMatrix.fromArray(vt.projectionMatrix),Be.viewport.set(Dt.x,Dt.y,Dt.width,Dt.height),0===gt&&T.matrix.copy(Be.matrix),!0===$e&&T.cameras.push(Be)}}const Fe=r.inputSources;for(let We=0;We<_.length;We++)_[We].update(Fe[We],we,o);Me&&Me(se,we),d=null}),this.setAnimationLoop=function(se){Me=se},this.dispose=function(){}}}function Q$(n){function i(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.specularMap&&(g.specularMap.value=m.specularMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const E=n.get(m).envMap;let w,T;E&&(g.envMap.value=E,g.flipEnvMap.value=E.isCubeTexture&&!1===E.isRenderTargetTexture?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity),m.map?w=m.map:m.specularMap?w=m.specularMap:m.displacementMap?w=m.displacementMap:m.normalMap?w=m.normalMap:m.bumpMap?w=m.bumpMap:m.roughnessMap?w=m.roughnessMap:m.metalnessMap?w=m.metalnessMap:m.alphaMap?w=m.alphaMap:m.emissiveMap?w=m.emissiveMap:m.clearcoatMap?w=m.clearcoatMap:m.clearcoatNormalMap?w=m.clearcoatNormalMap:m.clearcoatRoughnessMap?w=m.clearcoatRoughnessMap:m.specularIntensityMap?w=m.specularIntensityMap:m.specularColorMap?w=m.specularColorMap:m.transmissionMap?w=m.transmissionMap:m.thicknessMap?w=m.thicknessMap:m.sheenColorMap?w=m.sheenColorMap:m.sheenRoughnessMap&&(w=m.sheenRoughnessMap),void 0!==w&&(w.isWebGLRenderTarget&&(w=w.texture),!0===w.matrixAutoUpdate&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix)),m.aoMap?T=m.aoMap:m.lightMap&&(T=m.lightMap),void 0!==T&&(T.isWebGLRenderTarget&&(T=T.texture),!0===T.matrixAutoUpdate&&T.updateMatrix(),g.uv2Transform.value.copy(T.matrix))}function h(g,m){g.roughness.value=m.roughness,g.metalness.value=m.metalness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,1===m.side&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),1===m.side&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),n.get(m).envMap&&(g.envMapIntensity.value=m.envMapIntensity)}return{refreshFogUniforms:function e(g,m){g.fogColor.value.copy(m.color),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)},refreshMaterialUniforms:function t(g,m,E,w,T){m.isMeshBasicMaterial?i(g,m):m.isMeshLambertMaterial?(i(g,m),function l(g,m){m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap)}(g,m)):m.isMeshToonMaterial?(i(g,m),function u(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,1===m.side&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),1===m.side&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}(g,m)):m.isMeshPhongMaterial?(i(g,m),function c(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,1===m.side&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),1===m.side&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}(g,m)):m.isMeshStandardMaterial?(i(g,m),m.isMeshPhysicalMaterial?function d(g,m,E){h(g,m),g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),g.clearcoatNormalMap.value=m.clearcoatNormalMap,1===m.side&&g.clearcoatNormalScale.value.negate())),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=E.texture,g.transmissionSamplerSize.value.set(E.width,E.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap)}(g,m,T):h(g,m)):m.isMeshMatcapMaterial?(i(g,m),function f(g,m){m.matcap&&(g.matcap.value=m.matcap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,1===m.side&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),1===m.side&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}(g,m)):m.isMeshDepthMaterial?(i(g,m),function p(g,m){m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}(g,m)):m.isMeshDistanceMaterial?(i(g,m),function y(g,m){m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),g.referencePosition.value.copy(m.referencePosition),g.nearDistance.value=m.nearDistance,g.farDistance.value=m.farDistance}(g,m)):m.isMeshNormalMaterial?(i(g,m),function _(g,m){m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,1===m.side&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),1===m.side&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}(g,m)):m.isLineBasicMaterial?(function r(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity}(g,m),m.isLineDashedMaterial&&function s(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}(g,m)):m.isPointsMaterial?function o(g,m,E,w){let T;g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*E,g.scale.value=.5*w,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest),m.map?T=m.map:m.alphaMap&&(T=m.alphaMap),void 0!==T&&(!0===T.matrixAutoUpdate&&T.updateMatrix(),g.uvTransform.value.copy(T.matrix))}(g,m,E,w):m.isSpriteMaterial?function a(g,m){let E;g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest),m.map?E=m.map:m.alphaMap&&(E=m.alphaMap),void 0!==E&&(!0===E.matrixAutoUpdate&&E.updateMatrix(),g.uvTransform.value.copy(E.matrix))}(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}}}function En(n={}){const e=void 0!==n.canvas?n.canvas:function eq(){const n=bh("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=void 0!==n.context?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let h=null,d=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Oo,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const y=this;let _=!1,g=0,m=0,E=null,w=-1,T=null;const j=new Mn,Q=new Mn;let ae=null,xe=e.width,he=e.height,A=1,te=null,me=null;const ve=new Mn(0,0,xe,he),Me=new Mn(0,0,xe,he);let ne=!1;const ue=new Vp;let se=!1,we=!1,Fe=null;const We=new mt,$e=new Ve,gt=new k,vt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Dt(){return null===E?A:1}let It,at,ct,Xt,Se,Xe,Ze,yt,st,Lt,wt,Yt,Xn,W,O,Le,je,Qe,ut,At,ke,Ut,Ht,Be=t;function Pt(H,ye){for(let Te=0;Te<H.length;Te++){const Ue=e.getContext(H[Te],ye);if(null!==Ue)return Ue}return null}try{const H={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r138"),e.addEventListener("webglcontextlost",ce,!1),e.addEventListener("webglcontextrestored",dt,!1),null===Be){const ye=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&ye.shift(),Be=Pt(ye,H),null===Be)throw Pt(ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Be.getShaderPrecisionFormat&&(Be.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}function Et(){It=new _9(Be),at=new d9(Be,It,n),It.init(at),Ut=new K$(Be,It,at),ct=new X$(Be,It,at),Xt=new x9(Be),Se=new k$,Xe=new Y$(Be,It,ct,Se,at,Ut,Xt),Ze=new p9(y),yt=new y9(y),st=new fj(Be,at),Ht=new u9(Be,It,st,at),Lt=new v9(Be,st,Xt,Ht),wt=new S9(Be,Lt,st,Xt),ut=new E9(Be,at,Xe),Le=new f9(Se),Yt=new F$(y,Ze,yt,It,at,Ht,Le),Xn=new Q$(Se),W=new U$,O=new j$(It,at),Qe=new c9(y,Ze,ct,wt,u,o),je=new tI(y,wt,at),At=new h9(Be,It,Xt,at),ke=new b9(Be,It,Xt,at),Xt.programs=Yt.programs,y.capabilities=at,y.extensions=It,y.properties=Se,y.renderLists=W,y.shadowMap=je,y.state=ct,y.info=Xt}Et();const bt=new J$(y,Be);function ce(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const H=Xt.autoReset,ye=je.enabled,Te=je.autoUpdate,Ee=je.needsUpdate,Ue=je.type;Et(),Xt.autoReset=H,je.enabled=ye,je.autoUpdate=Te,je.needsUpdate=Ee,je.type=Ue}function ot(H){const ye=H.target;ye.removeEventListener("dispose",ot),function zt(H){(function lt(H){const ye=Se.get(H).programs;void 0!==ye&&(ye.forEach(function(Te){Yt.releaseProgram(Te)}),H.isShaderMaterial&&Yt.releaseShaderCache(H))})(H),Se.remove(H)}(ye)}this.xr=bt,this.getContext=function(){return Be},this.getContextAttributes=function(){return Be.getContextAttributes()},this.forceContextLoss=function(){const H=It.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=It.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(H){void 0!==H&&(A=H,this.setSize(xe,he,!1))},this.getSize=function(H){return H.set(xe,he)},this.setSize=function(H,ye,Te){bt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(xe=H,he=ye,e.width=Math.floor(H*A),e.height=Math.floor(ye*A),!1!==Te&&(e.style.width=H+"px",e.style.height=ye+"px"),this.setViewport(0,0,H,ye))},this.getDrawingBufferSize=function(H){return H.set(xe*A,he*A).floor()},this.setDrawingBufferSize=function(H,ye,Te){xe=H,he=ye,A=Te,e.width=Math.floor(H*Te),e.height=Math.floor(ye*Te),this.setViewport(0,0,H,ye)},this.getCurrentViewport=function(H){return H.copy(j)},this.getViewport=function(H){return H.copy(ve)},this.setViewport=function(H,ye,Te,Ee){H.isVector4?ve.set(H.x,H.y,H.z,H.w):ve.set(H,ye,Te,Ee),ct.viewport(j.copy(ve).multiplyScalar(A).floor())},this.getScissor=function(H){return H.copy(Me)},this.setScissor=function(H,ye,Te,Ee){H.isVector4?Me.set(H.x,H.y,H.z,H.w):Me.set(H,ye,Te,Ee),ct.scissor(Q.copy(Me).multiplyScalar(A).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(H){ct.setScissorTest(ne=H)},this.setOpaqueSort=function(H){te=H},this.setTransparentSort=function(H){me=H},this.getClearColor=function(H){return H.copy(Qe.getClearColor())},this.setClearColor=function(){Qe.setClearColor.apply(Qe,arguments)},this.getClearAlpha=function(){return Qe.getClearAlpha()},this.setClearAlpha=function(){Qe.setClearAlpha.apply(Qe,arguments)},this.clear=function(H=!0,ye=!0,Te=!0){let Ee=0;H&&(Ee|=16384),ye&&(Ee|=256),Te&&(Ee|=1024),Be.clear(Ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ce,!1),e.removeEventListener("webglcontextrestored",dt,!1),W.dispose(),O.dispose(),Se.dispose(),Ze.dispose(),yt.dispose(),wt.dispose(),Ht.dispose(),Yt.dispose(),bt.dispose(),bt.removeEventListener("sessionstart",hn),bt.removeEventListener("sessionend",er),Fe&&(Fe.dispose(),Fe=null),Nn.stop()},this.renderBufferDirect=function(H,ye,Te,Ee,Ue,Ft){null===ye&&(ye=vt);const $t=Ue.isMesh&&Ue.matrixWorld.determinant()<0,Qt=function PY(H,ye,Te,Ee,Ue){!0!==ye.isScene&&(ye=vt),Xe.resetTextureUnits();const Ft=ye.fog,Qt=null===E?y.outputEncoding:!0===E.isXRRenderTarget?E.texture.encoding:Oo,Kt=(Ee.isMeshStandardMaterial?yt:Ze).get(Ee.envMap||(Ee.isMeshStandardMaterial?ye.environment:null)),Sn=!0===Ee.vertexColors&&!!Te.attributes.color&&4===Te.attributes.color.itemSize,dn=!!Ee.normalMap&&!!Te.attributes.tangent,fn=!!Te.morphAttributes.position,ri=!!Te.morphAttributes.normal,Za=!!Te.morphAttributes.color,Kc=Ee.toneMapped?y.toneMapping:0,Zc=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,Ns=void 0!==Zc?Zc.length:0,vn=Se.get(Ee),Jc=d.state.lights;!0!==se||!0!==we&&H===T||Le.setState(Ee,H,H===T&&Ee.id===w);let bi=!1;Ee.version===vn.__version?(vn.needsLights&&vn.lightsStateVersion!==Jc.state.version||vn.outputEncoding!==Qt||Ue.isInstancedMesh&&!1===vn.instancing||!Ue.isInstancedMesh&&!0===vn.instancing||Ue.isSkinnedMesh&&!1===vn.skinning||!Ue.isSkinnedMesh&&!0===vn.skinning||vn.envMap!==Kt||Ee.fog&&vn.fog!==Ft||void 0!==vn.numClippingPlanes&&(vn.numClippingPlanes!==Le.numPlanes||vn.numIntersection!==Le.numIntersection)||vn.vertexAlphas!==Sn||vn.vertexTangents!==dn||vn.morphTargets!==fn||vn.morphNormals!==ri||vn.morphColors!==Za||vn.toneMapping!==Kc||!0===at.isWebGL2&&vn.morphTargetsCount!==Ns)&&(bi=!0):(bi=!0,vn.__version=Ee.version);let Os=vn.currentProgram;!0===bi&&(Os=Cb(Ee,ye,Ue));let Qo=!1,Wh=!1,Db=!1;const Gi=Os.getUniforms(),jh=vn.uniforms;if(ct.useProgram(Os.program)&&(Qo=!0,Wh=!0,Db=!0),Ee.id!==w&&(w=Ee.id,Wh=!0),Qo||T!==H){if(Gi.setValue(Be,"projectionMatrix",H.projectionMatrix),at.logarithmicDepthBuffer&&Gi.setValue(Be,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),T!==H&&(T=H,Wh=!0,Db=!0),Ee.isShaderMaterial||Ee.isMeshPhongMaterial||Ee.isMeshToonMaterial||Ee.isMeshStandardMaterial||Ee.envMap){const ds=Gi.map.cameraPosition;void 0!==ds&&ds.setValue(Be,gt.setFromMatrixPosition(H.matrixWorld))}(Ee.isMeshPhongMaterial||Ee.isMeshToonMaterial||Ee.isMeshLambertMaterial||Ee.isMeshBasicMaterial||Ee.isMeshStandardMaterial||Ee.isShaderMaterial)&&Gi.setValue(Be,"isOrthographic",!0===H.isOrthographicCamera),(Ee.isMeshPhongMaterial||Ee.isMeshToonMaterial||Ee.isMeshLambertMaterial||Ee.isMeshBasicMaterial||Ee.isMeshStandardMaterial||Ee.isShaderMaterial||Ee.isShadowMaterial||Ue.isSkinnedMesh)&&Gi.setValue(Be,"viewMatrix",H.matrixWorldInverse)}if(Ue.isSkinnedMesh){Gi.setOptional(Be,Ue,"bindMatrix"),Gi.setOptional(Be,Ue,"bindMatrixInverse");const ds=Ue.skeleton;ds&&(at.floatVertexTextures?(null===ds.boneTexture&&ds.computeBoneTexture(),Gi.setValue(Be,"boneTexture",ds.boneTexture,Xe),Gi.setValue(Be,"boneTextureSize",ds.boneTextureSize)):Gi.setOptional(Be,ds,"boneMatrices"))}const Ab=Te.morphAttributes;return(void 0!==Ab.position||void 0!==Ab.normal||void 0!==Ab.color&&!0===at.isWebGL2)&&ut.update(Ue,Te,Ee,Os),(Wh||vn.receiveShadow!==Ue.receiveShadow)&&(vn.receiveShadow=Ue.receiveShadow,Gi.setValue(Be,"receiveShadow",Ue.receiveShadow)),Wh&&(Gi.setValue(Be,"toneMappingExposure",y.toneMappingExposure),vn.needsLights&&function RY(H,ye){H.ambientLightColor.needsUpdate=ye,H.lightProbe.needsUpdate=ye,H.directionalLights.needsUpdate=ye,H.directionalLightShadows.needsUpdate=ye,H.pointLights.needsUpdate=ye,H.pointLightShadows.needsUpdate=ye,H.spotLights.needsUpdate=ye,H.spotLightShadows.needsUpdate=ye,H.rectAreaLights.needsUpdate=ye,H.hemisphereLights.needsUpdate=ye,H.directionalShadowMap.needsUpdate=ye,H.directionalShadowMatrix.needsUpdate=ye,H.spotShadowMap.needsUpdate=ye,H.spotShadowMatrix.needsUpdate=ye,H.pointShadowMap.needsUpdate=ye,H.pointShadowMatrix.needsUpdate=ye}(jh,Db),Ft&&Ee.fog&&Xn.refreshFogUniforms(jh,Ft),Xn.refreshMaterialUniforms(jh,Ee,A,he,Fe),Wo.upload(Be,vn.uniformsList,jh,Xe)),Ee.isShaderMaterial&&!0===Ee.uniformsNeedUpdate&&(Wo.upload(Be,vn.uniformsList,jh,Xe),Ee.uniformsNeedUpdate=!1),Ee.isSpriteMaterial&&Gi.setValue(Be,"center",Ue.center),Gi.setValue(Be,"modelViewMatrix",Ue.modelViewMatrix),Gi.setValue(Be,"normalMatrix",Ue.normalMatrix),Gi.setValue(Be,"modelMatrix",Ue.matrixWorld),Os}(H,ye,Te,Ee,Ue);ct.setMaterial(Ee,$t);let Kt=Te.index;const Sn=Te.attributes.position;if(null===Kt){if(void 0===Sn||0===Sn.count)return}else if(0===Kt.count)return;let dn=1;!0===Ee.wireframe&&(Kt=Lt.getWireframeAttribute(Te),dn=2),Ht.setup(Ue,Ee,Qt,Te,Kt);let fn,ri=At;null!==Kt&&(fn=st.get(Kt),ri=ke,ri.setIndex(fn));const Za=null!==Kt?Kt.count:Sn.count,Kc=Te.drawRange.start*dn,Zc=Te.drawRange.count*dn,Ns=null!==Ft?Ft.start*dn:0,vn=null!==Ft?Ft.count*dn:1/0,Jc=Math.max(Kc,Ns),bi=Math.min(Za,Kc+Zc,Ns+vn)-1,Os=Math.max(0,bi-Jc+1);if(0!==Os){if(Ue.isMesh)!0===Ee.wireframe?(ct.setLineWidth(Ee.wireframeLinewidth*Dt()),ri.setMode(1)):ri.setMode(4);else if(Ue.isLine){let Qo=Ee.linewidth;void 0===Qo&&(Qo=1),ct.setLineWidth(Qo*Dt()),ri.setMode(Ue.isLineSegments?1:Ue.isLineLoop?2:3)}else Ue.isPoints?ri.setMode(0):Ue.isSprite&&ri.setMode(4);if(Ue.isInstancedMesh)ri.renderInstances(Jc,Os,Ue.count);else if(Te.isInstancedBufferGeometry){const Qo=Math.min(Te.instanceCount,Te._maxInstanceCount);ri.renderInstances(Jc,Os,Qo)}else ri.render(Jc,Os)}},this.compile=function(H,ye){d=O.get(H),d.init(),p.push(d),H.traverseVisible(function(Te){Te.isLight&&Te.layers.test(ye.layers)&&(d.pushLight(Te),Te.castShadow&&d.pushShadow(Te))}),d.setupLights(y.physicallyCorrectLights),H.traverse(function(Te){const Ee=Te.material;if(Ee)if(Array.isArray(Ee))for(let Ue=0;Ue<Ee.length;Ue++)Cb(Ee[Ue],H,Te);else Cb(Ee,H,Te)}),p.pop(),d=null};let Ke=null;function hn(){Nn.stop()}function er(){Nn.start()}const Nn=new SA;function Rs(H,ye,Te,Ee){if(!1===H.visible)return;if(H.layers.test(ye.layers))if(H.isGroup)Te=H.renderOrder;else if(H.isLOD)!0===H.autoUpdate&&H.update(ye);else if(H.isLight)d.pushLight(H),H.castShadow&&d.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||ue.intersectsSprite(H)){Ee&&gt.setFromMatrixPosition(H.matrixWorld).applyMatrix4(We);const $t=wt.update(H),Qt=H.material;Qt.visible&&h.push(H,$t,Qt,Te,gt.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(H.isSkinnedMesh&&H.skeleton.frame!==Xt.render.frame&&(H.skeleton.update(),H.skeleton.frame=Xt.render.frame),!H.frustumCulled||ue.intersectsObject(H))){Ee&&gt.setFromMatrixPosition(H.matrixWorld).applyMatrix4(We);const $t=wt.update(H),Qt=H.material;if(Array.isArray(Qt)){const Kt=$t.groups;for(let Sn=0,dn=Kt.length;Sn<dn;Sn++){const fn=Kt[Sn],ri=Qt[fn.materialIndex];ri&&ri.visible&&h.push(H,$t,ri,Te,gt.z,fn)}}else Qt.visible&&h.push(H,$t,Qt,Te,gt.z,null)}const Ft=H.children;for(let $t=0,Qt=Ft.length;$t<Qt;$t++)Rs(Ft[$t],ye,Te,Ee)}function Ls(H,ye,Te,Ee){const Ue=H.opaque,Ft=H.transmissive,$t=H.transparent;d.setupLightsView(Te),Ft.length>0&&function AY(H,ye,Te){const Ee=at.isWebGL2;null===Fe&&(Fe=new ur(1,1,{generateMipmaps:!0,type:null!==Ut.convert(uc)?uc:Ia,minFilter:1008,samples:Ee&&!0===s?4:0})),y.getDrawingBufferSize($e),Ee?Fe.setSize($e.x,$e.y):Fe.setSize(bp($e.x),bp($e.y));const Ue=y.getRenderTarget();y.setRenderTarget(Fe),y.clear();const Ft=y.toneMapping;y.toneMapping=0,Fm(H,ye,Te),y.toneMapping=Ft,Xe.updateMultisampleRenderTarget(Fe),Xe.updateRenderTargetMipmap(Fe),y.setRenderTarget(Ue)}(Ue,ye,Te),Ee&&ct.viewport(j.copy(Ee)),Ue.length>0&&Fm(Ue,ye,Te),Ft.length>0&&Fm(Ft,ye,Te),$t.length>0&&Fm($t,ye,Te),ct.buffers.depth.setTest(!0),ct.buffers.depth.setMask(!0),ct.buffers.color.setMask(!0),ct.setPolygonOffset(!1)}function Fm(H,ye,Te){const Ee=!0===ye.isScene?ye.overrideMaterial:null;for(let Ue=0,Ft=H.length;Ue<Ft;Ue++){const $t=H[Ue],Qt=$t.object,Kt=$t.geometry,Sn=null===Ee?$t.material:Ee,dn=$t.group;Qt.layers.test(Te.layers)&&IY(Qt,ye,Te,Kt,Sn,dn)}}function IY(H,ye,Te,Ee,Ue,Ft){H.onBeforeRender(y,ye,Te,Ee,Ue,Ft),H.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),Ue.onBeforeRender(y,ye,Te,Ee,H,Ft),!0===Ue.transparent&&2===Ue.side?(Ue.side=1,Ue.needsUpdate=!0,y.renderBufferDirect(Te,ye,Ee,Ue,H,Ft),Ue.side=0,Ue.needsUpdate=!0,y.renderBufferDirect(Te,ye,Ee,Ue,H,Ft),Ue.side=2):y.renderBufferDirect(Te,ye,Ee,Ue,H,Ft),H.onAfterRender(y,ye,Te,Ee,Ue,Ft)}function Cb(H,ye,Te){!0!==ye.isScene&&(ye=vt);const Ee=Se.get(H),Ue=d.state.lights,$t=Ue.state.version,Qt=Yt.getParameters(H,Ue.state,d.state.shadowsArray,ye,Te),Kt=Yt.getProgramCacheKey(Qt);let Sn=Ee.programs;Ee.environment=H.isMeshStandardMaterial?ye.environment:null,Ee.fog=ye.fog,Ee.envMap=(H.isMeshStandardMaterial?yt:Ze).get(H.envMap||Ee.environment),void 0===Sn&&(H.addEventListener("dispose",ot),Sn=new Map,Ee.programs=Sn);let dn=Sn.get(Kt);if(void 0!==dn){if(Ee.currentProgram===dn&&Ee.lightsStateVersion===$t)return eR(H,Qt),dn}else Qt.uniforms=Yt.getUniforms(H),H.onBuild(Te,Qt,y),H.onBeforeCompile(Qt,y),dn=Yt.acquireProgram(Qt,Kt),Sn.set(Kt,dn),Ee.uniforms=Qt.uniforms;const fn=Ee.uniforms;(!H.isShaderMaterial&&!H.isRawShaderMaterial||!0===H.clipping)&&(fn.clippingPlanes=Le.uniform),eR(H,Qt),Ee.needsLights=function LY(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&!0===H.lights}(H),Ee.lightsStateVersion=$t,Ee.needsLights&&(fn.ambientLightColor.value=Ue.state.ambient,fn.lightProbe.value=Ue.state.probe,fn.directionalLights.value=Ue.state.directional,fn.directionalLightShadows.value=Ue.state.directionalShadow,fn.spotLights.value=Ue.state.spot,fn.spotLightShadows.value=Ue.state.spotShadow,fn.rectAreaLights.value=Ue.state.rectArea,fn.ltc_1.value=Ue.state.rectAreaLTC1,fn.ltc_2.value=Ue.state.rectAreaLTC2,fn.pointLights.value=Ue.state.point,fn.pointLightShadows.value=Ue.state.pointShadow,fn.hemisphereLights.value=Ue.state.hemi,fn.directionalShadowMap.value=Ue.state.directionalShadowMap,fn.directionalShadowMatrix.value=Ue.state.directionalShadowMatrix,fn.spotShadowMap.value=Ue.state.spotShadowMap,fn.spotShadowMatrix.value=Ue.state.spotShadowMatrix,fn.pointShadowMap.value=Ue.state.pointShadowMap,fn.pointShadowMatrix.value=Ue.state.pointShadowMatrix);const ri=dn.getUniforms(),Za=Wo.seqWithValue(ri.seq,fn);return Ee.currentProgram=dn,Ee.uniformsList=Za,dn}function eR(H,ye){const Te=Se.get(H);Te.outputEncoding=ye.outputEncoding,Te.instancing=ye.instancing,Te.skinning=ye.skinning,Te.morphTargets=ye.morphTargets,Te.morphNormals=ye.morphNormals,Te.morphColors=ye.morphColors,Te.morphTargetsCount=ye.morphTargetsCount,Te.numClippingPlanes=ye.numClippingPlanes,Te.numIntersection=ye.numClipIntersection,Te.vertexAlphas=ye.vertexAlphas,Te.vertexTangents=ye.vertexTangents,Te.toneMapping=ye.toneMapping}Nn.setAnimationLoop(function Vt(H){Ke&&Ke(H)}),"undefined"!=typeof window&&Nn.setContext(window),this.setAnimationLoop=function(H){Ke=H,bt.setAnimationLoop(H),null===H?Nn.stop():Nn.start()},bt.addEventListener("sessionstart",hn),bt.addEventListener("sessionend",er),this.render=function(H,ye){if(void 0===ye||!0===ye.isCamera){if(!0!==_){if(!0===H.autoUpdate&&H.updateMatrixWorld(),null===ye.parent&&ye.updateMatrixWorld(),!0===bt.enabled&&!0===bt.isPresenting&&(!0===bt.cameraAutoUpdate&&bt.updateCamera(ye),ye=bt.getCamera()),!0===H.isScene&&H.onBeforeRender(y,H,ye,E),d=O.get(H,p.length),d.init(),p.push(d),We.multiplyMatrices(ye.projectionMatrix,ye.matrixWorldInverse),ue.setFromProjectionMatrix(We),we=this.localClippingEnabled,se=Le.init(this.clippingPlanes,we,ye),h=W.get(H,f.length),h.init(),f.push(h),Rs(H,ye,0,y.sortObjects),h.finish(),!0===y.sortObjects&&h.sort(te,me),!0===se&&Le.beginShadows(),je.render(d.state.shadowsArray,H,ye),!0===se&&Le.endShadows(),!0===this.info.autoReset&&this.info.reset(),Qe.render(h,H),d.setupLights(y.physicallyCorrectLights),ye.isArrayCamera){const Ee=ye.cameras;for(let Ue=0,Ft=Ee.length;Ue<Ft;Ue++){const $t=Ee[Ue];Ls(h,H,$t,$t.viewport)}}else Ls(h,H,ye);null!==E&&(Xe.updateMultisampleRenderTarget(E),Xe.updateRenderTargetMipmap(E)),!0===H.isScene&&H.onAfterRender(y,H,ye),Ht.resetDefaultState(),w=-1,T=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(H,ye,Te){Se.get(H.texture).__webglTexture=ye,Se.get(H.depthTexture).__webglTexture=Te;const Ee=Se.get(H);Ee.__hasExternalTextures=!0,Ee.__hasExternalTextures&&(Ee.__autoAllocateDepthBuffer=void 0===Te,Ee.__autoAllocateDepthBuffer||!0===It.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),H.useRenderToTexture=!1,H.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(H,ye){const Te=Se.get(H);Te.__webglFramebuffer=ye,Te.__useDefaultFramebuffer=void 0===ye},this.setRenderTarget=function(H,ye=0,Te=0){E=H,g=ye,m=Te;let Ee=!0;if(H){const Kt=Se.get(H);void 0!==Kt.__useDefaultFramebuffer?(ct.bindFramebuffer(36160,null),Ee=!1):void 0===Kt.__webglFramebuffer?Xe.setupRenderTarget(H):Kt.__hasExternalTextures&&Xe.rebindTextures(H,Se.get(H.texture).__webglTexture,Se.get(H.depthTexture).__webglTexture)}let Ue=null,Ft=!1,$t=!1;if(H){const Kt=H.texture;(Kt.isData3DTexture||Kt.isDataArrayTexture)&&($t=!0);const Sn=Se.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Ue=Sn[ye],Ft=!0):Ue=at.isWebGL2&&H.samples>0&&!1===Xe.useMultisampledRTT(H)?Se.get(H).__webglMultisampledFramebuffer:Sn,j.copy(H.viewport),Q.copy(H.scissor),ae=H.scissorTest}else j.copy(ve).multiplyScalar(A).floor(),Q.copy(Me).multiplyScalar(A).floor(),ae=ne;if(ct.bindFramebuffer(36160,Ue)&&at.drawBuffers&&Ee&&ct.drawBuffers(H,Ue),ct.viewport(j),ct.scissor(Q),ct.setScissorTest(ae),Ft){const Kt=Se.get(H.texture);Be.framebufferTexture2D(36160,36064,34069+ye,Kt.__webglTexture,Te)}else if($t){const Kt=Se.get(H.texture);Be.framebufferTextureLayer(36160,36064,Kt.__webglTexture,Te||0,ye||0)}w=-1},this.readRenderTargetPixels=function(H,ye,Te,Ee,Ue,Ft,$t){if(!H||!H.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Qt=Se.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&void 0!==$t&&(Qt=Qt[$t]),Qt){ct.bindFramebuffer(36160,Qt);try{const Kt=H.texture,Sn=Kt.format,dn=Kt.type;if(Sn!==Ji&&Ut.convert(Sn)!==Be.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const fn=dn===uc&&(It.has("EXT_color_buffer_half_float")||at.isWebGL2&&It.has("EXT_color_buffer_float"));if(!(dn===Ia||Ut.convert(dn)===Be.getParameter(35738)||dn===No&&(at.isWebGL2||It.has("OES_texture_float")||It.has("WEBGL_color_buffer_float"))||fn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Be.checkFramebufferStatus(36160)?ye>=0&&ye<=H.width-Ee&&Te>=0&&Te<=H.height-Ue&&Be.readPixels(ye,Te,Ee,Ue,Ut.convert(Sn),Ut.convert(dn),Ft):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Kt=null!==E?Se.get(E).__webglFramebuffer:null;ct.bindFramebuffer(36160,Kt)}}},this.copyFramebufferToTexture=function(H,ye,Te=0){if(!0!==ye.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Ee=Math.pow(2,-Te),Ue=Math.floor(ye.image.width*Ee),Ft=Math.floor(ye.image.height*Ee);Xe.setTexture2D(ye,0),Be.copyTexSubImage2D(3553,Te,0,0,H.x,H.y,Ue,Ft),ct.unbindTexture()},this.copyTextureToTexture=function(H,ye,Te,Ee=0){const Ue=ye.image.width,Ft=ye.image.height,$t=Ut.convert(Te.format),Qt=Ut.convert(Te.type);Xe.setTexture2D(Te,0),Be.pixelStorei(37440,Te.flipY),Be.pixelStorei(37441,Te.premultiplyAlpha),Be.pixelStorei(3317,Te.unpackAlignment),ye.isDataTexture?Be.texSubImage2D(3553,Ee,H.x,H.y,Ue,Ft,$t,Qt,ye.image.data):ye.isCompressedTexture?Be.compressedTexSubImage2D(3553,Ee,H.x,H.y,ye.mipmaps[0].width,ye.mipmaps[0].height,$t,ye.mipmaps[0].data):Be.texSubImage2D(3553,Ee,H.x,H.y,$t,Qt,ye.image),0===Ee&&Te.generateMipmaps&&Be.generateMipmap(3553),ct.unbindTexture()},this.copyTextureToTexture3D=function(H,ye,Te,Ee,Ue=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ft=H.max.x-H.min.x+1,$t=H.max.y-H.min.y+1,Qt=H.max.z-H.min.z+1,Kt=Ut.convert(Ee.format),Sn=Ut.convert(Ee.type);let dn;if(Ee.isData3DTexture)Xe.setTexture3D(Ee,0),dn=32879;else{if(!Ee.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Xe.setTexture2DArray(Ee,0),dn=35866}Be.pixelStorei(37440,Ee.flipY),Be.pixelStorei(37441,Ee.premultiplyAlpha),Be.pixelStorei(3317,Ee.unpackAlignment);const fn=Be.getParameter(3314),ri=Be.getParameter(32878),Za=Be.getParameter(3316),Kc=Be.getParameter(3315),Zc=Be.getParameter(32877),Ns=Te.isCompressedTexture?Te.mipmaps[0]:Te.image;Be.pixelStorei(3314,Ns.width),Be.pixelStorei(32878,Ns.height),Be.pixelStorei(3316,H.min.x),Be.pixelStorei(3315,H.min.y),Be.pixelStorei(32877,H.min.z),Te.isDataTexture||Te.isData3DTexture?Be.texSubImage3D(dn,Ue,ye.x,ye.y,ye.z,Ft,$t,Qt,Kt,Sn,Ns.data):Te.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Be.compressedTexSubImage3D(dn,Ue,ye.x,ye.y,ye.z,Ft,$t,Qt,Kt,Ns.data)):Be.texSubImage3D(dn,Ue,ye.x,ye.y,ye.z,Ft,$t,Qt,Kt,Sn,Ns),Be.pixelStorei(3314,fn),Be.pixelStorei(32878,ri),Be.pixelStorei(3316,Za),Be.pixelStorei(3315,Kc),Be.pixelStorei(32877,Zc),0===Ue&&Ee.generateMipmaps&&Be.generateMipmap(dn),ct.unbindTexture()},this.initTexture=function(H){Xe.setTexture2D(H,0),ct.unbindTexture()},this.resetState=function(){g=0,m=0,E=null,ct.reset(),Ht.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}En.prototype.isWebGLRenderer=!0,class tq extends En{}.prototype.isWebGL1Renderer=!0;class jp{constructor(e,t=25e-5){this.name="",this.color=new rt(e),this.density=t}clone(){return new jp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}jp.prototype.isFogExp2=!0;class $p{constructor(e,t=1,i=1e3){this.name="",this.color=new rt(e),this.near=t,this.far=i}clone(){return new $p(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}$p.prototype.isFog=!0;class qp extends _n{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}qp.prototype.isScene=!0;class kc{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=gh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Mr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Mr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Mr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}kc.prototype.isInterleavedBuffer=!0;const li=new k;class Ga{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)li.x=this.getX(t),li.y=this.getY(t),li.z=this.getZ(t),li.applyMatrix4(e),this.setXYZ(t,li.x,li.y,li.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)li.x=this.getX(t),li.y=this.getY(t),li.z=this.getZ(t),li.applyNormalMatrix(e),this.setXYZ(t,li.x,li.y,li.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)li.x=this.getX(t),li.y=this.getY(t),li.z=this.getZ(t),li.transformDirection(e),this.setXYZ(t,li.x,li.y,li.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ln(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ga(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Ga.prototype.isInterleavedBufferAttribute=!0;class G0 extends _i{constructor(e){super(),this.type="SpriteMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Bc;G0.prototype.isSpriteMaterial=!0;const Dh=new k,Uc=new k,Hc=new k,Vc=new Ve,Ah=new Ve,rI=new mt,Xp=new k,Ih=new k,Yp=new k,sI=new Ve,W0=new Ve,oI=new Ve;function Kp(n,e,t,i,r,s){Vc.subVectors(n,t).addScalar(.5).multiply(i),void 0!==r?(Ah.x=s*Vc.x-r*Vc.y,Ah.y=r*Vc.x+s*Vc.y):Ah.copy(Vc),n.copy(e),n.x+=Ah.x,n.y+=Ah.y,n.applyMatrix4(rI)}(class j0 extends _n{constructor(e){if(super(),this.type="Sprite",void 0===Bc){Bc=new Ct;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new kc(t,5);Bc.setIndex([0,1,2,0,2,3]),Bc.setAttribute("position",new Ga(i,3,0,!1)),Bc.setAttribute("uv",new Ga(i,2,3,!1))}this.geometry=Bc,this.material=void 0!==e?e:new G0,this.center=new Ve(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Uc.setFromMatrixScale(this.matrixWorld),rI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Hc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Uc.multiplyScalar(-Hc.z);const i=this.material.rotation;let r,s;0!==i&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Kp(Xp.set(-.5,-.5,0),Hc,o,Uc,r,s),Kp(Ih.set(.5,-.5,0),Hc,o,Uc,r,s),Kp(Yp.set(.5,.5,0),Hc,o,Uc,r,s),sI.set(0,0),W0.set(1,0),oI.set(1,1);let a=e.ray.intersectTriangle(Xp,Ih,Yp,!1,Dh);if(null===a&&(Kp(Ih.set(-.5,.5,0),Hc,o,Uc,r,s),W0.set(0,1),a=e.ray.intersectTriangle(Xp,Yp,Ih,!1,Dh),null===a))return;const l=e.ray.origin.distanceTo(Dh);l<e.near||l>e.far||t.push({distance:l,point:Dh.clone(),uv:yi.getUV(Dh,Xp,Ih,Yp,sI,W0,oI,new Ve),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const lI=new k,cI=new Mn,uI=new Mn,iq=new k,hI=new mt;class $0 extends Ci{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new mt,this.bindMatrixInverse=new mt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Mn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;cI.fromBufferAttribute(r.attributes.skinIndex,e),uI.fromBufferAttribute(r.attributes.skinWeight,e),lI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=uI.getComponent(s);if(0!==o){const a=cI.getComponent(s);hI.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(iq.copy(lI).applyMatrix4(hI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}$0.prototype.isSkinnedMesh=!0;(class q0 extends _n{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class zc extends cr{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Ti,u=Ti,h,d){super(null,o,a,l,c,u,r,s,h,d),this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class Gc extends Ln{constructor(e,t,i,r=1){"number"==typeof i&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Gc.prototype.isInstancedBufferAttribute=!0;const fI=new mt,pI=new mt,Jp=[],Ph=new Ci;(class mI extends Ci{constructor(e,t,i){super(e,t),this.instanceMatrix=new Gc(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Ph.geometry=this.geometry,Ph.material=this.material,void 0!==Ph.material)for(let s=0;s<r;s++){this.getMatrixAt(s,fI),pI.multiplyMatrices(i,fI),Ph.matrixWorld=pI,Ph.raycast(e,Jp);for(let o=0,a=Jp.length;o<a;o++){const l=Jp[o];l.instanceId=s,l.object=this,t.push(l)}Jp.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Gc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Oi extends _i{constructor(e){super(),this.type="LineBasicMaterial",this.color=new rt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Oi.prototype.isLineBasicMaterial=!0;const gI=new k,yI=new k,_I=new mt,Y0=new Ua,Qp=new Ba;class Wa extends _n{constructor(e=new Ct,t=new Oi){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)gI.fromBufferAttribute(t,r-1),yI.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=gI.distanceTo(yI);e.setAttribute("lineDistance",new pt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Qp.copy(i.boundingSphere),Qp.applyMatrix4(r),Qp.radius+=s,!1===e.ray.intersectsSphere(Qp))return;_I.copy(r).invert(),Y0.copy(e.ray).applyMatrix4(_I);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new k,u=new k,h=new k,d=new k,f=this.isLineSegments?2:1;if(i.isBufferGeometry){const p=i.index,_=i.attributes.position;if(null!==p)for(let E=Math.max(0,o.start),w=Math.min(p.count,o.start+o.count)-1;E<w;E+=f){const T=p.getX(E),j=p.getX(E+1);if(c.fromBufferAttribute(_,T),u.fromBufferAttribute(_,j),Y0.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const ae=e.ray.origin.distanceTo(d);ae<e.near||ae>e.far||t.push({distance:ae,point:h.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}else for(let E=Math.max(0,o.start),w=Math.min(_.count,o.start+o.count)-1;E<w;E+=f){if(c.fromBufferAttribute(_,E),u.fromBufferAttribute(_,E+1),Y0.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const j=e.ray.origin.distanceTo(d);j<e.near||j>e.far||t.push({distance:j,point:h.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Wa.prototype.isLine=!0;const vI=new k,bI=new k;class jo extends Wa{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)vI.fromBufferAttribute(t,r),bI.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+vI.distanceTo(bI);e.setAttribute("lineDistance",new pt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}jo.prototype.isLineSegments=!0;(class xI extends Wa{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class Wc extends _i{constructor(e){super(),this.type="PointsMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Wc.prototype.isPointsMaterial=!0;const wI=new mt,K0=new Ua,em=new Ba,tm=new k;function MI(n,e,t,i,r,s,o){const a=K0.distanceSqToPoint(n);if(a<t){const l=new k;K0.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}(class nm extends _n{constructor(e=new Ct,t=new Wc){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),em.copy(i.boundingSphere),em.applyMatrix4(r),em.radius+=s,!1===e.ray.intersectsSphere(em))return;wI.copy(r).invert(),K0.copy(e.ray).applyMatrix4(wI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(i.isBufferGeometry){const c=i.index,h=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),y=Math.min(c.count,o.start+o.count);p<y;p++){const _=c.getX(p);tm.fromBufferAttribute(h,_),MI(tm,_,l,r,e,t,this)}else for(let p=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);p<y;p++)tm.fromBufferAttribute(h,p),MI(tm,p,l,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class sq extends cr{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.minFilter=void 0!==o?o:ni,this.magFilter=void 0!==s?s:ni,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class oq extends cr{constructor(e,t,i){super({width:e,height:t}),this.format=i,this.magFilter=Ti,this.minFilter=Ti,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class EI extends cr{constructor(e,t,i,r,s,o,a,l,c,u,h,d){super(null,o,a,l,c,u,r,s,h,d),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class aq extends cr{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new k,new k,new k,new yi;class Wr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ve:new k);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new k,r=[],s=[],o=[],a=new k,l=new mt;for(let f=0;f<=e;f++)r[f]=this.getTangentAt(f/e,new k);s[0]=new k,o[0]=new k;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),d<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Ni(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(!0===t){let f=Math.acos(Ni(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class cm extends Wr{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Ve,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*u-f*h+this.aX,c=d*h+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}cm.prototype.isEllipseCurve=!0;class TI extends cm{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}function J0(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+h)+(l-a)/h;d*=u,f*=u,r(o,a,d,f)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}TI.prototype.isArcCurve=!0;const um=new k,Q0=new J0,eb=new J0,tb=new J0;class CI extends Wr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new k){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(um.subVectors(r[0],r[1]).add(r[0]),c=um);const h=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(um.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=um),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(h),f),y=Math.pow(h.distanceToSquared(d),f),_=Math.pow(d.distanceToSquared(u),f);y<1e-4&&(y=1),p<1e-4&&(p=y),_<1e-4&&(_=y),Q0.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,p,y,_),eb.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,p,y,_),tb.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,p,y,_)}else"catmullrom"===this.curveType&&(Q0.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),eb.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),tb.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return i.set(Q0.calc(l),eb.calc(l),tb.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new k).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function DI(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function Rh(n,e,t,i){return function lq(n,e){const t=1-n;return t*t*e}(n,e)+function cq(n,e){return 2*(1-n)*n*e}(n,t)+function uq(n,e){return n*n*e}(n,i)}function Lh(n,e,t,i,r){return function hq(n,e){const t=1-n;return t*t*t*e}(n,e)+function dq(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function fq(n,e){return 3*(1-n)*n*n*e}(n,i)+function pq(n,e){return n*n*n*e}(n,r)}CI.prototype.isCatmullRomCurve3=!0;class nb extends Wr{constructor(e=new Ve,t=new Ve,i=new Ve,r=new Ve){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ve){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Lh(e,r.x,s.x,o.x,a.x),Lh(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}nb.prototype.isCubicBezierCurve=!0;class AI extends Wr{constructor(e=new k,t=new k,i=new k,r=new k){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new k){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Lh(e,r.x,s.x,o.x,a.x),Lh(e,r.y,s.y,o.y,a.y),Lh(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}AI.prototype.isCubicBezierCurve3=!0;class hm extends Wr{constructor(e=new Ve,t=new Ve){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ve){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Ve;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}hm.prototype.isLineCurve=!0;class ib extends Wr{constructor(e=new Ve,t=new Ve,i=new Ve){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ve){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Rh(e,r.x,s.x,o.x),Rh(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}ib.prototype.isQuadraticBezierCurve=!0;class rb extends Wr{constructor(e=new k,t=new k,i=new k){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new k){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Rh(e,r.x,s.x,o.x),Rh(e,r.y,s.y,o.y),Rh(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}rb.prototype.isQuadraticBezierCurve3=!0;class sb extends Wr{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Ve){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(DI(a,l.x,c.x,u.x,h.x),DI(a,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new Ve).fromArray(r))}return this}}sb.prototype.isSplineCurve=!0;var ob=Object.freeze({__proto__:null,ArcCurve:TI,CatmullRomCurve3:CI,CubicBezierCurve:nb,CubicBezierCurve3:AI,EllipseCurve:cm,LineCurve:hm,LineCurve3:class mq extends Wr{constructor(e=new k,t=new k){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new k){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:ib,QuadraticBezierCurve3:rb,SplineCurve:sb});class gq extends Wr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new hm(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new ob[r.type]).fromJSON(r))}return this}}class dm extends gq{constructor(e){super(),this.type="Path",this.currentPoint=new Ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new hm(this.currentPoint.clone(),new Ve(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new ib(this.currentPoint.clone(),new Ve(e,t),new Ve(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new nb(this.currentPoint.clone(),new Ve(e,t),new Ve(i,r),new Ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new sb(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new cm(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class so extends dm{constructor(e){super(e),this.uuid=Mr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new dm).fromJSON(r))}return this}}function II(n,e,t,i,r){let s,o;if(r===function Lq(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=LI(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=LI(s,n[s],n[s+1],o);return o&&fm(o,o.next)&&(Fh(o),o=o.next),o}function qo(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!fm(t,t.next)&&0!==Jn(t.prev,t,t.next))t=t.next;else{if(Fh(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function Nh(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function Cq(n,e,t,i){let r=n;do{null===r.z&&(r.z=ab(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function Dq(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,i);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1)}(r)}(n,i,r,s);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,s?vq(n,i,r,s):_q(n))e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),Fh(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?Nh(n=bq(qo(n),e,t),e,t,i,r,s,2):2===o&&xq(n,e,t,i,r,s):Nh(qo(n),e,t,i,r,s,1);break}}function _q(n){const e=n.prev,t=n,i=n.next;if(Jn(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if($c(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&Jn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function vq(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Jn(r,s,o)>=0)return!1;const c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,h=ab(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),d=ab(c,u,e,t,i);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==n.prev&&f!==n.next&&$c(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Jn(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&$c(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Jn(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==n.prev&&f!==n.next&&$c(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Jn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==n.prev&&p!==n.next&&$c(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Jn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function bq(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!fm(r,s)&&PI(r,i,i.next,s)&&Oh(r,s)&&Oh(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Fh(i),Fh(i.next),i=n=s),i=i.next}while(i!==n);return qo(i)}function xq(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Iq(o,a)){let l=RI(o,a);return o=qo(o,o.next),l=qo(l,l.next),Nh(o,e,t,i,r,s),void Nh(l,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function Mq(n,e){return n.x-e.x}function Eq(n,e){if(e=function Sq(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s){if(s=d,d===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let h,u=1/0;t=o;do{i>=t.x&&t.x>=l&&i!==t.x&&$c(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)&&(h=Math.abs(r-t.y)/(i-t.x),Oh(t,n)&&(h<u||h===u&&(t.x>o.x||t.x===o.x&&Tq(o,t)))&&(o=t,u=h)),t=t.next}while(t!==a);return o}(n,e),e){const t=RI(e,n);qo(e,e.next),qo(t,t.next)}}function Tq(n,e){return Jn(n.prev,n,e.prev)<0&&Jn(e.next,n,n.next)<0}function ab(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Aq(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function $c(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function Iq(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function Pq(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&PI(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(Oh(n,e)&&Oh(e,n)&&function Rq(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(Jn(n.prev,n,e.prev)||Jn(n,e.prev,e))||fm(n,e)&&Jn(n.prev,n,n.next)>0&&Jn(e.prev,e,e.next)>0)}function Jn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function fm(n,e){return n.x===e.x&&n.y===e.y}function PI(n,e,t,i){const r=mm(Jn(n,e,t)),s=mm(Jn(n,e,i)),o=mm(Jn(t,i,n)),a=mm(Jn(t,i,e));return!!(r!==s&&o!==a||0===r&&pm(n,t,e)||0===s&&pm(n,i,e)||0===o&&pm(t,n,i)||0===a&&pm(t,e,i))}function pm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function mm(n){return n>0?1:n<0?-1:0}function Oh(n,e){return Jn(n.prev,n,n.next)<0?Jn(n,e,n.next)>=0&&Jn(n,n.prev,e)>=0:Jn(n,e,n.prev)<0||Jn(n,n.next,e)<0}function RI(n,e){const t=new lb(n.i,n.x,n.y),i=new lb(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function LI(n,e,t,i){const r=new lb(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Fh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function lb(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class oo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return oo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];NI(e),OI(i,e);let o=e.length;t.forEach(NI);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,OI(i,t[l]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=II(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,d,f;if(i&&(s=function wq(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=II(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Aq(c));for(r.sort(Mq),s=0;s<r.length;s++)Eq(r[s],t),t=qo(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let p=t;p<r;p+=t)h=n[p],d=n[p+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return Nh(s,o,t,a,l,f),o}(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function NI(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function OI(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Xo extends Ct{constructor(e=new so([new Ve(.5,.5),new Ve(-.5,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1;let h=void 0!==t.depth?t.depth:1,d=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,p=void 0!==t.bevelSize?t.bevelSize:f-.1,y=void 0!==t.bevelOffset?t.bevelOffset:0,_=void 0!==t.bevelSegments?t.bevelSegments:3;const g=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Nq;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=t.amount);let E,T,j,Q,ae,w=!1;g&&(E=g.getSpacedPoints(u),w=!0,d=!1,T=g.computeFrenetFrames(u,!1),j=new k,Q=new k,ae=new k),d||(_=0,f=0,p=0,y=0);const xe=a.extractPoints(c);let he=xe.shape;const A=xe.holes;if(!oo.isClockWise(he)){he=he.reverse();for(let Se=0,Xe=A.length;Se<Xe;Se++){const Ze=A[Se];oo.isClockWise(Ze)&&(A[Se]=Ze.reverse())}}const me=oo.triangulateShape(he,A),ve=he;for(let Se=0,Xe=A.length;Se<Xe;Se++)he=he.concat(A[Se]);function Me(Se,Xe,Ze){return Xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Xe.clone().multiplyScalar(Ze).add(Se)}const ne=he.length,ue=me.length;function se(Se,Xe,Ze){let yt,st,Lt;const wt=Se.x-Xe.x,Yt=Se.y-Xe.y,Xn=Ze.x-Se.x,W=Ze.y-Se.y,O=wt*wt+Yt*Yt;if(Math.abs(wt*W-Yt*Xn)>Number.EPSILON){const je=Math.sqrt(O),Qe=Math.sqrt(Xn*Xn+W*W),ut=Xe.x-Yt/je,At=Xe.y+wt/je,Ht=((Ze.x-W/Qe-ut)*W-(Ze.y+Xn/Qe-At)*Xn)/(wt*W-Yt*Xn);yt=ut+wt*Ht-Se.x,st=At+Yt*Ht-Se.y;const Et=yt*yt+st*st;if(Et<=2)return new Ve(yt,st);Lt=Math.sqrt(Et/2)}else{let je=!1;wt>Number.EPSILON?Xn>Number.EPSILON&&(je=!0):wt<-Number.EPSILON?Xn<-Number.EPSILON&&(je=!0):Math.sign(Yt)===Math.sign(W)&&(je=!0),je?(yt=-Yt,st=wt,Lt=Math.sqrt(O)):(yt=wt,st=Yt,Lt=Math.sqrt(O/2))}return new Ve(yt/Lt,st/Lt)}const we=[];for(let Se=0,Xe=ve.length,Ze=Xe-1,yt=Se+1;Se<Xe;Se++,Ze++,yt++)Ze===Xe&&(Ze=0),yt===Xe&&(yt=0),we[Se]=se(ve[Se],ve[Ze],ve[yt]);const Fe=[];let We,$e=we.concat();for(let Se=0,Xe=A.length;Se<Xe;Se++){const Ze=A[Se];We=[];for(let yt=0,st=Ze.length,Lt=st-1,wt=yt+1;yt<st;yt++,Lt++,wt++)Lt===st&&(Lt=0),wt===st&&(wt=0),We[yt]=se(Ze[yt],Ze[Lt],Ze[wt]);Fe.push(We),$e=$e.concat(We)}for(let Se=0;Se<_;Se++){const Xe=Se/_,Ze=f*Math.cos(Xe*Math.PI/2),yt=p*Math.sin(Xe*Math.PI/2)+y;for(let st=0,Lt=ve.length;st<Lt;st++){const wt=Me(ve[st],we[st],yt);Pt(wt.x,wt.y,-Ze)}for(let st=0,Lt=A.length;st<Lt;st++){const wt=A[st];We=Fe[st];for(let Yt=0,Xn=wt.length;Yt<Xn;Yt++){const W=Me(wt[Yt],We[Yt],yt);Pt(W.x,W.y,-Ze)}}}const gt=p+y;for(let Se=0;Se<ne;Se++){const Xe=d?Me(he[Se],$e[Se],gt):he[Se];w?(Q.copy(T.normals[0]).multiplyScalar(Xe.x),j.copy(T.binormals[0]).multiplyScalar(Xe.y),ae.copy(E[0]).add(Q).add(j),Pt(ae.x,ae.y,ae.z)):Pt(Xe.x,Xe.y,0)}for(let Se=1;Se<=u;Se++)for(let Xe=0;Xe<ne;Xe++){const Ze=d?Me(he[Xe],$e[Xe],gt):he[Xe];w?(Q.copy(T.normals[Se]).multiplyScalar(Ze.x),j.copy(T.binormals[Se]).multiplyScalar(Ze.y),ae.copy(E[Se]).add(Q).add(j),Pt(ae.x,ae.y,ae.z)):Pt(Ze.x,Ze.y,h/u*Se)}for(let Se=_-1;Se>=0;Se--){const Xe=Se/_,Ze=f*Math.cos(Xe*Math.PI/2),yt=p*Math.sin(Xe*Math.PI/2)+y;for(let st=0,Lt=ve.length;st<Lt;st++){const wt=Me(ve[st],we[st],yt);Pt(wt.x,wt.y,h+Ze)}for(let st=0,Lt=A.length;st<Lt;st++){const wt=A[st];We=Fe[st];for(let Yt=0,Xn=wt.length;Yt<Xn;Yt++){const W=Me(wt[Yt],We[Yt],yt);w?Pt(W.x,W.y+E[u-1].y,E[u-1].x+Ze):Pt(W.x,W.y,h+Ze)}}}function Be(Se,Xe){let Ze=Se.length;for(;--Ze>=0;){const yt=Ze;let st=Ze-1;st<0&&(st=Se.length-1);for(let Lt=0,wt=u+2*_;Lt<wt;Lt++){const Yt=ne*Lt,Xn=ne*(Lt+1);at(Xe+yt+Yt,Xe+st+Yt,Xe+st+Xn,Xe+yt+Xn)}}}function Pt(Se,Xe,Ze){l.push(Se),l.push(Xe),l.push(Ze)}function It(Se,Xe,Ze){ct(Se),ct(Xe),ct(Ze);const yt=r.length/3,st=m.generateTopUV(i,r,yt-3,yt-2,yt-1);Xt(st[0]),Xt(st[1]),Xt(st[2])}function at(Se,Xe,Ze,yt){ct(Se),ct(Xe),ct(yt),ct(Xe),ct(Ze),ct(yt);const st=r.length/3,Lt=m.generateSideWallUV(i,r,st-6,st-3,st-2,st-1);Xt(Lt[0]),Xt(Lt[1]),Xt(Lt[3]),Xt(Lt[1]),Xt(Lt[2]),Xt(Lt[3])}function ct(Se){r.push(l[3*Se+0]),r.push(l[3*Se+1]),r.push(l[3*Se+2])}function Xt(Se){s.push(Se.x),s.push(Se.y)}(function vt(){const Se=r.length/3;if(d){let Xe=0,Ze=ne*Xe;for(let yt=0;yt<ue;yt++){const st=me[yt];It(st[2]+Ze,st[1]+Ze,st[0]+Ze)}Xe=u+2*_,Ze=ne*Xe;for(let yt=0;yt<ue;yt++){const st=me[yt];It(st[0]+Ze,st[1]+Ze,st[2]+Ze)}}else{for(let Xe=0;Xe<ue;Xe++){const Ze=me[Xe];It(Ze[2],Ze[1],Ze[0])}for(let Xe=0;Xe<ue;Xe++){const Ze=me[Xe];It(Ze[0]+ne*u,Ze[1]+ne*u,Ze[2]+ne*u)}}i.addGroup(Se,r.length/3-Se,0)})(),function Dt(){const Se=r.length/3;let Xe=0;Be(ve,Xe),Xe+=ve.length;for(let Ze=0,yt=A.length;Ze<yt;Ze++){const st=A[Ze];Be(st,Xe),Xe+=st.length}i.addGroup(Se,r.length/3-Se,1)}()}this.setAttribute("position",new pt(r,3)),this.setAttribute("uv",new pt(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function Oq(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new ob[r.type]).fromJSON(r)),new Xo(i,e.options)}}const Nq={generateTopUV:function(n,e,t,i,r){const a=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new Ve(e[3*t],e[3*t+1]),new Ve(a,l),new Ve(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],d=e[3*r],f=e[3*r+1],p=e[3*r+2],y=e[3*s],_=e[3*s+1],g=e[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ve(o,1-l),new Ve(c,1-h),new Ve(d,1-p),new Ve(y,1-g)]:[new Ve(a,1-l),new Ve(u,1-h),new Ve(f,1-p),new Ve(_,1-g)]}};class Bh extends Ct{constructor(e=new so([new Ve(0,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const h=r.length/3,d=u.extractPoints(t);let f=d.shape;const p=d.holes;!1===oo.isClockWise(f)&&(f=f.reverse());for(let _=0,g=p.length;_<g;_++){const m=p[_];!0===oo.isClockWise(m)&&(p[_]=m.reverse())}const y=oo.triangulateShape(f,p);for(let _=0,g=p.length;_<g;_++)f=f.concat(p[_]);for(let _=0,g=f.length;_<g;_++){const m=f[_];r.push(m.x,m.y,0),s.push(0,0,1),o.push(m.x,m.y)}for(let _=0,g=y.length;_<g;_++){const m=y[_];i.push(m[0]+h,m[1]+h,m[2]+h),l+=3}}this.setIndex(i),this.setAttribute("position",new pt(r,3)),this.setAttribute("normal",new pt(s,3)),this.setAttribute("uv",new pt(o,2))}toJSON(){const e=super.toJSON();return function Fq(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++)i.push(t[e.shapes[r]]);return new Bh(i,e.curveSegments)}}class UI extends _i{constructor(e){super(),this.type="ShadowMaterial",this.color=new rt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}UI.prototype.isShadowMaterial=!0;class HI extends hs{constructor(e){super(e),this.type="RawShaderMaterial"}}HI.prototype.isRawShaderMaterial=!0;class cb extends _i{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}cb.prototype.isMeshStandardMaterial=!0;class VI extends cb{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ni(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}VI.prototype.isMeshPhysicalMaterial=!0;class zI extends _i{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new rt(16777215),this.specular=new rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}zI.prototype.isMeshPhongMaterial=!0;class GI extends _i{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}GI.prototype.isMeshToonMaterial=!0;class WI extends _i{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}WI.prototype.isMeshNormalMaterial=!0;class jI extends _i{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}jI.prototype.isMeshLambertMaterial=!0;class $I extends _i{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}$I.prototype.isMeshMatcapMaterial=!0;class qI extends Oi{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}qI.prototype.isLineDashedMaterial=!0;const kq={ShadowMaterial:UI,SpriteMaterial:G0,RawShaderMaterial:HI,ShaderMaterial:hs,PointsMaterial:Wc,MeshPhysicalMaterial:VI,MeshStandardMaterial:cb,MeshPhongMaterial:zI,MeshToonMaterial:GI,MeshNormalMaterial:WI,MeshLambertMaterial:jI,MeshDepthMaterial:H0,MeshDistanceMaterial:V0,MeshBasicMaterial:io,MeshMatcapMaterial:$I,LineDashedMaterial:qI,LineBasicMaterial:Oi,Material:_i};_i.fromType=function(n){return new kq[n]};const qn={arraySlice:function(n,e,t){return qn.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],d=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<t||p>=i)){h.push(c.times[f]);for(let y=0;y<u;++y)d.push(c.values[f*u+y])}}0!==h.length&&(c.times=qn.convertArray(h,c.times.constructor),c.values=qn.convertArray(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(void 0===c)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=a.times.length-1;let y;if(s<=a.times[0])y=qn.arraySlice(a.values,u,h-u);else if(s>=a.times[p]){const g=p*h+u;y=qn.arraySlice(a.values,g,g+h-u)}else{const g=a.createInterpolant(),m=u,E=h-u;g.evaluate(s),y=qn.arraySlice(g.resultBuffer,m,E)}"quaternion"===l&&(new Hi).fromArray(y).normalize().conjugate().toArray(y);const _=c.times.length;for(let g=0;g<_;++g){const m=g*f+d;if("quaternion"===l)Hi.multiplyQuaternionsFlat(c.values,m,y,0,c.values,m);else{const E=f-2*d;for(let w=0;w<E;++w)c.values[m+w]-=y[w]}}}return n.blendMode=2501,n}};class Yo{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Yo.prototype.beforeStart_=Yo.prototype.copySampleValue_,Yo.prototype.afterEnd_=Yo.prototype.copySampleValue_;class Bq extends Yo{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fc,endingEnd:fc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case pc:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case pc:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),y=p*p,_=y*p,g=-d*_+2*d*y-d*p,m=(1+d)*_+(-1.5-2*d)*y+(-.5+d)*p+1,E=(-1-f)*_+(1.5+f)*y+.5*p,w=f*_-f*y;for(let T=0;T!==a;++T)s[T]=g*o[u+T]+m*o[c+T]+E*o[l+T]+w*o[h+T];return s}}class XI extends Yo{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),h=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*h+o[l+d]*u;return s}}class Uq extends Yo{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class As{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qn.convertArray(t,this.TimeBufferType),this.values=qn.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:qn.convertArray(e.times,Array),values:qn.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Uq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Bq(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=qn.arraySlice(i,s,o),this.values=qn.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&qn.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=qn.arraySlice(this.times),t=qn.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const h=a*i,d=h-i,f=h+i;for(let p=0;p!==i;++p){const y=t[h+p];if(y!==t[d+p]||y!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,d=o*i;for(let f=0;f!==i;++f)t[d+f]=t[h+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=qn.arraySlice(e,0,o),this.values=qn.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=qn.arraySlice(this.times,0),t=qn.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}As.prototype.TimeBufferType=Float32Array,As.prototype.ValueBufferType=Float32Array,As.prototype.DefaultInterpolation=2301;class qc extends As{}qc.prototype.ValueTypeName="bool",qc.prototype.ValueBufferType=Array,qc.prototype.DefaultInterpolation=2300,qc.prototype.InterpolantFactoryMethodLinear=void 0,qc.prototype.InterpolantFactoryMethodSmooth=void 0;class YI extends As{}YI.prototype.ValueTypeName="color";class Mm extends As{}Mm.prototype.ValueTypeName="number";class Hq extends Yo{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Hi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Hh extends As{InterpolantFactoryMethodLinear(e){return new Hq(this.times,this.values,this.getValueSize(),e)}}Hh.prototype.ValueTypeName="quaternion",Hh.prototype.DefaultInterpolation=2301,Hh.prototype.InterpolantFactoryMethodSmooth=void 0;class Xc extends As{}Xc.prototype.ValueTypeName="string",Xc.prototype.ValueBufferType=Array,Xc.prototype.DefaultInterpolation=2300,Xc.prototype.InterpolantFactoryMethodLinear=void 0,Xc.prototype.InterpolantFactoryMethodSmooth=void 0;class Em extends As{}Em.prototype.ValueTypeName="vector";class Sm{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Mr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(zq(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(As.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=qn.getKeyframeOrder(l);l=qn.sortedArray(l,1,u),c=qn.sortedArray(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new Mm(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let d=r[h];d||(r[h]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,d,f,p,y){if(0!==f.length){const _=[],g=[];qn.flattenJSON(f,_,g,p),0!==_.length&&y.push(new h(d,_,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(d&&0!==d.length)if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let y=0;y<d[p].morphTargets.length;y++)f[d[p].morphTargets[y]]=-1;for(const y in f){const _=[],g=[];for(let m=0;m!==d[p].morphTargets.length;++m){const E=d[p];_.push(E.time),g.push(E.morphTarget===y?1:0)}r.push(new Mm(".morphTargetInfluence["+y+"]",_,g))}l=f.length*o}else{const f=".bones["+t[h].name+"]";i(Em,f+".position",d,"pos",r),i(Hh,f+".quaternion",d,"rot",r),i(Em,f+".scale",d,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zq(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Vq(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Mm;case"vector":case"vector2":case"vector3":case"vector4":return Em;case"color":return YI;case"quaternion":return Hh;case"bool":case"boolean":return qc;case"string":return Xc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];qn.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Yc={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const Gq=new class KI{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return-1!==h&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],p=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}};class Ko{constructor(e){this.manager=void 0!==e?e:Gq,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ao={};class lo extends Ko{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Yc.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==ao[e])return void ao[e].push({onLoad:t,onProgress:i,onError:r});ao[e]=[],ao[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===c.body||void 0===c.body.getReader)return c;const u=ao[e],h=c.body.getReader(),d=c.headers.get("Content-Length"),f=d?parseInt(d):0,p=0!==f;let y=0;const _=new ReadableStream({start(g){!function m(){h.read().then(({done:E,value:w})=>{if(E)g.close();else{y+=w.byteLength;const T=new ProgressEvent("progress",{lengthComputable:p,loaded:y,total:f});for(let j=0,Q=u.length;j<Q;j++){const ae=u[j];ae.onProgress&&ae.onProgress(T)}g.enqueue(w),m()}})}()}});return new Response(_)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Yc.add(e,c);const u=ao[e];delete ao[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=ao[e];if(void 0===u)throw this.manager.itemError(e),c;delete ao[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Tm extends Ko{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Yc.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=bh("img");function l(){u(),Yc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Wq extends Ko{constructor(e){super(e)}load(e,t,i,r){const s=new Sh,o=new Tm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class ZI extends Ko{constructor(e){super(e)}load(e,t,i,r){const s=new cr,o=new Tm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class Is extends _n{constructor(e,t=1){super(),this.type="Light",this.color=new rt(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Is.prototype.isLight=!0;(class JI extends Is{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(_n.DefaultUp),this.updateMatrix(),this.groundColor=new rt(t)}copy(e){return Is.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const QI=new mt,eP=new k,tP=new k;class ub{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vp,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new Mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;eP.setFromMatrixPosition(e.matrixWorld),t.position.copy(eP),tP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(tP),t.updateMatrixWorld(),QI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(QI),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nP extends ub{constructor(){super(new Pi(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=2*_h*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}nP.prototype.isSpotLightShadow=!0;(class iP extends Is{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(_n.DefaultUp),this.updateMatrix(),this.target=new _n,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new nP}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const rP=new mt,Vh=new k,hb=new k;class sP extends ub{constructor(){super(new Pi(90,1,.5,500)),this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new Mn(2,1,1,1),new Mn(0,1,1,1),new Mn(3,1,1,1),new Mn(1,1,1,1),new Mn(3,0,1,1),new Mn(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Vh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Vh),hb.copy(i.position),hb.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(hb),i.updateMatrixWorld(),r.makeTranslation(-Vh.x,-Vh.y,-Vh.z),rP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rP)}}sP.prototype.isPointLightShadow=!0;(class oP extends Is{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new sP}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class aP extends ub{constructor(){super(new zp(-5,5,5,-5,.5,500))}}aP.prototype.isDirectionalLightShadow=!0;(class lP extends Is{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(_n.DefaultUp),this.updateMatrix(),this.target=new _n,this.shadow=new aP}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class cP extends Is{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class uP extends Is{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class hP{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new k)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],i*r*1.092548),t.addScaledVector(o[5],r*s*1.092548),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],i*s*1.092548),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*s),t.addScaledVector(o[3],1.023328*i),t.addScaledVector(o[4],.858086*i*r),t.addScaledVector(o[5],.858086*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],.858086*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}hP.prototype.isSphericalHarmonics3=!0;class Cm extends Is{constructor(e=new hP,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Cm.prototype.isLightProbe=!0;let Dm;(class dP extends Ct{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class Yq extends Ko{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Yc.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Yc.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class Kq extends Ko{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new lo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);(void 0===Dm&&(Dm=new(window.AudioContext||window.webkitAudioContext)),Dm).decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}(class Zq extends Cm{constructor(e,t,i=1){super(void 0,i);const r=(new rt).set(e),s=(new rt).set(t),o=new k(r.r,r.g,r.b),a=new k(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class Jq extends Cm{constructor(e,t=1){super(void 0,t);const i=(new rt).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class rX{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Hi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Hi.multiplyQuaternionsFlat(e,o,e,t,e,i),Hi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const fb="\\[\\]\\.:\\/",sX=new RegExp("["+fb+"]","g"),pb="[^"+fb+"]",oX="[^"+fb.replace("\\.","")+"]",aX=/((?:WC+[\/:])*)/.source.replace("WC",pb),lX=/(WCOD+)?/.source.replace("WCOD",oX),cX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pb),uX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pb),hX=new RegExp("^"+aX+lX+cX+uX+"$"),dX=["material","materials","bones"];class fX{constructor(e,t,i){const r=i||zn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let zn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(sX,"")}static parseTrackName(t){const i=hX.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==dX.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===u){u=h;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=fX,n})();zn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},zn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},zn.prototype.GetterByBindingType=[zn.prototype._getValue_direct,zn.prototype._getValue_array,zn.prototype._getValue_arrayElement,zn.prototype._getValue_toArray],zn.prototype.SetterByBindingTypeAndVersioning=[[zn.prototype._setValue_direct,zn.prototype._setValue_direct_setNeedsUpdate,zn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_array,zn.prototype._setValue_array_setNeedsUpdate,zn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_arrayElement,zn.prototype._setValue_arrayElement_setNeedsUpdate,zn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_fromArray,zn.prototype._setValue_fromArray_setNeedsUpdate,zn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class mX{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:fc,endingEnd:fc};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*i;if(l<0||0===i)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=pc,r.endingEnd=pc):(r.endingStart=e?this.zeroSlopeAtStart?pc:fc:2402,r.endingEnd=t?this.zeroSlopeAtEnd?pc:fc:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}(class gX extends Ra{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let h=0;h!==s;++h){const d=r[h],f=d.name;let p=u[f];if(void 0!==p)++p.referenceCount,o[h]=p;else{if(p=o[h],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new rX(zn.create(i,f,t&&t._propertyBindings[h].binding.parsedPath),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[h]=p}a[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new XI(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?Sm.findByName(r,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==l){const h=l.actionByRoot[s];if(void 0!==h&&h.blendMode===i)return h;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new mX(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?Sm.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class mb{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new mb(void 0===this.value.clone?this.value:this.value.clone())}}(class yX extends kc{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const wP=new Ve;class zh{constructor(e=new Ve(1/0,1/0),t=new Ve(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=wP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return wP.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}zh.prototype.isBox2=!0;const Zo=new k,Im=new mt,yb=new mt;function SP(n){const e=[];!0===n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,SP(n.children[t]));return e}const PP=new Float32Array(1);new Int32Array(PP.buffer),Wr.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Wr.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},dm.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class wX extends jo{constructor(e=10,t=10,i=4473924,r=8947848){i=new rt(i),r=new rt(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,f=0,p=-a;d<=t;d++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const y=d===s?i:r;y.toArray(c,f),f+=3,y.toArray(c,f),f+=3,y.toArray(c,f),f+=3,y.toArray(c,f),f+=3}const u=new Ct;u.setAttribute("position",new pt(l,3)),u.setAttribute("color",new pt(c,3)),super(u,new Oi({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class bX extends jo{constructor(e){const t=SP(e),i=new Ct,r=[],s=[],o=new rt(0,0,1),a=new rt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new pt(r,3)),i.setAttribute("color",new pt(s,3)),super(i,new Oi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");yb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Im.multiplyMatrices(yb,a.matrixWorld),Zo.setFromMatrixPosition(Im),r.setXYZ(o,Zo.x,Zo.y,Zo.z),Im.multiplyMatrices(yb,a.parent.matrixWorld),Zo.setFromMatrixPosition(Im),r.setXYZ(o+1,Zo.x,Zo.y,Zo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ko.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class db{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(i){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},Ko.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},zh.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},zh.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},zh.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},zh.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},zr.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},zr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},zr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},zr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},zr.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},Ha.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},Ba.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Vp.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Ai.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Ai.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Ai.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Ai.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Ai.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Ai.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},mt.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},mt.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},mt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new k).setFromMatrixColumn(this,3)},mt.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},mt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},mt.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},mt.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},mt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},mt.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},mt.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},mt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},mt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},mt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},mt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},mt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},mt.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},mt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},mt.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)},mt.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},ro.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},Hi.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},Hi.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ua.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Ua.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},Ua.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},yi.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},yi.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},yi.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},yi.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},yi.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},yi.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),yi.getBarycoord(n,e,t,i,r)},yi.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),yi.getNormal(n,e,t,i)},so.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},so.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Xo(this,n)},so.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Bh(this,n)},Ve.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},Ve.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},Ve.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},k.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},k.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},k.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},k.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},k.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},k.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},k.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},k.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},k.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Mn.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},Mn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},_n.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},_n.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},_n.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},_n.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},_n.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(_n.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Ci.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Ci.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),$0.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Pi.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(Is.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(Ln.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===yh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(yh)}}}),Ln.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?yh:gh),this},Ln.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ln.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ct.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},Ct.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Ln(arguments[1],arguments[2])))},Ct.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},Ct.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Ct.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Ct.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},Ct.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(Ct.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),kc.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?yh:gh),this},kc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Xo.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Xo.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Xo.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},qp.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},mb.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(_i.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new rt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(hs.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),En.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)},En.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},En.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},En.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},En.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},En.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},En.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},En.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},En.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},En.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},En.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},En.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},En.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},En.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},En.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},En.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},En.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},En.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},En.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},En.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},En.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},En.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},En.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},En.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},En.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(En.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?$n:Oo}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(tI.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ur.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class tX extends _n{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Kq).load(n,function(i){e.setBuffer(i)}),this},P0.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},P0.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)},Na.crossOrigin=void 0,Na.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new ZI;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s},Na.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Wq;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s},Na.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Na.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"138"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="138");class RP{}class LP{}class Ps{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ps?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ps;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ps?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class TX{encodeKey(e){return NP(e)}encodeValue(e){return NP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const DX=/%(\d[a-f0-9])/gi,AX={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function NP(n){return encodeURIComponent(n).replace(DX,(e,t)=>{var i;return null!==(i=AX[t])&&void 0!==i?i:e})}function OP(n){return`${n}`}class Jo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new TX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function CX(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Jo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(OP(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(OP(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class IX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function FP(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function kP(n){return"undefined"!=typeof Blob&&n instanceof Blob}function BP(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Gh{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function PX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ps),this.context||(this.context=new IX),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Jo,this.urlWithParams=t}serializeBody(){return null===this.body?null:FP(this.body)||kP(this.body)||BP(this.body)||function RX(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||BP(this.body)?null:kP(this.body)?this.body.type||null:FP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((d,f)=>d.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((d,f)=>d.set(f,e.setParams[f]),u)),new Gh(i,r,o,{params:u,headers:c,context:h,reportProgress:l,responseType:s,withCredentials:a})}}var vi=(()=>((vi=vi||{})[vi.Sent=0]="Sent",vi[vi.UploadProgress=1]="UploadProgress",vi[vi.ResponseHeader=2]="ResponseHeader",vi[vi.DownloadProgress=3]="DownloadProgress",vi[vi.Response=4]="Response",vi[vi.User=5]="User",vi))();class vb{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ps,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bb extends vb{constructor(e={}){super(e),this.type=vi.ResponseHeader}clone(e={}){return new bb({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Om extends vb{constructor(e={}){super(e),this.type=vi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Om({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class UP extends vb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function xb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let wb=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Gh)s=t;else{let l,c;l=r.headers instanceof Ps?r.headers:new Ps(r.headers),r.params&&(c=r.params instanceof Jo?r.params:new Jo({fromObject:r.params})),s=new Gh(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Ot(s).pipe(Kl(l=>this.handler.handle(l)));if(t instanceof Gh||"events"===r.observe)return o;const a=o.pipe(Hr(l=>l instanceof Om));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(nt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(nt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(nt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(nt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Jo).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,xb(r,i))}post(t,i,r={}){return this.request("POST",t,xb(r,i))}put(t,i,r={}){return this.request("PUT",t,xb(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Ie(RP))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();class HP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const VP=new xt("HTTP_INTERCEPTORS");let LX=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const NX=/^\)\]\}',?\n/;let zP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new x(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((f,p)=>r.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=r.statusText||"OK",p=new Ps(r.getAllResponseHeaders()),y=function OX(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new bb({headers:p,status:r.status,statusText:f,url:y}),o},l=()=>{let{headers:f,status:p,statusText:y,url:_}=a(),g=null;204!==p&&(g=void 0===r.response?r.responseText:r.response),0===p&&(p=g?200:0);let m=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof g){const E=g;g=g.replace(NX,"");try{g=""!==g?JSON.parse(g):null}catch(w){g=E,m&&(m=!1,g={error:w,text:g})}}m?(i.next(new Om({body:g,headers:f,status:p,statusText:y,url:_||void 0})),i.complete()):i.error(new UP({error:g,headers:f,status:p,statusText:y,url:_||void 0}))},c=f=>{const{url:p}=a(),y=new UP({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(y)};let u=!1;const h=f=>{u||(i.next(a()),u=!0);let p={type:vi.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!r.responseText&&(p.partialText=r.responseText),i.next(p)},d=f=>{let p={type:vi.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",h),null!==s&&r.upload&&r.upload.addEventListener("progress",d)),r.send(s),i.next({type:vi.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",h),null!==s&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Ie(P1))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();const Mb=new xt("XSRF_COOKIE_NAME"),Eb=new xt("XSRF_HEADER_NAME");class GP{}let FX=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=b1(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Ie(yn),Ie($l),Ie(Mb))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),Sb=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Ie(GP),Ie(Eb))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),kX=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(VP,[]);this.chain=i.reduceRight((r,s)=>new HP(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Ie(LP),Ie(Xi))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})(),BX=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Sb,useClass:LX}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Mb,useValue:t.cookieName}:[],t.headerName?{provide:Eb,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({providers:[Sb,{provide:VP,useExisting:Sb,multi:!0},{provide:GP,useClass:FX},{provide:Mb,useValue:"XSRF-TOKEN"},{provide:Eb,useValue:"X-XSRF-TOKEN"}]}),n})(),UX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({providers:[wb,{provide:RP,useClass:kX},zP,{provide:LP,useExisting:zP}],imports:[[BX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const WP=["mat-button",""],jP=["*"],VX=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],zX=B6(pD(U6(class{constructor(n){this._elementRef=n}})));let qP=(()=>{class n extends zX{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of VX)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(Pe(Kn),Pe(op),Pe(Ys,8))},n.\u0275cmp=Wn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&Wl(lp,5),2&t){let r;Lr(r=Nr())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(Rr("disabled",i.disabled||null),Yi("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ir],attrs:WP,ngContentSelectors:jP,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(_r(),De(0,"span",0),Vn(1),Ae(),wn(2,"span",1)(3,"span",2)),2&t&&(qt(2),Yi("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Yn("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[lp],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),GX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[bD,wr],wr]}),n})();const XP=["*"],YP=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n";class $X{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(i=>this._trackTile(i))}_trackTile(e){const t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new qX(this.rowIndex,t)}_findMatchingGap(e){let t=-1,i=-1;do{this.columnIndex+e>this.tracker.length?(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)):(t=this.tracker.indexOf(0,this.columnIndex),-1!=t?(i=this._findGapEndIndex(t),this.columnIndex=t+1):(this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t)))}while(i-t<e||0==i);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(0!=this.tracker[t])return t;return this.tracker.length}_markTilePosition(e,t){for(let i=0;i<t.colspan;i++)this.tracker[e+i]=t.rowspan}}class qX{constructor(e,t){this.row=e,this.col=t}}const KP=new xt("MAT_GRID_LIST");let ZP=(()=>{class n{constructor(t,i){this._element=t,this._gridList=i,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(ch(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(ch(t))}_setStyle(t,i){this._element.nativeElement.style[t]=i}}return n.\u0275fac=function(t){return new(t||n)(Pe(Kn),Pe(KP,8))},n.\u0275cmp=Wn({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(t,i){2&t&&Rr("rowspan",i.rowspan)("colspan",i.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:XP,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(t,i){1&t&&(_r(),De(0,"div",0),Vn(1),Ae())},styles:[YP],encapsulation:2,changeDetection:0}),n})();const XX=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class Tb{constructor(){this._rows=0,this._rowspan=0}init(e,t,i,r){this._gutterSize=JP(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=i,this._direction=r}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return 0===t?"0":Ka(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,i){let r=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,i,r,s),this.setRowStyles(e,t,r,s)}setColStyles(e,t,i,r){let s=this.getBaseTileSize(i,r);e._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(s,t)),e._setStyle("width",Ka(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}}class YX extends Tb{constructor(e){super(),this.fixedRowHeight=e}init(e,t,i,r){super.init(e,t,i,r),this.fixedRowHeight=JP(this.fixedRowHeight),XX.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",Ka(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",Ka(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class KX extends Tb{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,i,r){this.baseTileHeight=this.getBaseTileSize(i/this.rowHeightRatio,r),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",Ka(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",Ka(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){const t=e.split(":");this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}}class ZX extends Tb{setRowStyles(e,t){let s=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",Ka(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function Ka(n){return`calc(${n})`}function JP(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}let QX=(()=>{class n{constructor(t,i){this._element=t,this._dir=i,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(ch(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${null==t?"":t}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const i=`${null==t?"":t}`;i!==this._rowHeight&&(this._rowHeight=i,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new ZX:t&&t.indexOf(":")>-1?new KX(t):new YX(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new $X);const t=this._tileCoordinator,i=this._tiles.filter(s=>!s._gridList||s._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,i),this._tileStyler.init(this.gutterSize,t,this.cols,r),i.forEach((s,o)=>{const a=t.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}return n.\u0275fac=function(t){return new(t||n)(Pe(Kn),Pe(uD,8))},n.\u0275cmp=Wn({type:n,selectors:[["mat-grid-list"]],contentQueries:function(t,i,r){if(1&t&&fa(r,ZP,5),2&t){let s;Lr(s=Nr())&&(i._tiles=s)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(t,i){2&t&&Rr("cols",i.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[Ms([{provide:KP,useExisting:n}])],ngContentSelectors:XP,decls:2,vars:0,template:function(t,i){1&t&&(_r(),De(0,"div"),Vn(1),Ae())},styles:[YP],encapsulation:2,changeDetection:0}),n})(),eY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[gD,wr],gD,wr]}),n})();const tY=["*",[["mat-card-footer"]]],nY=["*","mat-card-footer"];let aY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=St({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),lY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=St({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),cY=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=St({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,i){2&t&&Yi("mat-card-actions-align-end","end"===i.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),uY=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(Pe(Ys,8))},n.\u0275cmp=Wn({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&Yi("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:nY,decls:2,vars:0,template:function(t,i){1&t&&(_r(tY),Vn(0),Vn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),hY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[wr],wr]}),n})();const dY=["canvas"];function fY(n,e){if(1&n&&(De(0,"mat-grid-tile",10),wn(1,"canvas",11,12),Ae()),2&n){const t=e.$implicit;Ud("background",t.color),Yn("colspan",t.cols)("rowspan",t.rows)}}let pY=(()=>{class n{constructor(t){this.http=t,this.catData="",this.randomActivity="",this.bitcoinPrice="",this.dogPicture="",this.canvasRef=null,this.RotationSpeedX=.03,this.rotationSpeedY=.02,this.size=200,this.texture="/assets/texture.jpg",this.cameraZ=400,this.fieldOfView=1,this.nearClippingPlane=1,this.farClippingPlane=1e3,this.loader=new ZI,this.geometry=new Go(2,2,2),this.material=new io({map:this.loader.load(this.texture)}),this.cube=new Ci(this.geometry,this.material),this.tiles=[{text:"One",cols:3,rows:1,color:"lightblue"},{text:"Two",cols:1,rows:2,color:"lightgreen"},{text:"Three",cols:1,rows:1,color:"lightpink"},{text:"Four",cols:2,rows:1,color:"#DDBDF1"}],this.books=[{id:1,title:"Super Man"},{id:2,title:"Spider Man"},{id:3,title:"Aladdin"},{id:4,title:"Downton Abbey"}],this.getCatFacts().subscribe(i=>{console.log(this.catData=JSON.parse(i).fact)}),this.getRandomActivity().subscribe(i=>{console.log(this.randomActivity=JSON.parse(i).activity)}),this.getBitcoinPrice().subscribe(i=>{console.log(this.bitcoinPrice=JSON.parse(i))}),this.getDogPicture().subscribe(i=>{console.log(this.dogPicture=JSON.parse(i))})}get canvas(){return this.canvasRef.nativeElement}createScene(){this.scene=new qp,this.scene.background=new rt("white"),this.scene.add(this.cube);let t=this.getAspectRatio();this.camera=new Pi(this.fieldOfView,t,this.nearClippingPlane,this.farClippingPlane),this.camera.position.z=this.cameraZ}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}animateCube(){this.cube.rotation.x+=this.RotationSpeedX,this.cube.rotation.y+=this.rotationSpeedY}startRenderingLoop(){this.renderer=new En({canvas:this.canvas}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight);let t=this;!function i(){requestAnimationFrame(i),t.animateCube(),t.renderer.render(t.scene,t.camera)}()}getCatFacts(){return this.http.get("https://catfact.ninja/fact",{observe:"body",responseType:"text"})}getRandomActivity(){return this.http.get("https://www.boredapi.com/api/activity",{observe:"body",responseType:"text"})}getBitcoinPrice(){return this.http.get("https://api.coindesk.com/v1/bpi/currentprice.json",{observe:"body",responseType:"text"})}getDogPicture(){return this.http.get("https://dog.ceo/api/breeds/image/random",{observe:"body",responseType:"text"})}trackByBookCode(t,i){return i.title}ngOnInit(){}ngAfterViewInit(){console.log("test"),this.createScene(),this.startRenderingLoop()}}return n.\u0275fac=function(t){return new(t||n)(Pe(wb))},n.\u0275cmp=Wn({type:n,selectors:[["app-api-examples"]],viewQuery:function(t,i){if(1&t&&(Wl(dY,5),Wl(AD,5)),2&t){let r;Lr(r=Nr())&&(i.canvasRef=r.first),Lr(r=Nr())&&(i.accordion=r.first)}},inputs:{RotationSpeedX:"RotationSpeedX",rotationSpeedY:"rotationSpeedY",size:"size",texture:"texture",cameraZ:"cameraZ",fieldOfView:"fieldOfView",nearClippingPlane:["nearClipping","nearClippingPlane"],farClippingPlane:["farClipping","farClippingPlane"]},decls:54,vars:8,consts:[[1,"example-action-buttons"],["mat-raised-button","","color","success",1,"expansion-panel-button",3,"click"],["mat-raised-button","","color","success",3,"click"],["multi","",1,"example-headers-align"],[1,"dogPicture"],[1,"cropped",3,"src"],[1,"padding-ten"],["cols","4","rowHeight","200px"],[3,"colspan","rowspan","background",4,"ngFor","ngForOf"],["mat-button",""],[3,"colspan","rowspan"],["id","canvas"],["canvas",""]],template:function(t,i){1&t&&(De(0,"div",0)(1,"button",1),rr("click",function(){return i.accordion.openAll()}),Ye(2,"Expand All"),Ae(),De(3,"button",2),rr("click",function(){return i.accordion.closeAll()}),Ye(4,"Collapse All"),Ae()(),De(5,"mat-accordion",3)(6,"mat-expansion-panel")(7,"mat-expansion-panel-header")(8,"mat-panel-title"),Ye(9," API #1: "),Ae(),De(10,"mat-panel-description"),Ye(11,"Cat Facts "),Ae()(),Ye(12),Ae(),De(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title"),Ye(16," API #2: "),Ae(),De(17,"mat-panel-description"),Ye(18,"Random Activity "),Ae()(),Ye(19),Ae(),De(20,"mat-expansion-panel")(21,"mat-expansion-panel-header")(22,"mat-panel-title"),Ye(23," API #3: "),Ae(),De(24,"mat-panel-description"),Ye(25),Ae()(),De(26,"ul")(27,"li"),Ye(28),Ae(),De(29,"li"),Ye(30),Ae(),De(31,"li"),Ye(32),Ae()()(),De(33,"mat-expansion-panel")(34,"mat-expansion-panel-header")(35,"mat-panel-title"),Ye(36," API #4: "),Ae(),De(37,"mat-panel-description"),Ye(38,"Dog Photo "),Ae()(),De(39,"div",4),wn(40,"img",5),Ae()()(),De(41,"div",6)(42,"mat-grid-list",7),Gs(43,fY,3,4,"mat-grid-tile",8),Ae()(),De(44,"mat-card")(45,"mat-card-title"),Ye(46,"Actions Buttons"),Ae(),De(47,"mat-card-subtitle"),Ye(48,"Subtitle"),Ae(),De(49,"mat-card-actions")(50,"button",9),Ye(51,"LIKE"),Ae(),De(52,"button",9),Ye(53,"SHARE"),Ae()()()),2&t&&(qt(12),oi(" ",i.catData," "),qt(7),oi(" ",i.randomActivity," "),qt(6),oi(" ",i.bitcoinPrice.chartName?i.bitcoinPrice.chartName:""," Prices "),qt(3),oi(" USD: $",null==i.bitcoinPrice||null==i.bitcoinPrice.bpi||null==i.bitcoinPrice.bpi.USD?null:i.bitcoinPrice.bpi.USD.rate," "),qt(2),oi(" British Pound: $",null==i.bitcoinPrice||null==i.bitcoinPrice.bpi||null==i.bitcoinPrice.bpi.GBP?null:i.bitcoinPrice.bpi.GBP.rate," "),qt(2),oi(" Euro: $",null==i.bitcoinPrice||null==i.bitcoinPrice.bpi||null==i.bitcoinPrice.bpi.EUR?null:i.bitcoinPrice.bpi.EUR.rate," "),qt(8),Fl("src",i.dogPicture.message?i.dogPicture.message:null,aa),qt(3),Yn("ngForOf",i.tiles))},directives:[qP,AD,CD,DD,TG,SG,QX,x1,ZP,uY,aY,lY,cY],styles:[".example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.dogPicture[_ngcontent-%COMP%]{text-align:center}#canvas[_ngcontent-%COMP%]{height:90%;width:90%}.cropped[_ngcontent-%COMP%]{width:50%;height:50%}.example-action-buttons[_ngcontent-%COMP%]{display:flex}.expansion-panel-button[_ngcontent-%COMP%]{margin-right:8px}.mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.padding-ten[_ngcontent-%COMP%]{padding:10px}"]}),n})();var mY=K(5452);let QP=(()=>{class n{constructor(t){this.http=t,this.configUrl=window.location.protocol+"//"+window.location.host+"/mediumapi"}GetRssFeedData(){return this.http.get(this.configUrl,{observe:"body",responseType:"text"})}getMedium(){const t={headers:new Ps({Accept:"text/html, application/xhtml+xml, */*","Content-Type":"application/x-www-form-urlencoded"}),observe:"events",responseType:"text"};return this.http.get(this.configUrl,t)}}return n.\u0275fac=function(t){return new(t||n)(Ie(wb))},n.\u0275prov=_t({token:n,factory:n.\u0275fac}),n})();function gY(n,e){if(1&n&&(De(0,"div")(1,"div",11)(2,"div",12),Ye(3),Ae(),De(4,"div",13)(5,"div",14)(6,"div",15),Ye(7,"Categories: "),Ae(),Ye(8),Ae(),De(9,"div",14)(10,"div",15),Ye(11,"Published On: "),Ae(),Ye(12),Ae()(),De(13,"div",16),Ye(14,"Preview:"),Ae(),De(15,"p"),Ye(16),Ae(),De(17,"div")(18,"a",17),Ye(19,"Link to Blog"),Ae()()()()),2&n){const t=ua();Yn("@enterTrigger","fadeIn"),qt(3),Pu(null==t.blogOne?null:t.blogOne.title),qt(5),oi(" ",null==t.blogOne?null:t.blogOne.category," "),qt(4),oi(" ",null==t.blogOne?null:t.blogOne.pubDate,""),qt(4),oi('"',t.restrictTextLength(null==t.blogOne?null:t.blogOne["content:encoded"]),'"'),qt(2),Fl("href",null==t.blogOne?null:t.blogOne.link,aa)}}function yY(n,e){if(1&n&&(De(0,"div")(1,"div",11)(2,"div",12),Ye(3),Ae(),De(4,"div",13)(5,"div",14)(6,"div",15),Ye(7,"Categories: "),Ae(),Ye(8),Ae(),De(9,"div",14)(10,"div",15),Ye(11,"Published On: "),Ae(),Ye(12),Ae()(),De(13,"div",16),Ye(14,"Preview:"),Ae(),De(15,"p"),Ye(16),Ae(),De(17,"div")(18,"a",17),Ye(19,"Link to Blog"),Ae()()()()),2&n){const t=ua();Yn("@enterTrigger","fadeIn"),qt(3),Pu(null==t.blogTwo?null:t.blogTwo.title),qt(5),oi(" ",null==t.blogTwo?null:t.blogTwo.category," "),qt(4),oi(" ",null==t.blogTwo?null:t.blogTwo.pubDate,""),qt(4),oi('"',t.restrictTextLength(null==t.blogTwo?null:t.blogTwo["content:encoded"]),'"'),qt(2),Fl("href",null==t.blogTwo?null:t.blogTwo.link,aa)}}function _Y(n,e){if(1&n&&(De(0,"div")(1,"div",11)(2,"div",12),Ye(3),Ae(),De(4,"div",13)(5,"div",14)(6,"div",15),Ye(7,"Categories: "),Ae(),Ye(8),Ae(),De(9,"div",14)(10,"div",15),Ye(11,"Published On: "),Ae(),Ye(12),Ae()(),De(13,"div",16),Ye(14,"Preview:"),Ae(),De(15,"p"),Ye(16),Ae(),De(17,"div")(18,"a",17),Ye(19,"Link to Blog"),Ae()()()()),2&n){const t=ua();Yn("@enterTrigger","fadeIn"),qt(3),oi(" ",null==t.blogThree?null:t.blogThree.title,""),qt(5),oi(" ",null==t.blogThree?null:t.blogThree.category," "),qt(4),oi(" ",null==t.blogThree?null:t.blogThree.pubDate,""),qt(4),oi('"',t.restrictTextLength(null==t.blogThree?null:t.blogThree["content:encoded"]),'"'),qt(2),Fl("href",null==t.blogThree?null:t.blogThree.link,aa)}}let vY=(()=>{class n{constructor(t){this.mediumService=t}strip_tags(t){return t.replace(/<\/?[^>]+>/gi,"")}restrictTextLength(t){return null==t?"":this.strip_tags(t[0]).substring(0,250)+"..."}ngOnInit(){this.mediumService.GetRssFeedData().subscribe(t=>{let i=mY.parseString;console.log(t),i(t,(r,s)=>{this.RssData=s}),this.blogOne=this.RssData.rss.channel[0].item[0],this.blogTwo=this.RssData.rss.channel[0].item[1],this.blogThree=this.RssData.rss.channel[0].item[2]})}}return n.\u0275fac=function(t){return new(t||n)(Pe(QP))},n.\u0275cmp=Wn({type:n,selectors:[["app-blogs"]],decls:21,vars:3,consts:[[1,"text-align-center"],["type","hidden"],["blogpostpreview",""],[1,"row","width-100"],[1,"col-md-10"],[1,"terminal",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"col-md-2"],[1,"vertical-inline-flex"],[1,"blog-post-button","margin-5",3,"click"],[1,"margin-20"],[1,"title"],[1,"subtitles-container"],[1,"inline-flex"],[1,"subtitle"],[1,"preview"],["target","_blank",3,"href"]],template:function(t,i){if(1&t){const r=function NM(){return ze()}();De(0,"h1",0),Ye(1,"Blogs"),Ae(),wn(2,"input",1,2),De(4,"div",3)(5,"div",4)(6,"div",5),Gs(7,gY,20,6,"div",6),Gs(8,yY,20,6,"div",7),Gs(9,_Y,20,6,"div",7),Ae()(),De(10,"div",8)(11,"div",9)(12,"div",10),rr("click",function(){return id(r),Au(3).value="component"}),De(13,"span"),Ye(14," blog post 1"),Ae()(),De(15,"div",10),rr("click",function(){return id(r),Au(3).value="2"}),De(16,"span"),Ye(17," blog post 2"),Ae()(),De(18,"div",10),rr("click",function(){return id(r),Au(3).value="3"}),De(19,"span"),Ye(20," blog post 3"),Ae()()()()()}if(2&t){const r=Au(3);qt(6),Yn("ngSwitch",r.value),qt(2),Yn("ngSwitchCase","2"),qt(1),Yn("ngSwitchCase","3")}},directives:[ff,S1,E1],styles:[".content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}.vertical-inline-flex[_ngcontent-%COMP%]{display:inline-flex;width:100%;margin-top:10px}.inline-flex[_ngcontent-%COMP%]{display:inline-flex;margin-right:10px}.blog-post-button[_ngcontent-%COMP%]{padding:10px;width:100%;border:1px solid #2f5B22;background-color:#7cd273;border-radius:10px;margin-left:5px;margin-right:5px;text-align:center}@media screen and (min-width: 767px){.vertical-inline-flex[_ngcontent-%COMP%]{flex-direction:column;top:14%;position:relative}}.margin-5[_ngcontent-%COMP%]{margin:5px}.margin-20[_ngcontent-%COMP%]{margin:20px}.preview[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:5px;font-weight:640}.text-align-center[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;width:80%;margin:5px 5px 15px}.subtitle[_ngcontent-%COMP%]{font-weight:500;margin-right:5px}.subtitles-container[_ngcontent-%COMP%]{display:inline-flex}.terminal[_ngcontent-%COMP%]{position:relative;width:100%;border-radius:6px;overflow:hidden;border:1px solid #2f5B22;background-color:#f0f0f0;opacity:.7;min-height:275px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}@media screen and (max-width: 767px){.terminal[_ngcontent-%COMP%]{width:100%}.subtitles-container[_ngcontent-%COMP%]{display:block}.subtitle[_ngcontent-%COMP%]{display:contents}}.width-100[_ngcontent-%COMP%]{width:100%}"],data:{animation:[F_("enterTrigger",[qu("fadeIn",So({opacity:"1"})),B_("void => *",[So({opacity:"0"}),k_("500ms")])])]}}),n})();const bY=[{path:"premierLeagueAPI",component:fz},{path:"apiExamples",component:pY},{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-homepage"]],decls:79,vars:0,consts:[[1,"header-one"],[1,"row"],[1,"col-md-6"],[1,"page-section"],[1,"page-section-header"],[1,"page-section-body"],[1,"col-md-3"],[1,"col-md-9"]],template:function(t,i){1&t&&(De(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),Ye(4,"Hello, I'm Jordan Yarros."),Ae(),De(5,"h1"),Ye(6,"I am a Software Developer."),Ae()(),wn(7,"div",2),Ae()(),De(8,"p"),Ye(9,"Welcome, Thank you for visiting my page! Please explore"),Ae(),De(10,"div",3)(11,"h3",4),Ye(12,"About Me"),Ae(),De(13,"div",5)(14,"div",1)(15,"div",6),Ye(16," profile photo "),Ae(),De(17,"div",7)(18,"p"),Ye(19," I am a Software Developer in Virginia, USA. Whether it is with problem solving or learning new things, I love to push and challenge myself daily. "),Ae(),De(20,"p"),Ye(21,"In the pursuit of new ideas, I hope to gather diverse and broad perspectives so that I can apply these unique experiences to interesting problems. "),Ae(),De(22,"p"),Ye(23," As a previous member of a NCAA collegiate soccer team, I understand the value in other's voices. Listening skills and empathy were important aspects in being a reliable teammate. "),Ae(),De(24,"p"),Ye(25," Outside of work I like to exercise, join social team sports, hike, explore my city, and travel. "),Ae()()()()(),De(26,"div",3)(27,"h3",4),Ye(28,"Career"),Ae(),De(29,"div",5)(30,"div",1)(31,"div",6),Ye(32," profile photo "),Ae(),De(33,"div",7)(34,"p"),Ye(35," ADP Associate Application Developer 2019-2021 "),Ae(),De(36,"ol")(37,"li")(38,"p"),Ye(39,"Drupal Developer"),Ae(),De(40,"ul")(41,"li"),Ye(42,"Apache, PHP, CSS, Jquery, Javascript, Drupal, Drush, Composer "),Ae(),De(43,"li"),Ye(44," Biweekly Deployments"),Ae(),De(45,"li"),Ye(46," Agile Development, Kanban, Jenkins, Bitbucket, Git"),Ae(),De(47,"li"),Ye(48," content Repository creation"),Ae(),De(49,"li"),Ye(50," Chatbot integration "),Ae(),De(51,"li"),Ye(52," Page Analytics "),Ae()()(),De(53,"li")(54,"p"),Ye(55,"Angular development"),Ae(),wn(56,"p"),De(57,"ul")(58,"li"),Ye(59," Shadow Render Tests, Component Creation, Service Injection, SCSS, Met Component Rendering, Form Submission"),Ae()()()(),De(60,"p"),Ye(61," ADP GPT Intern Summer of 2018 "),Ae()()()()(),De(62,"div",3)(63,"h3",4),Ye(64,"Projects"),Ae(),De(65,"div",5)(66,"div",1)(67,"div",6),Ye(68," profile photo "),Ae(),De(69,"div",7)(70,"p"),Ye(71," I am a Software Developer in Virginia, USA. Whether it is with problem solving or learning new things, I love to push and challenge myself daily. "),Ae(),De(72,"p"),Ye(73,"In the pursuit of new ideas, I hope to gather diverse and broad perspectives so that I can apply these unique experiences to interesting problems. "),Ae(),De(74,"p"),Ye(75," As a previous member of a NCAA collegiate soccer team, I understand the value in other's voices. Listening skills and empathy were important aspects in being a reliable teammate. "),Ae(),De(76,"p"),Ye(77," Outside of work I like to exercise, join social team sports, hike, explore my city, and travel. "),Ae()()()()(),wn(78,"app-blogs"))},directives:[vY],styles:['@charset "UTF-8";app-blogs[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}h1[_ngcontent-%COMP%]{text-align:left;margin:0}.header-one[_ngcontent-%COMP%]{width:100%}.blog-post-button[_ngcontent-%COMP%]{padding:10px;width:100%;border:1px solid #2f5B22;background-color:#7cd273;border-radius:10px;margin-left:5px;margin-right:5px;text-align:center}@media screen and (min-width: 767px){.vertical-inline-flex[_ngcontent-%COMP%]{flex-direction:column;top:14%;position:relative}}.margin-5[_ngcontent-%COMP%]{margin:5px}.page-section[_ngcontent-%COMP%]{width:100%;margin:10px 0}.page-section-header[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #B2ABA5;background-color:#f2f0ed;margin:0}.page-section-body[_ngcontent-%COMP%]{padding:15px;border:1px solid #B2ABA5;border-style:none none solid none}.test[_ngcontent-%COMP%]{width:200px;height:200px;background-color:#ff0;color:#fff}.terminal[_ngcontent-%COMP%]{position:relative;width:100%;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:#3a3a3a;color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.text-align-center[_ngcontent-%COMP%]{text-align:center}@media screen and (max-width: 767px){.terminal[_ngcontent-%COMP%]{width:100%}}.vertical-inline-flex[_ngcontent-%COMP%]{display:inline-flex;width:100%;margin-top:10px}.width-100[_ngcontent-%COMP%]{width:100%}']}),n})()}];let xY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[OC.forRoot(bY)],OC]}),n})(),wY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-toolbar"]],decls:35,vars:0,consts:[["role","banner",1,"toolbar"],["role","navigation"],["id","menuToggle"],["type","checkbox"],["id","menu"],["routerLink","/","routerLinkActivities","active"],["routerLink","/apiExamples","routerLinkActivities","active"],["routerLink","/premierLeagueAPI","routerLinkActivities","active"],["id","home-logo"],["id","grad1","x1","0%","y1","0%","x2","100%","y2","0%"],["offset","0%",2,"stop-color","#7cd273","stop-opacity","1"],["offset","100%",2,"stop-color","white","stop-opacity","1"],["points","25,0 0,50 50,50",2,"fill","url(#grad1)"],["points","31,13 14,50 50,50",2,"fill","url(#grad1)"],[1,"spacer"],["aria-label","Angular on twitter","target","_blank","rel","noopener","href","https://twitter.com/angular","title","Twitter"],["id","twitter-logo","height","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 400 400"],["width","400","height","400","fill","none"],["d","M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23","fill","#fff"],["aria-label","Angular on YouTube","target","_blank","rel","noopener","href","https://youtube.com/angular","title","YouTube"],["id","youtube-logo","height","24","width","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"]],template:function(t,i){1&t&&(De(0,"div",0)(1,"nav",1)(2,"div",2),wn(3,"input",3)(4,"span")(5,"span")(6,"span"),De(7,"ul",4)(8,"a",5)(9,"li"),Ye(10,"Home"),Ae()(),De(11,"a",6)(12,"li"),Ye(13,"Api Examples Page"),Ae()(),De(14,"a",7)(15,"li"),Ye(16,"Premier League API"),Ae()()()()(),Hs(),De(17,"svg",8)(18,"defs")(19,"linearGradient",9),wn(20,"stop",10)(21,"stop",11),Ae()(),wn(22,"polygon",12)(23,"polygon",13),Ae(),oa(),De(24,"span"),Ye(25,"Welcome"),Ae(),wn(26,"div",14),De(27,"a",15),Hs(),De(28,"svg",16),wn(29,"rect",17)(30,"path",18),Ae()(),oa(),De(31,"a",19),Hs(),De(32,"svg",20),wn(33,"path",21)(34,"path",22),Ae()()())},directives:[ip],styles:[".toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#7cd273;color:#fff;font-weight:600;position:fixed;z-index:9999}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}.toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover{opacity:.8}.toolbar[_ngcontent-%COMP%]   #home-logo[_ngcontent-%COMP%]{height:50px;width:50px;margin:0 8px;color:#fff}.spacer[_ngcontent-%COMP%]{flex:1}#menuToggle[_ngcontent-%COMP%]{margin:15px;z-index:1000;-webkit-user-select:none;user-select:none}#menuToggle[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;transition:color .3s ease}#menuToggle[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:tomato}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:32px;height:30px;position:absolute;top:15px;left:15px;cursor:pointer;opacity:0;z-index:2;-webkit-touch-callout:none}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:33px;height:4px;margin-bottom:5px;position:relative;background:#FFFFFF;border-radius:3px;z-index:1;transform-origin:4px 0px;transition:transform .5s cubic-bezier(.77,.2,.05,1),background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{transform-origin:0% 0%}#menuToggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-last-child(2){transform-origin:0% 100%}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]{opacity:1;transform:rotate(45deg) translate(-2px,-1px);background:#232323}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-last-child(3){opacity:0;transform:rotate(0) scale(.2)}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:nth-last-child(2){transform:rotate(-45deg) translateY(-1px)}#menu[_ngcontent-%COMP%]{position:absolute;width:300px;margin:0 0 0 -50px;padding:25px 50px;top:60px;box-shadow:20px 20px 50px #00000080;border-radius:0 0 15px;background:#f0f0f0;border-right:rgba(255,255,255,.5);border-bottom:rgba(255,255,255,.5);align-items:center;list-style-type:none;-webkit-font-smoothing:antialiased;transform-origin:0% 0%;transform:translate(-100%);transition:transform .5s cubic-bezier(.77,.2,.05,1)}#menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0;font-size:22px}#menuToggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ ul[_ngcontent-%COMP%]{transform:none}"]}),n})();const MY=["floatingButton"];let EY=(()=>{class n{constructor(){this.timer=0,this.timer2=0,this.timer3=0,this.floatingTextOpacity=1,this.floatingTextStyle="block",this.floatingLogoStyle=""}ngOnInit(){setTimeout(()=>{this.collapseButton()},5e3)}collapseButton(){console.log("out "+this.floating_button),this.floating_button.nativeElement.classList.add("collapse-button"),this.floatingTextOpacity=0,this.floatingTextStyle="none",this.floatingLogoStyle="auto"}openButton(){console.log("in"),this.floatingTextStyle="block",setTimeout(()=>{this.floatingTextOpacity=1},500),this.floatingLogoStyle="",this.floating_button.nativeElement.classList.remove("collapse-button")}changeFloatingLogoStyle(){return{margin:this.floatingLogoStyle}}changeFloatingTextStyle(){return{opacity:this.floatingTextOpacity,display:this.floatingTextStyle}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-floating-chat"]],viewQuery:function(t,i){if(1&t&&Wl(MY,5),2&t){let r;Lr(r=Nr())&&(i.floating_button=r.first)}},decls:8,vars:2,consts:[[1,"floating-container"],[1,"floating-button",3,"mouseenter","mouseleave"],["floatingButton",""],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","url(#grad1)","viewBox","0 0 16 16",1,"floating-logo","bi","bi-triangle-half",3,"ngStyle"],["d","M8.065 2.016A.13.13 0 0 0 8.002 2v11.983l6.856.017a.12.12 0 0 0 .066-.017.162.162 0 0 0 .054-.06.176.176 0 0 0-.002-.183L8.12 2.073a.146.146 0 0 0-.054-.057zm-1.043-.45a1.13 1.13 0 0 1 1.96 0l6.856 11.667c.458.778-.091 1.767-.98 1.767H1.146c-.889 0-1.437-.99-.98-1.767L7.022 1.566z"],[1,"floating-text",3,"ngStyle"]],template:function(t,i){1&t&&(De(0,"div",0)(1,"div",1,2),rr("mouseenter",function(){return i.openButton()})("mouseleave",function(){return i.collapseButton()}),Hs(),De(3,"svg",3),wn(4,"path",4),Ae(),oa(),De(5,"div",5),Ye(6,"Animation"),Ae()(),wn(7,"div"),Ae()),2&t&&(qt(3),Yn("ngStyle",i.changeFloatingLogoStyle()),qt(2),Yn("ngStyle",i.changeFloatingTextStyle()))},directives:[C1],styles:[".floating-container[_ngcontent-%COMP%]{right:5%;bottom:10%;position:fixed;z-index:10}.floating-button[_ngcontent-%COMP%]{background-color:#fff;border:0px;border-radius:24px;box-shadow:0 10px 50px -5px gray;height:50px;width:250px;font-weight:700;font-size:16px;position:relative;float:right;display:flex;justify-content:center;transition:all 1s;z-index:11}.collapse-button[_ngcontent-%COMP%]{border-radius:50%;width:60px;height:60px}.slide-left[_ngcontent-%COMP%]{transition:1s;margin-right:75%}.floating-logo[_ngcontent-%COMP%]{height:40px;width:40px;margin-top:4px;margin-bottom:4px}.floating-text[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px;opacity:0;transition:all 1s}"]}),n})(),SY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-bubble-links"]],decls:29,vars:0,consts:[[1,"card-container"],["title","Animations","href","https://angular.io/guide/animations","target","_blank","rel","noopener",1,"circle-link"],["id","Group_20","data-name","Group 20","xmlns","http://www.w3.org/2000/svg","width","21.813","height","23.453","viewBox","0 0 21.813 23.453"],["id","Path_15","data-name","Path 15","d","M4099.584,972.736h0l-10.882,3.9,1.637,14.4,9.245,5.153,9.245-5.153,1.686-14.4Z","transform","translate(-4088.702 -972.736)","fill","#ffa726"],["id","Path_16","data-name","Path 16","d","M4181.516,972.736v23.453l9.245-5.153,1.686-14.4Z","transform","translate(-4170.633 -972.736)","fill","#fb8c00"],["id","Path_17","data-name","Path 17","d","M4137.529,1076.127l-7.7-3.723,4.417-2.721,7.753,3.723Z","transform","translate(-4125.003 -1058.315)","fill","#ffe0b2"],["id","Path_18","data-name","Path 18","d","M4137.529,1051.705l-7.7-3.723,4.417-2.721,7.753,3.723Z","transform","translate(-4125.003 -1036.757)","fill","#fff3e0"],["id","Path_19","data-name","Path 19","d","M4137.529,1027.283l-7.7-3.723,4.417-2.721,7.753,3.723Z","transform","translate(-4125.003 -1015.199)","fill","#fff"],["title","CLI","href","https://cli.angular.io/","target","_blank","rel","noopener",1,"circle-link"],["xmlns","http://www.w3.org/2000/svg","width","21.762","height","23.447","viewBox","0 0 21.762 23.447"],["id","Group_21","data-name","Group 21","transform","translate(0)"],["id","Path_20","data-name","Path 20","d","M2660.313,313.618h0l-10.833,3.9,1.637,14.4,9.2,5.152,9.244-5.152,1.685-14.4Z","transform","translate(-2649.48 -313.618)","fill","#37474f"],["id","Path_21","data-name","Path 21","d","M2741.883,313.618v23.447l9.244-5.152,1.685-14.4Z","transform","translate(-2731.05 -313.618)","fill","#263238"],["id","Path_22","data-name","Path 22","d","M2692.293,379.169h11.724V368.618h-11.724Zm11.159-.6h-10.608v-9.345h10.621v9.345Z","transform","translate(-2687.274 -362.17)","fill","#fff"],["id","Path_23","data-name","Path 23","d","M2709.331,393.688l.4.416,2.265-2.28-2.294-2.294-.4.4,1.893,1.893Z","transform","translate(-2702.289 -380.631)","fill","#fff"],["id","Rectangle_12","data-name","Rectangle 12","width","3.517","height","0.469","transform","translate(9.709 13.744)","fill","#fff"],["title","Find a Local Meetup","href","https://www.meetup.com/find/?keywords=angular","target","_blank","rel","noopener",1,"circle-link"],["xmlns","http://www.w3.org/2000/svg","width","24.607","height","23.447","viewBox","0 0 24.607 23.447"],["id","logo--mSwarm","d","M21.221,14.95A4.393,4.393,0,0,1,17.6,19.281a4.452,4.452,0,0,1-.8.069c-.09,0-.125.035-.154.117a2.939,2.939,0,0,1-2.506,2.091,2.868,2.868,0,0,1-2.248-.624.168.168,0,0,0-.245-.005,3.926,3.926,0,0,1-2.589.741,4.015,4.015,0,0,1-3.7-3.347,2.7,2.7,0,0,1-.043-.38c0-.106-.042-.146-.143-.166a3.524,3.524,0,0,1-1.516-.69A3.623,3.623,0,0,1,2.23,14.557a3.66,3.66,0,0,1,1.077-3.085.138.138,0,0,0,.026-.2,3.348,3.348,0,0,1-.451-1.821,3.46,3.46,0,0,1,2.749-3.28.44.44,0,0,0,.355-.281,5.072,5.072,0,0,1,3.863-3,5.028,5.028,0,0,1,3.555.666.31.31,0,0,0,.271.03A4.5,4.5,0,0,1,18.3,4.7a4.4,4.4,0,0,1,1.334,2.751,3.658,3.658,0,0,1,.022.706.131.131,0,0,0,.1.157,2.432,2.432,0,0,1,1.574,1.645,2.464,2.464,0,0,1-.7,2.616c-.065.064-.051.1-.014.166A4.321,4.321,0,0,1,21.221,14.95ZM13.4,14.607a2.09,2.09,0,0,0,1.409,1.982,4.7,4.7,0,0,0,1.275.221,1.807,1.807,0,0,0,.9-.151.542.542,0,0,0,.321-.545.558.558,0,0,0-.359-.534,1.2,1.2,0,0,0-.254-.078c-.262-.047-.526-.086-.787-.138a.674.674,0,0,1-.617-.75,3.394,3.394,0,0,1,.218-1.109c.217-.658.509-1.286.79-1.918a15.609,15.609,0,0,0,.745-1.86,1.95,1.95,0,0,0,.06-1.073,1.286,1.286,0,0,0-1.051-1.033,1.977,1.977,0,0,0-1.521.2.339.339,0,0,1-.446-.042c-.1-.092-.2-.189-.307-.284a1.214,1.214,0,0,0-1.643-.061,7.563,7.563,0,0,1-.614.512A.588.588,0,0,1,10.883,8c-.215-.115-.437-.215-.659-.316a2.153,2.153,0,0,0-.695-.248A2.091,2.091,0,0,0,7.541,8.562a9.915,9.915,0,0,0-.405.986c-.559,1.545-1.015,3.123-1.487,4.7a1.528,1.528,0,0,0,.634,1.777,1.755,1.755,0,0,0,1.5.211,1.35,1.35,0,0,0,.824-.858c.543-1.281,1.032-2.584,1.55-3.875.142-.355.28-.712.432-1.064a.548.548,0,0,1,.851-.24.622.622,0,0,1,.185.539,2.161,2.161,0,0,1-.181.621c-.337.852-.68,1.7-1.018,2.552a2.564,2.564,0,0,0-.173.528.624.624,0,0,0,.333.71,1.073,1.073,0,0,0,.814.034,1.22,1.22,0,0,0,.657-.655q.758-1.488,1.511-2.978.35-.687.709-1.37a1.073,1.073,0,0,1,.357-.434.43.43,0,0,1,.463-.016.373.373,0,0,1,.153.387.7.7,0,0,1-.057.236c-.065.157-.127.316-.2.469-.42.883-.846,1.763-1.262,2.648A2.463,2.463,0,0,0,13.4,14.607Zm5.888,6.508a1.09,1.09,0,0,0-2.179.006,1.09,1.09,0,0,0,2.179-.006ZM1.028,12.139a1.038,1.038,0,1,0,.01-2.075,1.038,1.038,0,0,0-.01,2.075ZM13.782.528a1.027,1.027,0,1,0-.011,2.055A1.027,1.027,0,0,0,13.782.528ZM22.21,6.95a.882.882,0,0,0-1.763.011A.882.882,0,0,0,22.21,6.95ZM4.153,4.439a.785.785,0,1,0,.787-.78A.766.766,0,0,0,4.153,4.439Zm8.221,18.22a.676.676,0,1,0-.677.666A.671.671,0,0,0,12.374,22.658ZM22.872,12.2a.674.674,0,0,0-.665.665.656.656,0,0,0,.655.643.634.634,0,0,0,.655-.644A.654.654,0,0,0,22.872,12.2ZM7.171-.123A.546.546,0,0,0,6.613.43a.553.553,0,1,0,1.106,0A.539.539,0,0,0,7.171-.123ZM24.119,9.234a.507.507,0,0,0-.493.488.494.494,0,0,0,.494.494.48.48,0,0,0,.487-.483A.491.491,0,0,0,24.119,9.234Zm-19.454,9.7a.5.5,0,0,0-.488-.488.491.491,0,0,0-.487.5.483.483,0,0,0,.491.479A.49.49,0,0,0,4.665,18.936Z","transform","translate(0 0.123)","fill","#f64060"],["title","Join the Conversation on Discord","href","https://discord.gg/angular","target","_blank","rel","noopener",1,"circle-link"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","viewBox","0 0 245 240"],["d","M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"],["d","M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z"]],template:function(t,i){1&t&&(De(0,"div",0)(1,"a",1),Hs(),De(2,"svg",2),wn(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),Ae()(),oa(),De(8,"a",8),Hs(),De(9,"svg",9)(10,"title"),Ye(11,"Angular CLI Logo"),Ae(),De(12,"g",10),wn(13,"path",11)(14,"path",12)(15,"path",13)(16,"path",14)(17,"rect",15),Ae()()(),oa(),De(18,"a",16),Hs(),De(19,"svg",17)(20,"title"),Ye(21,"Meetup Logo"),Ae(),wn(22,"path",18),Ae()(),oa(),De(23,"a",19),Hs(),De(24,"svg",20)(25,"title"),Ye(26,"Discord Logo"),Ae(),wn(27,"path",21)(28,"path",22),Ae()()())},styles:[".circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px;position:relative}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}"]}),n})(),TY=(()=>{class n{constructor(){this.title="angular-notes"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Wn({type:n,selectors:[["app-root"]],decls:10,vars:0,consts:[["role","main",1,"content"]],template:function(t,i){1&t&&(wn(0,"app-toolbar"),De(1,"div",0),wn(2,"app-floating-chat")(3,"router-outlet"),De(4,"footer"),wn(5,"app-bubble-links"),De(6,"div"),Ye(7," contact | "),Ae(),De(8,"div"),Ye(9," technology used on this site\n"),Ae()()())},directives:[wY,EY,Sv,SY],styles:["",'[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n    margin: 8px 0;\n  }\n\n  p[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n\n  .content[_ngcontent-%COMP%] {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%] {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: #888;\n  }\n\n  .card-container[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card-tag[_ngcontent-%COMP%] {\n    display: flex;\n  }\n\n  .card[_ngcontent-%COMP%] {\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card.highlight-card[_ngcontent-%COMP%] {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a[_ngcontent-%COMP%]:hover {\n    color: #125699;\n  }\n\n  footer[_ngcontent-%COMP%] {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%] {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27, 31, 35, .2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg, #fafbfc, #eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n    font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]:hover {\n    background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%);\n    border-color: rgba(27, 31, 35, .35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n\n  \n  @media screen and (max-width: 767px) {\n\n    .card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n      width: 100%;\n    }\n\n    .card[_ngcontent-%COMP%]:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      margin-left: 72px;\n    }\n  }']}),n})(),CY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n}),n.\u0275inj=xn({imports:[[CG,GX,eY,hY,pf]]}),n})(),DY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Dn({type:n,bootstrap:[TY]}),n.\u0275inj=xn({providers:[QP],imports:[[z1,xY,IV,UX,CY]]}),n})();(function uB(){if(ZS)throw new Error("Cannot enable prod mode after platform setup.");KS=!1})(),x4().bootstrapModule(DY).catch(n=>console.error(n))},5343:(Ge,Ne)=>{"use strict";Ne.byteLength=function S(G){var P=J(G),_e=P[1];return 3*(P[0]+_e)/4-_e},Ne.toByteArray=function X(G){var P,M,q=J(G),_e=q[0],Re=q[1],U=new V(function B(G,P,q){return 3*(P+q)/4-q}(0,_e,Re)),Y=0,C=Re>0?_e-4:_e;for(M=0;M<C;M+=4)P=I[G.charCodeAt(M)]<<18|I[G.charCodeAt(M+1)]<<12|I[G.charCodeAt(M+2)]<<6|I[G.charCodeAt(M+3)],U[Y++]=P>>16&255,U[Y++]=P>>8&255,U[Y++]=255&P;return 2===Re&&(P=I[G.charCodeAt(M)]<<2|I[G.charCodeAt(M+1)]>>4,U[Y++]=255&P),1===Re&&(P=I[G.charCodeAt(M)]<<10|I[G.charCodeAt(M+1)]<<4|I[G.charCodeAt(M+2)]>>2,U[Y++]=P>>8&255,U[Y++]=255&P),U},Ne.fromByteArray=function le(G){for(var P,q=G.length,_e=q%3,Re=[],U=16383,Y=0,C=q-_e;Y<C;Y+=U)Re.push(ge(G,Y,Y+U>C?C:Y+U));return 1===_e?Re.push(K[(P=G[q-1])>>2]+K[P<<4&63]+"=="):2===_e&&Re.push(K[(P=(G[q-2]<<8)+G[q-1])>>10]+K[P>>4&63]+K[P<<2&63]+"="),Re.join("")};for(var K=[],I=[],V="undefined"!=typeof Uint8Array?Uint8Array:Array,z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",re=0,oe=z.length;re<oe;++re)K[re]=z[re],I[z.charCodeAt(re)]=re;function J(G){var P=G.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var q=G.indexOf("=");return-1===q&&(q=P),[q,q===P?0:4-q%4]}function ee(G){return K[G>>18&63]+K[G>>12&63]+K[G>>6&63]+K[63&G]}function ge(G,P,q){for(var Re=[],U=P;U<q;U+=3)Re.push(ee((G[U]<<16&16711680)+(G[U+1]<<8&65280)+(255&G[U+2])));return Re.join("")}I["-".charCodeAt(0)]=62,I["_".charCodeAt(0)]=63},3172:(Ge,Ne,K)=>{"use strict";var I=K(5343),V=K(8461),z="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ne.Buffer=S,Ne.SlowBuffer=function U(R){return+R!=R&&(R=0),S.alloc(+R)},Ne.INSPECT_MAX_BYTES=50;var re=2147483647;function J(R){if(R>re)throw new RangeError('The value "'+R+'" is invalid for option "size"');var v=new Uint8Array(R);return Object.setPrototypeOf(v,S.prototype),v}function S(R,v,b){if("number"==typeof R){if("string"==typeof v)throw new TypeError('The "string" argument must be of type string. Received type number');return ge(R)}return B(R,v,b)}function B(R,v,b){if("string"==typeof R)return function le(R,v){if(("string"!=typeof v||""===v)&&(v="utf8"),!S.isEncoding(v))throw new TypeError("Unknown encoding: "+v);var b=0|Y(R,v),$=J(b),fe=$.write(R,v);return fe!==b&&($=$.slice(0,fe)),$}(R,v);if(ArrayBuffer.isView(R))return function P(R){if(pn(R,Uint8Array)){var v=new Uint8Array(R);return q(v.buffer,v.byteOffset,v.byteLength)}return G(R)}(R);if(null==R)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(pn(R,ArrayBuffer)||R&&pn(R.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(pn(R,SharedArrayBuffer)||R&&pn(R.buffer,SharedArrayBuffer)))return q(R,v,b);if("number"==typeof R)throw new TypeError('The "value" argument must not be of type number. Received type number');var $=R.valueOf&&R.valueOf();if(null!=$&&$!==R)return S.from($,v,b);var fe=function _e(R){if(S.isBuffer(R)){var v=0|Re(R.length),b=J(v);return 0===b.length||R.copy(b,0,0,v),b}return void 0!==R.length?"number"!=typeof R.length||ui(R.length)?J(0):G(R):"Buffer"===R.type&&Array.isArray(R.data)?G(R.data):void 0}(R);if(fe)return fe;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof R[Symbol.toPrimitive])return S.from(R[Symbol.toPrimitive]("string"),v,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function X(R){if("number"!=typeof R)throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function ge(R){return X(R),J(R<0?0:0|Re(R))}function G(R){for(var v=R.length<0?0:0|Re(R.length),b=J(v),$=0;$<v;$+=1)b[$]=255&R[$];return b}function q(R,v,b){if(v<0||R.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<v+(b||0))throw new RangeError('"length" is outside of buffer bounds');var $;return $=void 0===v&&void 0===b?new Uint8Array(R):void 0===b?new Uint8Array(R,v):new Uint8Array(R,v,b),Object.setPrototypeOf($,S.prototype),$}function Re(R){if(R>=re)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+re.toString(16)+" bytes");return 0|R}function Y(R,v){if(S.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||pn(R,ArrayBuffer))return R.byteLength;if("string"!=typeof R)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);var b=R.length,$=arguments.length>2&&!0===arguments[2];if(!$&&0===b)return 0;for(var fe=!1;;)switch(v){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return D(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return ln(R).length;default:if(fe)return $?-1:D(R).length;v=(""+v).toLowerCase(),fe=!0}}function C(R,v,b){var $=!1;if((void 0===v||v<0)&&(v=0),v>this.length||((void 0===b||b>this.length)&&(b=this.length),b<=0)||(b>>>=0)<=(v>>>=0))return"";for(R||(R="utf8");;)switch(R){case"hex":return en(this,v,b);case"utf8":case"utf-8":return Je(this,v,b);case"ascii":return ht(this,v,b);case"latin1":case"binary":return Gn(this,v,b);case"base64":return He(this,v,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return jr(this,v,b);default:if($)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),$=!0}}function M(R,v,b){var $=R[v];R[v]=R[b],R[b]=$}function x(R,v,b,$,fe){if(0===R.length)return-1;if("string"==typeof b?($=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),ui(b=+b)&&(b=fe?0:R.length-1),b<0&&(b=R.length+b),b>=R.length){if(fe)return-1;b=R.length-1}else if(b<0){if(!fe)return-1;b=0}if("string"==typeof v&&(v=S.from(v,$)),S.isBuffer(v))return 0===v.length?-1:F(R,v,b,$,fe);if("number"==typeof v)return v&=255,"function"==typeof Uint8Array.prototype.indexOf?fe?Uint8Array.prototype.indexOf.call(R,v,b):Uint8Array.prototype.lastIndexOf.call(R,v,b):F(R,[v],b,$,fe);throw new TypeError("val must be string, number or Buffer")}function F(R,v,b,$,fe){var mn,Ce=1,qe=R.length,an=v.length;if(void 0!==$&&("ucs2"===($=String($).toLowerCase())||"ucs-2"===$||"utf16le"===$||"utf-16le"===$)){if(R.length<2||v.length<2)return-1;Ce=2,qe/=2,an/=2,b/=2}function Tn($h,qh){return 1===Ce?$h[qh]:$h.readUInt16BE(qh*Ce)}if(fe){var hi=-1;for(mn=b;mn<qe;mn++)if(Tn(R,mn)===Tn(v,-1===hi?0:mn-hi)){if(-1===hi&&(hi=mn),mn-hi+1===an)return hi*Ce}else-1!==hi&&(mn-=mn-hi),hi=-1}else for(b+an>qe&&(b=qe-an),mn=b;mn>=0;mn--){for(var Un=!0,uo=0;uo<an;uo++)if(Tn(R,mn+uo)!==Tn(v,uo)){Un=!1;break}if(Un)return mn}return-1}function ie(R,v,b,$){b=Number(b)||0;var fe=R.length-b;$?($=Number($))>fe&&($=fe):$=fe;var Ce=v.length;$>Ce/2&&($=Ce/2);for(var qe=0;qe<$;++qe){var an=parseInt(v.substr(2*qe,2),16);if(ui(an))return qe;R[b+qe]=an}return qe}function L(R,v,b,$){return On(D(v,R.length-b),R,b,$)}function be(R,v,b,$){return On(function Oe(R){for(var v=[],b=0;b<R.length;++b)v.push(255&R.charCodeAt(b));return v}(v),R,b,$)}function Z(R,v,b,$){return On(ln(v),R,b,$)}function pe(R,v,b,$){return On(function de(R,v){for(var b,$,Ce=[],qe=0;qe<R.length&&!((v-=2)<0);++qe)$=(b=R.charCodeAt(qe))>>8,Ce.push(b%256),Ce.push($);return Ce}(v,R.length-b),R,b,$)}function He(R,v,b){return I.fromByteArray(0===v&&b===R.length?R:R.slice(v,b))}function Je(R,v,b){b=Math.min(R.length,b);for(var $=[],fe=v;fe<b;){var Tn,mn,hi,Un,Ce=R[fe],qe=null,an=Ce>239?4:Ce>223?3:Ce>191?2:1;if(fe+an<=b)switch(an){case 1:Ce<128&&(qe=Ce);break;case 2:128==(192&(Tn=R[fe+1]))&&(Un=(31&Ce)<<6|63&Tn)>127&&(qe=Un);break;case 3:mn=R[fe+2],128==(192&(Tn=R[fe+1]))&&128==(192&mn)&&(Un=(15&Ce)<<12|(63&Tn)<<6|63&mn)>2047&&(Un<55296||Un>57343)&&(qe=Un);break;case 4:mn=R[fe+2],hi=R[fe+3],128==(192&(Tn=R[fe+1]))&&128==(192&mn)&&128==(192&hi)&&(Un=(15&Ce)<<18|(63&Tn)<<12|(63&mn)<<6|63&hi)>65535&&Un<1114112&&(qe=Un)}null===qe?(qe=65533,an=1):qe>65535&&($.push((qe-=65536)>>>10&1023|55296),qe=56320|1023&qe),$.push(qe),fe+=an}return function un(R){var v=R.length;if(v<=4096)return String.fromCharCode.apply(String,R);for(var b="",$=0;$<v;)b+=String.fromCharCode.apply(String,R.slice($,$+=4096));return b}($)}function ht(R,v,b){var $="";b=Math.min(R.length,b);for(var fe=v;fe<b;++fe)$+=String.fromCharCode(127&R[fe]);return $}function Gn(R,v,b){var $="";b=Math.min(R.length,b);for(var fe=v;fe<b;++fe)$+=String.fromCharCode(R[fe]);return $}function en(R,v,b){var $=R.length;(!v||v<0)&&(v=0),(!b||b<0||b>$)&&(b=$);for(var fe="",Ce=v;Ce<b;++Ce)fe+=An[R[Ce]];return fe}function jr(R,v,b){for(var $=R.slice(v,b),fe="",Ce=0;Ce<$.length-1;Ce+=2)fe+=String.fromCharCode($[Ce]+256*$[Ce+1]);return fe}function on(R,v,b){if(R%1!=0||R<0)throw new RangeError("offset is not uint");if(R+v>b)throw new RangeError("Trying to access beyond buffer length")}function xi(R,v,b,$,fe,Ce){if(!S.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>fe||v<Ce)throw new RangeError('"value" argument is out of bounds');if(b+$>R.length)throw new RangeError("Index out of range")}function Ja(R,v,b,$,fe,Ce){if(b+$>R.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function ea(R,v,b,$,fe){return v=+v,b>>>=0,fe||Ja(R,0,b,4),V.write(R,v,b,$,23,4),b+4}function co(R,v,b,$,fe){return v=+v,b>>>=0,fe||Ja(R,0,b,8),V.write(R,v,b,$,52,8),b+8}Ne.kMaxLength=re,!(S.TYPED_ARRAY_SUPPORT=function oe(){try{var R=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(R,v),42===R.foo()}catch(b){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}}),S.poolSize=8192,S.from=function(R,v,b){return B(R,v,b)},Object.setPrototypeOf(S.prototype,Uint8Array.prototype),Object.setPrototypeOf(S,Uint8Array),S.alloc=function(R,v,b){return function ee(R,v,b){return X(R),R<=0?J(R):void 0!==v?"string"==typeof b?J(R).fill(v,b):J(R).fill(v):J(R)}(R,v,b)},S.allocUnsafe=function(R){return ge(R)},S.allocUnsafeSlow=function(R){return ge(R)},S.isBuffer=function(v){return null!=v&&!0===v._isBuffer&&v!==S.prototype},S.compare=function(v,b){if(pn(v,Uint8Array)&&(v=S.from(v,v.offset,v.byteLength)),pn(b,Uint8Array)&&(b=S.from(b,b.offset,b.byteLength)),!S.isBuffer(v)||!S.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===b)return 0;for(var $=v.length,fe=b.length,Ce=0,qe=Math.min($,fe);Ce<qe;++Ce)if(v[Ce]!==b[Ce]){$=v[Ce],fe=b[Ce];break}return $<fe?-1:fe<$?1:0},S.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(v,b){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(0===v.length)return S.alloc(0);var $;if(void 0===b)for(b=0,$=0;$<v.length;++$)b+=v[$].length;var fe=S.allocUnsafe(b),Ce=0;for($=0;$<v.length;++$){var qe=v[$];if(pn(qe,Uint8Array))Ce+qe.length>fe.length?S.from(qe).copy(fe,Ce):Uint8Array.prototype.set.call(fe,qe,Ce);else{if(!S.isBuffer(qe))throw new TypeError('"list" argument must be an Array of Buffers');qe.copy(fe,Ce)}Ce+=qe.length}return fe},S.byteLength=Y,S.prototype._isBuffer=!0,S.prototype.swap16=function(){var v=this.length;if(v%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<v;b+=2)M(this,b,b+1);return this},S.prototype.swap32=function(){var v=this.length;if(v%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<v;b+=4)M(this,b,b+3),M(this,b+1,b+2);return this},S.prototype.swap64=function(){var v=this.length;if(v%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<v;b+=8)M(this,b,b+7),M(this,b+1,b+6),M(this,b+2,b+5),M(this,b+3,b+4);return this},S.prototype.toLocaleString=S.prototype.toString=function(){var v=this.length;return 0===v?"":0===arguments.length?Je(this,0,v):C.apply(this,arguments)},S.prototype.equals=function(v){if(!S.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v||0===S.compare(this,v)},S.prototype.inspect=function(){var v="",b=Ne.INSPECT_MAX_BYTES;return v=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(v+=" ... "),"<Buffer "+v+">"},z&&(S.prototype[z]=S.prototype.inspect),S.prototype.compare=function(v,b,$,fe,Ce){if(pn(v,Uint8Array)&&(v=S.from(v,v.offset,v.byteLength)),!S.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(void 0===b&&(b=0),void 0===$&&($=v?v.length:0),void 0===fe&&(fe=0),void 0===Ce&&(Ce=this.length),b<0||$>v.length||fe<0||Ce>this.length)throw new RangeError("out of range index");if(fe>=Ce&&b>=$)return 0;if(fe>=Ce)return-1;if(b>=$)return 1;if(this===v)return 0;for(var qe=(Ce>>>=0)-(fe>>>=0),an=($>>>=0)-(b>>>=0),Tn=Math.min(qe,an),mn=this.slice(fe,Ce),hi=v.slice(b,$),Un=0;Un<Tn;++Un)if(mn[Un]!==hi[Un]){qe=mn[Un],an=hi[Un];break}return qe<an?-1:an<qe?1:0},S.prototype.includes=function(v,b,$){return-1!==this.indexOf(v,b,$)},S.prototype.indexOf=function(v,b,$){return x(this,v,b,$,!0)},S.prototype.lastIndexOf=function(v,b,$){return x(this,v,b,$,!1)},S.prototype.write=function(v,b,$,fe){if(void 0===b)fe="utf8",$=this.length,b=0;else if(void 0===$&&"string"==typeof b)fe=b,$=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite($)?($>>>=0,void 0===fe&&(fe="utf8")):(fe=$,$=void 0)}var Ce=this.length-b;if((void 0===$||$>Ce)&&($=Ce),v.length>0&&($<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");for(var qe=!1;;)switch(fe){case"hex":return ie(this,v,b,$);case"utf8":case"utf-8":return L(this,v,b,$);case"ascii":case"latin1":case"binary":return be(this,v,b,$);case"base64":return Z(this,v,b,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,v,b,$);default:if(qe)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),qe=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},S.prototype.slice=function(v,b){var $=this.length;(v=~~v)<0?(v+=$)<0&&(v=0):v>$&&(v=$),(b=void 0===b?$:~~b)<0?(b+=$)<0&&(b=0):b>$&&(b=$),b<v&&(b=v);var fe=this.subarray(v,b);return Object.setPrototypeOf(fe,S.prototype),fe},S.prototype.readUintLE=S.prototype.readUIntLE=function(v,b,$){v>>>=0,b>>>=0,$||on(v,b,this.length);for(var fe=this[v],Ce=1,qe=0;++qe<b&&(Ce*=256);)fe+=this[v+qe]*Ce;return fe},S.prototype.readUintBE=S.prototype.readUIntBE=function(v,b,$){v>>>=0,b>>>=0,$||on(v,b,this.length);for(var fe=this[v+--b],Ce=1;b>0&&(Ce*=256);)fe+=this[v+--b]*Ce;return fe},S.prototype.readUint8=S.prototype.readUInt8=function(v,b){return v>>>=0,b||on(v,1,this.length),this[v]},S.prototype.readUint16LE=S.prototype.readUInt16LE=function(v,b){return v>>>=0,b||on(v,2,this.length),this[v]|this[v+1]<<8},S.prototype.readUint16BE=S.prototype.readUInt16BE=function(v,b){return v>>>=0,b||on(v,2,this.length),this[v]<<8|this[v+1]},S.prototype.readUint32LE=S.prototype.readUInt32LE=function(v,b){return v>>>=0,b||on(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+16777216*this[v+3]},S.prototype.readUint32BE=S.prototype.readUInt32BE=function(v,b){return v>>>=0,b||on(v,4,this.length),16777216*this[v]+(this[v+1]<<16|this[v+2]<<8|this[v+3])},S.prototype.readIntLE=function(v,b,$){v>>>=0,b>>>=0,$||on(v,b,this.length);for(var fe=this[v],Ce=1,qe=0;++qe<b&&(Ce*=256);)fe+=this[v+qe]*Ce;return fe>=(Ce*=128)&&(fe-=Math.pow(2,8*b)),fe},S.prototype.readIntBE=function(v,b,$){v>>>=0,b>>>=0,$||on(v,b,this.length);for(var fe=b,Ce=1,qe=this[v+--fe];fe>0&&(Ce*=256);)qe+=this[v+--fe]*Ce;return qe>=(Ce*=128)&&(qe-=Math.pow(2,8*b)),qe},S.prototype.readInt8=function(v,b){return v>>>=0,b||on(v,1,this.length),128&this[v]?-1*(255-this[v]+1):this[v]},S.prototype.readInt16LE=function(v,b){v>>>=0,b||on(v,2,this.length);var $=this[v]|this[v+1]<<8;return 32768&$?4294901760|$:$},S.prototype.readInt16BE=function(v,b){v>>>=0,b||on(v,2,this.length);var $=this[v+1]|this[v]<<8;return 32768&$?4294901760|$:$},S.prototype.readInt32LE=function(v,b){return v>>>=0,b||on(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},S.prototype.readInt32BE=function(v,b){return v>>>=0,b||on(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},S.prototype.readFloatLE=function(v,b){return v>>>=0,b||on(v,4,this.length),V.read(this,v,!0,23,4)},S.prototype.readFloatBE=function(v,b){return v>>>=0,b||on(v,4,this.length),V.read(this,v,!1,23,4)},S.prototype.readDoubleLE=function(v,b){return v>>>=0,b||on(v,8,this.length),V.read(this,v,!0,52,8)},S.prototype.readDoubleBE=function(v,b){return v>>>=0,b||on(v,8,this.length),V.read(this,v,!1,52,8)},S.prototype.writeUintLE=S.prototype.writeUIntLE=function(v,b,$,fe){v=+v,b>>>=0,$>>>=0,fe||xi(this,v,b,$,Math.pow(2,8*$)-1,0);var qe=1,an=0;for(this[b]=255&v;++an<$&&(qe*=256);)this[b+an]=v/qe&255;return b+$},S.prototype.writeUintBE=S.prototype.writeUIntBE=function(v,b,$,fe){v=+v,b>>>=0,$>>>=0,fe||xi(this,v,b,$,Math.pow(2,8*$)-1,0);var qe=$-1,an=1;for(this[b+qe]=255&v;--qe>=0&&(an*=256);)this[b+qe]=v/an&255;return b+$},S.prototype.writeUint8=S.prototype.writeUInt8=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,1,255,0),this[b]=255&v,b+1},S.prototype.writeUint16LE=S.prototype.writeUInt16LE=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,2,65535,0),this[b]=255&v,this[b+1]=v>>>8,b+2},S.prototype.writeUint16BE=S.prototype.writeUInt16BE=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,2,65535,0),this[b]=v>>>8,this[b+1]=255&v,b+2},S.prototype.writeUint32LE=S.prototype.writeUInt32LE=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,4,4294967295,0),this[b+3]=v>>>24,this[b+2]=v>>>16,this[b+1]=v>>>8,this[b]=255&v,b+4},S.prototype.writeUint32BE=S.prototype.writeUInt32BE=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,4,4294967295,0),this[b]=v>>>24,this[b+1]=v>>>16,this[b+2]=v>>>8,this[b+3]=255&v,b+4},S.prototype.writeIntLE=function(v,b,$,fe){if(v=+v,b>>>=0,!fe){var Ce=Math.pow(2,8*$-1);xi(this,v,b,$,Ce-1,-Ce)}var qe=0,an=1,Tn=0;for(this[b]=255&v;++qe<$&&(an*=256);)v<0&&0===Tn&&0!==this[b+qe-1]&&(Tn=1),this[b+qe]=(v/an>>0)-Tn&255;return b+$},S.prototype.writeIntBE=function(v,b,$,fe){if(v=+v,b>>>=0,!fe){var Ce=Math.pow(2,8*$-1);xi(this,v,b,$,Ce-1,-Ce)}var qe=$-1,an=1,Tn=0;for(this[b+qe]=255&v;--qe>=0&&(an*=256);)v<0&&0===Tn&&0!==this[b+qe+1]&&(Tn=1),this[b+qe]=(v/an>>0)-Tn&255;return b+$},S.prototype.writeInt8=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,1,127,-128),v<0&&(v=255+v+1),this[b]=255&v,b+1},S.prototype.writeInt16LE=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,2,32767,-32768),this[b]=255&v,this[b+1]=v>>>8,b+2},S.prototype.writeInt16BE=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,2,32767,-32768),this[b]=v>>>8,this[b+1]=255&v,b+2},S.prototype.writeInt32LE=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,4,2147483647,-2147483648),this[b]=255&v,this[b+1]=v>>>8,this[b+2]=v>>>16,this[b+3]=v>>>24,b+4},S.prototype.writeInt32BE=function(v,b,$){return v=+v,b>>>=0,$||xi(this,v,b,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[b]=v>>>24,this[b+1]=v>>>16,this[b+2]=v>>>8,this[b+3]=255&v,b+4},S.prototype.writeFloatLE=function(v,b,$){return ea(this,v,b,!0,$)},S.prototype.writeFloatBE=function(v,b,$){return ea(this,v,b,!1,$)},S.prototype.writeDoubleLE=function(v,b,$){return co(this,v,b,!0,$)},S.prototype.writeDoubleBE=function(v,b,$){return co(this,v,b,!1,$)},S.prototype.copy=function(v,b,$,fe){if(!S.isBuffer(v))throw new TypeError("argument should be a Buffer");if($||($=0),!fe&&0!==fe&&(fe=this.length),b>=v.length&&(b=v.length),b||(b=0),fe>0&&fe<$&&(fe=$),fe===$||0===v.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),v.length-b<fe-$&&(fe=v.length-b+$);var Ce=fe-$;return this===v&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,$,fe):Uint8Array.prototype.set.call(v,this.subarray($,fe),b),Ce},S.prototype.fill=function(v,b,$,fe){if("string"==typeof v){if("string"==typeof b?(fe=b,b=0,$=this.length):"string"==typeof $&&(fe=$,$=this.length),void 0!==fe&&"string"!=typeof fe)throw new TypeError("encoding must be a string");if("string"==typeof fe&&!S.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(1===v.length){var Ce=v.charCodeAt(0);("utf8"===fe&&Ce<128||"latin1"===fe)&&(v=Ce)}}else"number"==typeof v?v&=255:"boolean"==typeof v&&(v=Number(v));if(b<0||this.length<b||this.length<$)throw new RangeError("Out of range index");if($<=b)return this;var qe;if(b>>>=0,$=void 0===$?this.length:$>>>0,v||(v=0),"number"==typeof v)for(qe=b;qe<$;++qe)this[qe]=v;else{var an=S.isBuffer(v)?v:S.from(v,fe),Tn=an.length;if(0===Tn)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(qe=0;qe<$-b;++qe)this[qe+b]=an[qe%Tn]}return this};var Qa=/[^+/0-9A-Za-z-_]/g;function D(R,v){v=v||1/0;for(var b,$=R.length,fe=null,Ce=[],qe=0;qe<$;++qe){if((b=R.charCodeAt(qe))>55295&&b<57344){if(!fe){if(b>56319){(v-=3)>-1&&Ce.push(239,191,189);continue}if(qe+1===$){(v-=3)>-1&&Ce.push(239,191,189);continue}fe=b;continue}if(b<56320){(v-=3)>-1&&Ce.push(239,191,189),fe=b;continue}b=65536+(fe-55296<<10|b-56320)}else fe&&(v-=3)>-1&&Ce.push(239,191,189);if(fe=null,b<128){if((v-=1)<0)break;Ce.push(b)}else if(b<2048){if((v-=2)<0)break;Ce.push(b>>6|192,63&b|128)}else if(b<65536){if((v-=3)<0)break;Ce.push(b>>12|224,b>>6&63|128,63&b|128)}else{if(!(b<1114112))throw new Error("Invalid code point");if((v-=4)<0)break;Ce.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}}return Ce}function ln(R){return I.toByteArray(function N(R){if((R=(R=R.split("=")[0]).trim().replace(Qa,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(R))}function On(R,v,b,$){for(var fe=0;fe<$&&!(fe+b>=v.length||fe>=R.length);++fe)v[fe+b]=R[fe];return fe}function pn(R,v){return R instanceof v||null!=R&&null!=R.constructor&&null!=R.constructor.name&&R.constructor.name===v.name}function ui(R){return R!=R}var An=function(){for(var R="0123456789abcdef",v=new Array(256),b=0;b<16;++b)for(var $=16*b,fe=0;fe<16;++fe)v[$+fe]=R[b]+R[fe];return v}()},6570:Ge=>{function Ne(I){if(I)return function K(I){for(var V in Ne.prototype)I[V]=Ne.prototype[V];return I}(I)}Ge.exports=Ne,Ne.prototype.on=Ne.prototype.addEventListener=function(I,V){return this._callbacks=this._callbacks||{},(this._callbacks[I]=this._callbacks[I]||[]).push(V),this},Ne.prototype.once=function(I,V){var z=this;function re(){z.off(I,re),V.apply(this,arguments)}return this._callbacks=this._callbacks||{},re.fn=V,this.on(I,re),this},Ne.prototype.off=Ne.prototype.removeListener=Ne.prototype.removeAllListeners=Ne.prototype.removeEventListener=function(I,V){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var z=this._callbacks[I];if(!z)return this;if(1==arguments.length)return delete this._callbacks[I],this;for(var re,oe=0;oe<z.length;oe++)if((re=z[oe])===V||re.fn===V){z.splice(oe,1);break}return this},Ne.prototype.emit=function(I){this._callbacks=this._callbacks||{};var V=[].slice.call(arguments,1),z=this._callbacks[I];if(z)for(var re=0,oe=(z=z.slice(0)).length;re<oe;++re)z[re].apply(this,V);return this},Ne.prototype.listeners=function(I){return this._callbacks=this._callbacks||{},this._callbacks[I]||[]},Ne.prototype.hasListeners=function(I){return!!this.listeners(I).length}},9069:Ge=>{"use strict";var I,Ne="object"==typeof Reflect?Reflect:null,K=Ne&&"function"==typeof Ne.apply?Ne.apply:function(C,M,x){return Function.prototype.apply.call(C,M,x)};I=Ne&&"function"==typeof Ne.ownKeys?Ne.ownKeys:Object.getOwnPropertySymbols?function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:function(C){return Object.getOwnPropertyNames(C)};var z=Number.isNaN||function(C){return C!=C};function re(){re.init.call(this)}Ge.exports=re,Ge.exports.once=function _e(Y,C){return new Promise(function(M,x){function F(L){Y.removeListener(C,ie),x(L)}function ie(){"function"==typeof Y.removeListener&&Y.removeListener("error",F),M([].slice.call(arguments))}U(Y,C,ie,{once:!0}),"error"!==C&&function Re(Y,C,M){"function"==typeof Y.on&&U(Y,"error",C,M)}(Y,F,{once:!0})})},re.EventEmitter=re,re.prototype._events=void 0,re.prototype._eventsCount=0,re.prototype._maxListeners=void 0;var oe=10;function J(Y){if("function"!=typeof Y)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function S(Y){return void 0===Y._maxListeners?re.defaultMaxListeners:Y._maxListeners}function B(Y,C,M,x){var F,ie,L;if(J(M),void 0===(ie=Y._events)?(ie=Y._events=Object.create(null),Y._eventsCount=0):(void 0!==ie.newListener&&(Y.emit("newListener",C,M.listener?M.listener:M),ie=Y._events),L=ie[C]),void 0===L)L=ie[C]=M,++Y._eventsCount;else if("function"==typeof L?L=ie[C]=x?[M,L]:[L,M]:x?L.unshift(M):L.push(M),(F=S(Y))>0&&L.length>F&&!L.warned){L.warned=!0;var be=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");be.name="MaxListenersExceededWarning",be.emitter=Y,be.type=C,be.count=L.length,function V(Y){console&&console.warn&&console.warn(Y)}(be)}return Y}function X(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ee(Y,C,M){var x={fired:!1,wrapFn:void 0,target:Y,type:C,listener:M},F=X.bind(x);return F.listener=M,x.wrapFn=F,F}function ge(Y,C,M){var x=Y._events;if(void 0===x)return[];var F=x[C];return void 0===F?[]:"function"==typeof F?M?[F.listener||F]:[F]:M?function q(Y){for(var C=new Array(Y.length),M=0;M<C.length;++M)C[M]=Y[M].listener||Y[M];return C}(F):G(F,F.length)}function le(Y){var C=this._events;if(void 0!==C){var M=C[Y];if("function"==typeof M)return 1;if(void 0!==M)return M.length}return 0}function G(Y,C){for(var M=new Array(C),x=0;x<C;++x)M[x]=Y[x];return M}function U(Y,C,M,x){if("function"==typeof Y.on)x.once?Y.once(C,M):Y.on(C,M);else{if("function"!=typeof Y.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener(C,function F(ie){x.once&&Y.removeEventListener(C,F),M(ie)})}}Object.defineProperty(re,"defaultMaxListeners",{enumerable:!0,get:function(){return oe},set:function(Y){if("number"!=typeof Y||Y<0||z(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");oe=Y}}),re.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},re.prototype.setMaxListeners=function(C){if("number"!=typeof C||C<0||z(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},re.prototype.getMaxListeners=function(){return S(this)},re.prototype.emit=function(C){for(var M=[],x=1;x<arguments.length;x++)M.push(arguments[x]);var F="error"===C,ie=this._events;if(void 0!==ie)F=F&&void 0===ie.error;else if(!F)return!1;if(F){var L;if(M.length>0&&(L=M[0]),L instanceof Error)throw L;var be=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw be.context=L,be}var Z=ie[C];if(void 0===Z)return!1;if("function"==typeof Z)K(Z,this,M);else{var pe=Z.length,He=G(Z,pe);for(x=0;x<pe;++x)K(He[x],this,M)}return!0},re.prototype.on=re.prototype.addListener=function(C,M){return B(this,C,M,!1)},re.prototype.prependListener=function(C,M){return B(this,C,M,!0)},re.prototype.once=function(C,M){return J(M),this.on(C,ee(this,C,M)),this},re.prototype.prependOnceListener=function(C,M){return J(M),this.prependListener(C,ee(this,C,M)),this},re.prototype.off=re.prototype.removeListener=function(C,M){var x,F,ie,L,be;if(J(M),void 0===(F=this._events))return this;if(void 0===(x=F[C]))return this;if(x===M||x.listener===M)0==--this._eventsCount?this._events=Object.create(null):(delete F[C],F.removeListener&&this.emit("removeListener",C,x.listener||M));else if("function"!=typeof x){for(ie=-1,L=x.length-1;L>=0;L--)if(x[L]===M||x[L].listener===M){be=x[L].listener,ie=L;break}if(ie<0)return this;0===ie?x.shift():function P(Y,C){for(;C+1<Y.length;C++)Y[C]=Y[C+1];Y.pop()}(x,ie),1===x.length&&(F[C]=x[0]),void 0!==F.removeListener&&this.emit("removeListener",C,be||M)}return this},re.prototype.removeAllListeners=function(C){var M,x,F;if(void 0===(x=this._events))return this;if(void 0===x.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==x[C]&&(0==--this._eventsCount?this._events=Object.create(null):delete x[C]),this;if(0===arguments.length){var L,ie=Object.keys(x);for(F=0;F<ie.length;++F)"removeListener"!==(L=ie[F])&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(M=x[C]))this.removeListener(C,M);else if(void 0!==M)for(F=M.length-1;F>=0;F--)this.removeListener(C,M[F]);return this},re.prototype.listeners=function(C){return ge(this,C,!0)},re.prototype.rawListeners=function(C){return ge(this,C,!1)},re.listenerCount=function(Y,C){return"function"==typeof Y.listenerCount?Y.listenerCount(C):le.call(Y,C)},re.prototype.listenerCount=le,re.prototype.eventNames=function(){return this._eventsCount>0?I(this._events):[]}},8461:(Ge,Ne)=>{Ne.read=function(K,I,V,z,re){var oe,J,S=8*re-z-1,B=(1<<S)-1,X=B>>1,ee=-7,ge=V?re-1:0,le=V?-1:1,G=K[I+ge];for(ge+=le,oe=G&(1<<-ee)-1,G>>=-ee,ee+=S;ee>0;oe=256*oe+K[I+ge],ge+=le,ee-=8);for(J=oe&(1<<-ee)-1,oe>>=-ee,ee+=z;ee>0;J=256*J+K[I+ge],ge+=le,ee-=8);if(0===oe)oe=1-X;else{if(oe===B)return J?NaN:1/0*(G?-1:1);J+=Math.pow(2,z),oe-=X}return(G?-1:1)*J*Math.pow(2,oe-z)},Ne.write=function(K,I,V,z,re,oe){var J,S,B,X=8*oe-re-1,ee=(1<<X)-1,ge=ee>>1,le=23===re?Math.pow(2,-24)-Math.pow(2,-77):0,G=z?0:oe-1,P=z?1:-1,q=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(S=isNaN(I)?1:0,J=ee):(J=Math.floor(Math.log(I)/Math.LN2),I*(B=Math.pow(2,-J))<1&&(J--,B*=2),(I+=J+ge>=1?le/B:le*Math.pow(2,1-ge))*B>=2&&(J++,B/=2),J+ge>=ee?(S=0,J=ee):J+ge>=1?(S=(I*B-1)*Math.pow(2,re),J+=ge):(S=I*Math.pow(2,ge-1)*Math.pow(2,re),J=0));re>=8;K[V+G]=255&S,G+=P,S/=256,re-=8);for(J=J<<re|S,X+=re;X>0;K[V+G]=255&J,G+=P,J/=256,X-=8);K[V+G-P]|=128*q}},1503:(Ge,Ne,K)=>{!function(I){I.parser=function(N,D){return new z(N,D)},I.SAXParser=z,I.SAXStream=ee,I.createStream=function X(N,D){return new ee(N,D)},I.MAX_BUFFER_LENGTH=65536;var S,V=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function z(N,D){if(!(this instanceof z))return new z(N,D);var Oe=this;(function oe(N){for(var D=0,Oe=V.length;D<Oe;D++)N[V[D]]=""})(Oe),Oe.q=Oe.c="",Oe.bufferCheckPosition=I.MAX_BUFFER_LENGTH,Oe.opt=D||{},Oe.opt.lowercase=Oe.opt.lowercase||Oe.opt.lowercasetags,Oe.looseCase=Oe.opt.lowercase?"toLowerCase":"toUpperCase",Oe.tags=[],Oe.closed=Oe.closedRoot=Oe.sawRoot=!1,Oe.tag=Oe.error=null,Oe.strict=!!N,Oe.noscript=!(!N&&!Oe.opt.noscript),Oe.state=L.BEGIN,Oe.strictEntities=Oe.opt.strictEntities,Oe.ENTITIES=Object.create(Oe.strictEntities?I.XML_ENTITIES:I.ENTITIES),Oe.attribList=[],Oe.opt.xmlns&&(Oe.ns=Object.create(q)),Oe.trackPosition=!1!==Oe.opt.position,Oe.trackPosition&&(Oe.position=Oe.line=Oe.column=0),Z(Oe,"onready")}I.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(N){function D(){}return D.prototype=N,new D}),Object.keys||(Object.keys=function(N){var D=[];for(var Oe in N)N.hasOwnProperty(Oe)&&D.push(Oe);return D}),z.prototype={end:function(){un(this)},write:function Qa(N){var D=this;if(this.error)throw this.error;if(D.closed)return nt(D,"Cannot write after close. Assign an onready handler.");if(null===N)return un(D);"object"==typeof N&&(N=N.toString());for(var Oe=0,de="";de=co(N,Oe++),D.c=de,de;)switch(D.trackPosition&&(D.position++,"\n"===de?(D.line++,D.column=0):D.column++),D.state){case L.BEGIN:if(D.state=L.BEGIN_WHITESPACE,"\ufeff"===de)continue;ea(D,de);continue;case L.BEGIN_WHITESPACE:ea(D,de);continue;case L.TEXT:if(D.sawRoot&&!D.closedRoot){for(var ln=Oe-1;de&&"<"!==de&&"&"!==de;)(de=co(N,Oe++))&&D.trackPosition&&(D.position++,"\n"===de?(D.line++,D.column=0):D.column++);D.textNode+=N.substring(ln,Oe-1)}"<"!==de||D.sawRoot&&D.closedRoot&&!D.strict?(!C(de)&&(!D.sawRoot||D.closedRoot)&&ht(D,"Text data outside of root node."),"&"===de?D.state=L.TEXT_ENTITY:D.textNode+=de):(D.state=L.OPEN_WAKA,D.startTagPosition=D.position);continue;case L.SCRIPT:"<"===de?D.state=L.SCRIPT_ENDING:D.script+=de;continue;case L.SCRIPT_ENDING:"/"===de?D.state=L.CLOSE_TAG:(D.script+="<"+de,D.state=L.SCRIPT);continue;case L.OPEN_WAKA:"!"===de?(D.state=L.SGML_DECL,D.sgmlDecl=""):C(de)||(F(_e,de)?(D.state=L.OPEN_TAG,D.tagName=de):"/"===de?(D.state=L.CLOSE_TAG,D.tagName=""):"?"===de?(D.state=L.PROC_INST,D.procInstName=D.procInstBody=""):(ht(D,"Unencoded <"),D.startTagPosition+1<D.position&&(de=new Array(D.position-D.startTagPosition).join(" ")+de),D.textNode+="<"+de,D.state=L.TEXT));continue;case L.SGML_DECL:"[CDATA["===(D.sgmlDecl+de).toUpperCase()?(pe(D,"onopencdata"),D.state=L.CDATA,D.sgmlDecl="",D.cdata=""):D.sgmlDecl+de==="--"?(D.state=L.COMMENT,D.comment="",D.sgmlDecl=""):"DOCTYPE"===(D.sgmlDecl+de).toUpperCase()?(D.state=L.DOCTYPE,(D.doctype||D.sawRoot)&&ht(D,"Inappropriately located doctype declaration"),D.doctype="",D.sgmlDecl=""):">"===de?(pe(D,"onsgmldeclaration",D.sgmlDecl),D.sgmlDecl="",D.state=L.TEXT):(M(de)&&(D.state=L.SGML_DECL_QUOTED),D.sgmlDecl+=de);continue;case L.SGML_DECL_QUOTED:de===D.q&&(D.state=L.SGML_DECL,D.q=""),D.sgmlDecl+=de;continue;case L.DOCTYPE:">"===de?(D.state=L.TEXT,pe(D,"ondoctype",D.doctype),D.doctype=!0):(D.doctype+=de,"["===de?D.state=L.DOCTYPE_DTD:M(de)&&(D.state=L.DOCTYPE_QUOTED,D.q=de));continue;case L.DOCTYPE_QUOTED:D.doctype+=de,de===D.q&&(D.q="",D.state=L.DOCTYPE);continue;case L.DOCTYPE_DTD:D.doctype+=de,"]"===de?D.state=L.DOCTYPE:M(de)&&(D.state=L.DOCTYPE_DTD_QUOTED,D.q=de);continue;case L.DOCTYPE_DTD_QUOTED:D.doctype+=de,de===D.q&&(D.state=L.DOCTYPE_DTD,D.q="");continue;case L.COMMENT:"-"===de?D.state=L.COMMENT_ENDING:D.comment+=de;continue;case L.COMMENT_ENDING:"-"===de?(D.state=L.COMMENT_ENDED,D.comment=Je(D.opt,D.comment),D.comment&&pe(D,"oncomment",D.comment),D.comment=""):(D.comment+="-"+de,D.state=L.COMMENT);continue;case L.COMMENT_ENDED:">"!==de?(ht(D,"Malformed comment"),D.comment+="--"+de,D.state=L.COMMENT):D.state=L.TEXT;continue;case L.CDATA:"]"===de?D.state=L.CDATA_ENDING:D.cdata+=de;continue;case L.CDATA_ENDING:"]"===de?D.state=L.CDATA_ENDING_2:(D.cdata+="]"+de,D.state=L.CDATA);continue;case L.CDATA_ENDING_2:">"===de?(D.cdata&&pe(D,"oncdata",D.cdata),pe(D,"onclosecdata"),D.cdata="",D.state=L.TEXT):"]"===de?D.cdata+="]":(D.cdata+="]]"+de,D.state=L.CDATA);continue;case L.PROC_INST:"?"===de?D.state=L.PROC_INST_ENDING:C(de)?D.state=L.PROC_INST_BODY:D.procInstName+=de;continue;case L.PROC_INST_BODY:if(!D.procInstBody&&C(de))continue;"?"===de?D.state=L.PROC_INST_ENDING:D.procInstBody+=de;continue;case L.PROC_INST_ENDING:">"===de?(pe(D,"onprocessinginstruction",{name:D.procInstName,body:D.procInstBody}),D.procInstName=D.procInstBody="",D.state=L.TEXT):(D.procInstBody+="?"+de,D.state=L.PROC_INST_BODY);continue;case L.OPEN_TAG:F(Re,de)?D.tagName+=de:(Gn(D),">"===de?on(D):"/"===de?D.state=L.OPEN_TAG_SLASH:(C(de)||ht(D,"Invalid character in tag name"),D.state=L.ATTRIB));continue;case L.OPEN_TAG_SLASH:">"===de?(on(D,!0),xi(D)):(ht(D,"Forward-slash in opening tag not followed by >"),D.state=L.ATTRIB);continue;case L.ATTRIB:if(C(de))continue;">"===de?on(D):"/"===de?D.state=L.OPEN_TAG_SLASH:F(_e,de)?(D.attribName=de,D.attribValue="",D.state=L.ATTRIB_NAME):ht(D,"Invalid attribute name");continue;case L.ATTRIB_NAME:"="===de?D.state=L.ATTRIB_VALUE:">"===de?(ht(D,"Attribute without value"),D.attribValue=D.attribName,jr(D),on(D)):C(de)?D.state=L.ATTRIB_NAME_SAW_WHITE:F(Re,de)?D.attribName+=de:ht(D,"Invalid attribute name");continue;case L.ATTRIB_NAME_SAW_WHITE:if("="===de)D.state=L.ATTRIB_VALUE;else{if(C(de))continue;ht(D,"Attribute without value"),D.tag.attributes[D.attribName]="",D.attribValue="",pe(D,"onattribute",{name:D.attribName,value:""}),D.attribName="",">"===de?on(D):F(_e,de)?(D.attribName=de,D.state=L.ATTRIB_NAME):(ht(D,"Invalid attribute name"),D.state=L.ATTRIB)}continue;case L.ATTRIB_VALUE:if(C(de))continue;M(de)?(D.q=de,D.state=L.ATTRIB_VALUE_QUOTED):(ht(D,"Unquoted attribute value"),D.state=L.ATTRIB_VALUE_UNQUOTED,D.attribValue=de);continue;case L.ATTRIB_VALUE_QUOTED:if(de!==D.q){"&"===de?D.state=L.ATTRIB_VALUE_ENTITY_Q:D.attribValue+=de;continue}jr(D),D.q="",D.state=L.ATTRIB_VALUE_CLOSED;continue;case L.ATTRIB_VALUE_CLOSED:C(de)?D.state=L.ATTRIB:">"===de?on(D):"/"===de?D.state=L.OPEN_TAG_SLASH:F(_e,de)?(ht(D,"No whitespace between attributes"),D.attribName=de,D.attribValue="",D.state=L.ATTRIB_NAME):ht(D,"Invalid attribute name");continue;case L.ATTRIB_VALUE_UNQUOTED:if(!x(de)){"&"===de?D.state=L.ATTRIB_VALUE_ENTITY_U:D.attribValue+=de;continue}jr(D),">"===de?on(D):D.state=L.ATTRIB;continue;case L.CLOSE_TAG:if(D.tagName)">"===de?xi(D):F(Re,de)?D.tagName+=de:D.script?(D.script+="</"+D.tagName,D.tagName="",D.state=L.SCRIPT):(C(de)||ht(D,"Invalid tagname in closing tag"),D.state=L.CLOSE_TAG_SAW_WHITE);else{if(C(de))continue;ie(_e,de)?D.script?(D.script+="</"+de,D.state=L.SCRIPT):ht(D,"Invalid tagname in closing tag."):D.tagName=de}continue;case L.CLOSE_TAG_SAW_WHITE:if(C(de))continue;">"===de?xi(D):ht(D,"Invalid characters in closing tag");continue;case L.TEXT_ENTITY:case L.ATTRIB_VALUE_ENTITY_Q:case L.ATTRIB_VALUE_ENTITY_U:var pn,ui;switch(D.state){case L.TEXT_ENTITY:pn=L.TEXT,ui="textNode";break;case L.ATTRIB_VALUE_ENTITY_Q:pn=L.ATTRIB_VALUE_QUOTED,ui="attribValue";break;case L.ATTRIB_VALUE_ENTITY_U:pn=L.ATTRIB_VALUE_UNQUOTED,ui="attribValue"}";"===de?(D[ui]+=Ja(D),D.entity="",D.state=pn):F(D.entity.length?Y:U,de)?D.entity+=de:(ht(D,"Invalid character in entity name"),D[ui]+="&"+D.entity+de,D.entity="",D.state=pn);continue;default:throw new Error(D,"Unknown state: "+D.state)}return D.position>=D.bufferCheckPosition&&function re(N){for(var D=Math.max(I.MAX_BUFFER_LENGTH,10),Oe=0,de=0,ln=V.length;de<ln;de++){var On=N[V[de]].length;if(On>D)switch(V[de]){case"textNode":He(N);break;case"cdata":pe(N,"oncdata",N.cdata),N.cdata="";break;case"script":pe(N,"onscript",N.script),N.script="";break;default:nt(N,"Max buffer length exceeded: "+V[de])}Oe=Math.max(Oe,On)}N.bufferCheckPosition=I.MAX_BUFFER_LENGTH-Oe+N.position}(D),D},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function J(N){He(N),""!==N.cdata&&(pe(N,"oncdata",N.cdata),N.cdata=""),""!==N.script&&(pe(N,"onscript",N.script),N.script="")}(this)}};try{S=K(5398).Stream}catch(N){S=function(){}}var B=I.EVENTS.filter(function(N){return"error"!==N&&"end"!==N});function ee(N,D){if(!(this instanceof ee))return new ee(N,D);S.apply(this),this._parser=new z(N,D),this.writable=!0,this.readable=!0;var Oe=this;this._parser.onend=function(){Oe.emit("end")},this._parser.onerror=function(de){Oe.emit("error",de),Oe._parser.error=null},this._decoder=null,B.forEach(function(de){Object.defineProperty(Oe,"on"+de,{get:function(){return Oe._parser["on"+de]},set:function(ln){if(!ln)return Oe.removeAllListeners(de),Oe._parser["on"+de]=ln,ln;Oe.on(de,ln)},enumerable:!0,configurable:!1})})}(ee.prototype=Object.create(S.prototype,{constructor:{value:ee}})).write=function(N){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(N)){if(!this._decoder){var D=K(3054).s;this._decoder=new D("utf8")}N=this._decoder.write(N)}return this._parser.write(N.toString()),this.emit("data",N),!0},ee.prototype.end=function(N){return N&&N.length&&this.write(N),this._parser.end(),!0},ee.prototype.on=function(N,D){var Oe=this;return!Oe._parser["on"+N]&&-1!==B.indexOf(N)&&(Oe._parser["on"+N]=function(){var de=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);de.splice(0,0,N),Oe.emit.apply(Oe,de)}),S.prototype.on.call(Oe,N,D)};var G="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/2000/xmlns/",q={xml:G,xmlns:P},_e=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Re=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function C(N){return" "===N||"\n"===N||"\r"===N||"\t"===N}function M(N){return'"'===N||"'"===N}function x(N){return">"===N||C(N)}function F(N,D){return N.test(D)}function ie(N,D){return!F(N,D)}var N,D,Oe,L=0;for(var be in I.STATE={BEGIN:L++,BEGIN_WHITESPACE:L++,TEXT:L++,TEXT_ENTITY:L++,OPEN_WAKA:L++,SGML_DECL:L++,SGML_DECL_QUOTED:L++,DOCTYPE:L++,DOCTYPE_QUOTED:L++,DOCTYPE_DTD:L++,DOCTYPE_DTD_QUOTED:L++,COMMENT_STARTING:L++,COMMENT:L++,COMMENT_ENDING:L++,COMMENT_ENDED:L++,CDATA:L++,CDATA_ENDING:L++,CDATA_ENDING_2:L++,PROC_INST:L++,PROC_INST_BODY:L++,PROC_INST_ENDING:L++,OPEN_TAG:L++,OPEN_TAG_SLASH:L++,ATTRIB:L++,ATTRIB_NAME:L++,ATTRIB_NAME_SAW_WHITE:L++,ATTRIB_VALUE:L++,ATTRIB_VALUE_QUOTED:L++,ATTRIB_VALUE_CLOSED:L++,ATTRIB_VALUE_UNQUOTED:L++,ATTRIB_VALUE_ENTITY_Q:L++,ATTRIB_VALUE_ENTITY_U:L++,CLOSE_TAG:L++,CLOSE_TAG_SAW_WHITE:L++,SCRIPT:L++,SCRIPT_ENDING:L++},I.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},I.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(I.ENTITIES).forEach(function(N){var D=I.ENTITIES[N],Oe="number"==typeof D?String.fromCharCode(D):D;I.ENTITIES[N]=Oe}),I.STATE)I.STATE[I.STATE[be]]=be;function Z(N,D,Oe){N[D]&&N[D](Oe)}function pe(N,D,Oe){N.textNode&&He(N),Z(N,D,Oe)}function He(N){N.textNode=Je(N.opt,N.textNode),N.textNode&&Z(N,"ontext",N.textNode),N.textNode=""}function Je(N,D){return N.trim&&(D=D.trim()),N.normalize&&(D=D.replace(/\s+/g," ")),D}function nt(N,D){return He(N),N.trackPosition&&(D+="\nLine: "+N.line+"\nColumn: "+N.column+"\nChar: "+N.c),D=new Error(D),N.error=D,Z(N,"onerror",D),N}function un(N){return N.sawRoot&&!N.closedRoot&&ht(N,"Unclosed root tag"),N.state!==L.BEGIN&&N.state!==L.BEGIN_WHITESPACE&&N.state!==L.TEXT&&nt(N,"Unexpected end"),He(N),N.c="",N.closed=!0,Z(N,"onend"),z.call(N,N.strict,N.opt),N}function ht(N,D){if("object"!=typeof N||!(N instanceof z))throw new Error("bad call to strictFail");N.strict&&nt(N,D)}function Gn(N){N.strict||(N.tagName=N.tagName[N.looseCase]());var D=N.tags[N.tags.length-1]||N,Oe=N.tag={name:N.tagName,attributes:{}};N.opt.xmlns&&(Oe.ns=D.ns),N.attribList.length=0,pe(N,"onopentagstart",Oe)}function en(N,D){var de=N.indexOf(":")<0?["",N]:N.split(":"),ln=de[0],On=de[1];return D&&"xmlns"===N&&(ln="xmlns",On=""),{prefix:ln,local:On}}function jr(N){if(N.strict||(N.attribName=N.attribName[N.looseCase]()),-1!==N.attribList.indexOf(N.attribName)||N.tag.attributes.hasOwnProperty(N.attribName))N.attribName=N.attribValue="";else{if(N.opt.xmlns){var D=en(N.attribName,!0),de=D.local;if("xmlns"===D.prefix)if("xml"===de&&N.attribValue!==G)ht(N,"xml: prefix must be bound to "+G+"\nActual: "+N.attribValue);else if("xmlns"===de&&N.attribValue!==P)ht(N,"xmlns: prefix must be bound to "+P+"\nActual: "+N.attribValue);else{var ln=N.tag,On=N.tags[N.tags.length-1]||N;ln.ns===On.ns&&(ln.ns=Object.create(On.ns)),ln.ns[de]=N.attribValue}N.attribList.push([N.attribName,N.attribValue])}else N.tag.attributes[N.attribName]=N.attribValue,pe(N,"onattribute",{name:N.attribName,value:N.attribValue});N.attribName=N.attribValue=""}}function on(N,D){if(N.opt.xmlns){var Oe=N.tag,de=en(N.tagName);Oe.prefix=de.prefix,Oe.local=de.local,Oe.uri=Oe.ns[de.prefix]||"",Oe.prefix&&!Oe.uri&&(ht(N,"Unbound namespace prefix: "+JSON.stringify(N.tagName)),Oe.uri=de.prefix),Oe.ns&&(N.tags[N.tags.length-1]||N).ns!==Oe.ns&&Object.keys(Oe.ns).forEach(function(qe){pe(N,"onopennamespace",{prefix:qe,uri:Oe.ns[qe]})});for(var On=0,pn=N.attribList.length;On<pn;On++){var ui=N.attribList[On],An=ui[0],R=ui[1],v=en(An,!0),b=v.prefix,fe=""===b?"":Oe.ns[b]||"",Ce={name:An,value:R,prefix:b,local:v.local,uri:fe};b&&"xmlns"!==b&&!fe&&(ht(N,"Unbound namespace prefix: "+JSON.stringify(b)),Ce.uri=b),N.tag.attributes[An]=Ce,pe(N,"onattribute",Ce)}N.attribList.length=0}N.tag.isSelfClosing=!!D,N.sawRoot=!0,N.tags.push(N.tag),pe(N,"onopentag",N.tag),D||(N.state=N.noscript||"script"!==N.tagName.toLowerCase()?L.TEXT:L.SCRIPT,N.tag=null,N.tagName=""),N.attribName=N.attribValue="",N.attribList.length=0}function xi(N){if(!N.tagName)return ht(N,"Weird empty close tag."),N.textNode+="</>",void(N.state=L.TEXT);if(N.script){if("script"!==N.tagName)return N.script+="</"+N.tagName+">",N.tagName="",void(N.state=L.SCRIPT);pe(N,"onscript",N.script),N.script=""}var D=N.tags.length,Oe=N.tagName;N.strict||(Oe=Oe[N.looseCase]());for(var de=Oe;D--&&N.tags[D].name!==de;)ht(N,"Unexpected close tag");if(D<0)return ht(N,"Unmatched closing tag: "+N.tagName),N.textNode+="</"+N.tagName+">",void(N.state=L.TEXT);N.tagName=Oe;for(var On=N.tags.length;On-- >D;){var pn=N.tag=N.tags.pop();N.tagName=N.tag.name,pe(N,"onclosetag",N.tagName);var ui={};for(var An in pn.ns)ui[An]=pn.ns[An];N.opt.xmlns&&pn.ns!==(N.tags[N.tags.length-1]||N).ns&&Object.keys(pn.ns).forEach(function(v){pe(N,"onclosenamespace",{prefix:v,uri:pn.ns[v]})})}0===D&&(N.closedRoot=!0),N.tagName=N.attribValue=N.attribName="",N.attribList.length=0,N.state=L.TEXT}function Ja(N){var de,D=N.entity,Oe=D.toLowerCase(),ln="";return N.ENTITIES[D]?N.ENTITIES[D]:N.ENTITIES[Oe]?N.ENTITIES[Oe]:("#"===(D=Oe).charAt(0)&&("x"===D.charAt(1)?(D=D.slice(2),ln=(de=parseInt(D,16)).toString(16)):(D=D.slice(1),ln=(de=parseInt(D,10)).toString(10))),D=D.replace(/^0+/,""),isNaN(de)||ln.toLowerCase()!==D?(ht(N,"Invalid character entity"),"&"+N.entity+";"):String.fromCodePoint(de))}function ea(N,D){"<"===D?(N.state=L.OPEN_WAKA,N.startTagPosition=N.position):C(D)||(ht(N,"Non-whitespace before first tag."),N.textNode=D,N.state=L.TEXT)}function co(N,D){var Oe="";return D<N.length&&(Oe=N.charAt(D)),Oe}L=I.STATE,String.fromCodePoint||(N=String.fromCharCode,D=Math.floor,Oe=function(){var de=16384,ln=[],ui=-1,An=arguments.length;if(!An)return"";for(var R="";++ui<An;){var v=Number(arguments[ui]);if(!isFinite(v)||v<0||v>1114111||D(v)!==v)throw RangeError("Invalid code point: "+v);v<=65535?ln.push(v):ln.push(55296+((v-=65536)>>10),v%1024+56320),(ui+1===An||ln.length>de)&&(R+=N.apply(null,ln),ln.length=0)}return R},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Oe,configurable:!0,writable:!0}):String.fromCodePoint=Oe)}(Ne)},5398:(Ge,Ne,K)=>{var I=K(6570);function V(){I.call(this)}V.prototype=new I,Ge.exports=V,V.Stream=V,V.prototype.pipe=function(z,re){var oe=this;function J(G){z.writable&&!1===z.write(G)&&oe.pause&&oe.pause()}function S(){oe.readable&&oe.resume&&oe.resume()}oe.on("data",J),z.on("drain",S),!z._isStdio&&(!re||!1!==re.end)&&(oe.on("end",X),oe.on("close",ee));var B=!1;function X(){B||(B=!0,z.end())}function ee(){B||(B=!0,"function"==typeof z.destroy&&z.destroy())}function ge(G){if(le(),!this.hasListeners("error"))throw G}function le(){oe.off("data",J),z.off("drain",S),oe.off("end",X),oe.off("close",ee),oe.off("error",ge),z.off("error",ge),oe.off("end",le),oe.off("close",le),z.off("end",le),z.off("close",le)}return oe.on("error",ge),z.on("error",ge),oe.on("end",le),oe.on("close",le),z.on("end",le),z.on("close",le),z.emit("pipe",oe),z}},3054:(Ge,Ne,K)=>{"use strict";var I=K(858).Buffer,V=I.isEncoding||function(U){switch((U=""+U)&&U.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function oe(U){var Y;switch(this.encoding=function re(U){var Y=function z(U){if(!U)return"utf8";for(var Y;;)switch(U){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return U;default:if(Y)return;U=(""+U).toLowerCase(),Y=!0}}(U);if("string"!=typeof Y&&(I.isEncoding===V||!V(U)))throw new Error("Unknown encoding: "+U);return Y||U}(U),this.encoding){case"utf16le":this.text=le,this.end=G,Y=4;break;case"utf8":this.fillLast=X,Y=4;break;case"base64":this.text=P,this.end=q,Y=3;break;default:return this.write=_e,void(this.end=Re)}this.lastNeed=0,this.lastTotal=0,this.lastChar=I.allocUnsafe(Y)}function J(U){return U<=127?0:U>>5==6?2:U>>4==14?3:U>>3==30?4:U>>6==2?-1:-2}function X(U){var Y=this.lastTotal-this.lastNeed,C=function B(U,Y,C){if(128!=(192&Y[0]))return U.lastNeed=0,"\ufffd";if(U.lastNeed>1&&Y.length>1){if(128!=(192&Y[1]))return U.lastNeed=1,"\ufffd";if(U.lastNeed>2&&Y.length>2&&128!=(192&Y[2]))return U.lastNeed=2,"\ufffd"}}(this,U);return void 0!==C?C:this.lastNeed<=U.length?(U.copy(this.lastChar,Y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(U.copy(this.lastChar,Y,0,U.length),void(this.lastNeed-=U.length))}function le(U,Y){if((U.length-Y)%2==0){var C=U.toString("utf16le",Y);if(C){var M=C.charCodeAt(C.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=U[U.length-2],this.lastChar[1]=U[U.length-1],C.slice(0,-1)}return C}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=U[U.length-1],U.toString("utf16le",Y,U.length-1)}function G(U){var Y=U&&U.length?this.write(U):"";return this.lastNeed?Y+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):Y}function P(U,Y){var C=(U.length-Y)%3;return 0===C?U.toString("base64",Y):(this.lastNeed=3-C,this.lastTotal=3,1===C?this.lastChar[0]=U[U.length-1]:(this.lastChar[0]=U[U.length-2],this.lastChar[1]=U[U.length-1]),U.toString("base64",Y,U.length-C))}function q(U){var Y=U&&U.length?this.write(U):"";return this.lastNeed?Y+this.lastChar.toString("base64",0,3-this.lastNeed):Y}function _e(U){return U.toString(this.encoding)}function Re(U){return U&&U.length?this.write(U):""}Ne.s=oe,oe.prototype.write=function(U){if(0===U.length)return"";var Y,C;if(this.lastNeed){if(void 0===(Y=this.fillLast(U)))return"";C=this.lastNeed,this.lastNeed=0}else C=0;return C<U.length?Y?Y+this.text(U,C):this.text(U,C):Y||""},oe.prototype.end=function ge(U){var Y=U&&U.length?this.write(U):"";return this.lastNeed?Y+"\ufffd":Y},oe.prototype.text=function ee(U,Y){var C=function S(U,Y,C){var M=Y.length-1;if(M<C)return 0;var x=J(Y[M]);return x>=0?(x>0&&(U.lastNeed=x-1),x):--M<C||-2===x?0:(x=J(Y[M]))>=0?(x>0&&(U.lastNeed=x-2),x):--M<C||-2===x?0:(x=J(Y[M]))>=0?(x>0&&(2===x?x=0:U.lastNeed=x-3),x):0}(this,U,Y);if(!this.lastNeed)return U.toString("utf8",Y);this.lastTotal=C;var M=U.length-(C-this.lastNeed);return U.copy(this.lastChar,0,M),U.toString("utf8",Y,M)},oe.prototype.fillLast=function(U){if(this.lastNeed<=U.length)return U.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);U.copy(this.lastChar,this.lastTotal-this.lastNeed,0,U.length),this.lastNeed-=U.length}},858:(Ge,Ne,K)=>{var I=K(3172),V=I.Buffer;function z(oe,J){for(var S in oe)J[S]=oe[S]}function re(oe,J,S){return V(oe,J,S)}V.from&&V.alloc&&V.allocUnsafe&&V.allocUnsafeSlow?Ge.exports=I:(z(I,Ne),Ne.Buffer=re),re.prototype=Object.create(V.prototype),z(V,re),re.from=function(oe,J,S){if("number"==typeof oe)throw new TypeError("Argument must not be a number");return V(oe,J,S)},re.alloc=function(oe,J,S){if("number"!=typeof oe)throw new TypeError("Argument must be a number");var B=V(oe);return void 0!==J?"string"==typeof S?B.fill(J,S):B.fill(J):B.fill(0),B},re.allocUnsafe=function(oe){if("number"!=typeof oe)throw new TypeError("Argument must be a number");return V(oe)},re.allocUnsafeSlow=function(oe){if("number"!=typeof oe)throw new TypeError("Argument must be a number");return I.SlowBuffer(oe)}},5489:(Ge,Ne)=>{var I={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5};for(var V in I)"millisecond"===V?I.ms=I[V]:I[V.charAt(0)]=I[V],I[V+"s"]=I[V];function z(J){this.count=0;var S=function oe(J){var S=J.match(re);return S&&I[S[2]]?S.slice(1):null}(J);S&&(this.time=Number(S[0])*I[S[1]],this.type=S[1])}z.prototype.do=function(J){this.time&&(this.interval=setInterval(function B(){S.count++,J.call(S)},this.time));var S=this;return this},z.prototype.stop=function(){return this.interval&&(clearInterval(this.interval),delete this.interval),this};var re=/^\s*(\d+(?:\.\d+)?)\s*([a-z]+)\s*$/},4922:function(Ge,Ne){(function(){"use strict";Ne.stripBOM=function(K){return"\ufeff"===K[0]?K.substring(1):K}}).call(this)},4032:function(Ge,Ne,K){(function(){"use strict";var I,V,z,re,oe,J={}.hasOwnProperty;I=K(7904),V=K(7067).defaults,re=function(S){return"string"==typeof S&&(S.indexOf("&")>=0||S.indexOf(">")>=0||S.indexOf("<")>=0)},oe=function(S){return"<![CDATA["+z(S)+"]]>"},z=function(S){return S.replace("]]>","]]]]><![CDATA[>")},Ne.Builder=function(){function S(B){var X,ee;for(X in this.options={},ee=V[.2])!J.call(ee,X)||(this.options[X]=ee[X]);for(X in B)!J.call(B,X)||(this.options[X]=B[X])}return S.prototype.buildObject=function(B){var X,ee,ge,le,G,P;return X=this.options.attrkey,ee=this.options.charkey,1===Object.keys(B).length&&this.options.rootName===V[.2].rootName?B=B[G=Object.keys(B)[0]]:G=this.options.rootName,P=this,ge=function(q,_e){var Re,U,Y,C,M;if("object"!=typeof _e)P.options.cdata&&re(_e)?q.raw(oe(_e)):q.txt(_e);else if(Array.isArray(_e)){for(C in _e)if(J.call(_e,C))for(M in U=_e[C])Y=U[M],q=ge(q.ele(M),Y).up()}else for(M in _e)if(J.call(_e,M))if(U=_e[M],M===X){if("object"==typeof U)for(Re in U)q=q.att(Re,U[Re])}else if(M===ee)q=P.options.cdata&&re(U)?q.raw(oe(U)):q.txt(U);else if(Array.isArray(U))for(C in U)!J.call(U,C)||(q="string"==typeof(Y=U[C])?P.options.cdata&&re(Y)?q.ele(M).raw(oe(Y)).up():q.ele(M,Y).up():ge(q.ele(M),Y).up());else"object"==typeof U?q=ge(q.ele(M),U).up():"string"==typeof U&&P.options.cdata&&re(U)?q=q.ele(M).raw(oe(U)).up():(null==U&&(U=""),q=q.ele(M,U.toString()).up());return q},le=I.create(G,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),ge(le,B).end(this.options.renderOpts)},S}()}).call(this)},7067:function(Ge,Ne){(function(){Ne.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},2238:function(Ge,Ne,K){(function(){"use strict";var I,V,z,re,oe,J,S,B,X=function(le,G){return function(){return le.apply(G,arguments)}},ge={}.hasOwnProperty;S=K(1503),z=K(9069),I=K(4922),J=K(3749),B=K(5489).setImmediate,V=K(7067).defaults,re=function(le){return"object"==typeof le&&null!=le&&0===Object.keys(le).length},oe=function(le,G,P){var q,_e;for(q=0,_e=le.length;q<_e;q++)G=(0,le[q])(G,P);return G},Ne.Parser=function(le){function G(P){var q,_e;if(this.parseStringPromise=X(this.parseStringPromise,this),this.parseString=X(this.parseString,this),this.reset=X(this.reset,this),this.assignOrPush=X(this.assignOrPush,this),this.processAsync=X(this.processAsync,this),!(this instanceof Ne.Parser))return new Ne.Parser(P);for(q in this.options={},_e=V[.2])!ge.call(_e,q)||(this.options[q]=_e[q]);for(q in P)!ge.call(P,q)||(this.options[q]=P[q]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(J.normalize)),this.reset()}return function(le,G){for(var P in G)ge.call(G,P)&&(le[P]=G[P]);function q(){this.constructor=le}q.prototype=G.prototype,le.prototype=new q,le.__super__=G.prototype}(G,le),G.prototype.processAsync=function(){var P,q;try{return this.remaining.length<=this.options.chunkSize?(P=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(P),this.saxParser.close()):(P=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(P),B(this.processAsync))}catch(_e){if(q=_e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(q)}},G.prototype.assignOrPush=function(P,q,_e){return q in P?(P[q]instanceof Array||(P[q]=[P[q]]),P[q].push(_e)):P[q]=this.options.explicitArray?[_e]:_e},G.prototype.reset=function(){var P,q,_e,Re,U;return this.removeAllListeners(),this.saxParser=S.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(U=this,function(Y){if(U.saxParser.resume(),!U.saxParser.errThrown)return U.saxParser.errThrown=!0,U.emit("error",Y)}),this.saxParser.onend=function(U){return function(){if(!U.saxParser.ended)return U.saxParser.ended=!0,U.emit("end",U.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,Re=[],P=this.options.attrkey,q=this.options.charkey,this.saxParser.onopentag=function(U){return function(Y){var C,M,x,F,ie;if((x={})[q]="",!U.options.ignoreAttrs)for(C in ie=Y.attributes)!ge.call(ie,C)||(!(P in x)&&!U.options.mergeAttrs&&(x[P]={}),M=U.options.attrValueProcessors?oe(U.options.attrValueProcessors,Y.attributes[C],C):Y.attributes[C],F=U.options.attrNameProcessors?oe(U.options.attrNameProcessors,C):C,U.options.mergeAttrs?U.assignOrPush(x,F,M):x[P][F]=M);return x["#name"]=U.options.tagNameProcessors?oe(U.options.tagNameProcessors,Y.name):Y.name,U.options.xmlns&&(x[U.options.xmlnskey]={uri:Y.uri,local:Y.local}),Re.push(x)}}(this),this.saxParser.onclosetag=function(U){return function(){var Y,C,M,x,F,ie,L,be,Z,pe;if(ie=Re.pop(),F=ie["#name"],(!U.options.explicitChildren||!U.options.preserveChildrenOrder)&&delete ie["#name"],!0===ie.cdata&&(Y=ie.cdata,delete ie.cdata),Z=Re[Re.length-1],ie[q].match(/^\s*$/)&&!Y?(C=ie[q],delete ie[q]):(U.options.trim&&(ie[q]=ie[q].trim()),U.options.normalize&&(ie[q]=ie[q].replace(/\s{2,}/g," ").trim()),ie[q]=U.options.valueProcessors?oe(U.options.valueProcessors,ie[q],F):ie[q],1===Object.keys(ie).length&&q in ie&&!U.EXPLICIT_CHARKEY&&(ie=ie[q])),re(ie)&&(ie=""!==U.options.emptyTag?U.options.emptyTag:C),null!=U.options.validator&&(pe="/"+function(){var He,Je,nt;for(nt=[],He=0,Je=Re.length;He<Je;He++)nt.push((x=Re[He])["#name"]);return nt}().concat(F).join("/"),function(){try{ie=U.options.validator(pe,Z&&Z[F],ie)}catch(Je){return U.emit("error",Je)}}()),U.options.explicitChildren&&!U.options.mergeAttrs&&"object"==typeof ie)if(U.options.preserveChildrenOrder){if(Z){for(M in Z[U.options.childkey]=Z[U.options.childkey]||[],L={},ie)!ge.call(ie,M)||(L[M]=ie[M]);Z[U.options.childkey].push(L),delete ie["#name"],1===Object.keys(ie).length&&q in ie&&!U.EXPLICIT_CHARKEY&&(ie=ie[q])}}else x={},U.options.attrkey in ie&&(x[U.options.attrkey]=ie[U.options.attrkey],delete ie[U.options.attrkey]),!U.options.charsAsChildren&&U.options.charkey in ie&&(x[U.options.charkey]=ie[U.options.charkey],delete ie[U.options.charkey]),Object.getOwnPropertyNames(ie).length>0&&(x[U.options.childkey]=ie),ie=x;return Re.length>0?U.assignOrPush(Z,F,ie):(U.options.explicitRoot&&(be=ie,(ie={})[F]=be),U.resultObject=ie,U.saxParser.ended=!0,U.emit("end",U.resultObject))}}(this),_e=function(U){return function(Y){var C,M;if(M=Re[Re.length-1])return M[q]+=Y,U.options.explicitChildren&&U.options.preserveChildrenOrder&&U.options.charsAsChildren&&(U.options.includeWhiteChars||""!==Y.replace(/\\n/g,"").trim())&&(M[U.options.childkey]=M[U.options.childkey]||[],(C={"#name":"__text__"})[q]=Y,U.options.normalize&&(C[q]=C[q].replace(/\s{2,}/g," ").trim()),M[U.options.childkey].push(C)),M}}(this),this.saxParser.ontext=_e,this.saxParser.oncdata=function(Y){var C;if(C=_e(Y))return C.cdata=!0}},G.prototype.parseString=function(P,q){var _e;null!=q&&"function"==typeof q&&(this.on("end",function(Re){return this.reset(),q(null,Re)}),this.on("error",function(Re){return this.reset(),q(Re)}));try{return""===(P=P.toString()).trim()?(this.emit("end",null),!0):(P=I.stripBOM(P),this.options.async?(this.remaining=P,B(this.processAsync),this.saxParser):this.saxParser.write(P).close())}catch(Re){if(_e=Re,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",_e),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw _e}},G.prototype.parseStringPromise=function(P){return new Promise((q=this,function(_e,Re){return q.parseString(P,function(U,Y){return U?Re(U):_e(Y)})}));var q},G}(z),Ne.parseString=function(le,G,P){var q,_e;return null!=P?("function"==typeof P&&(q=P),"object"==typeof G&&(_e=G)):("function"==typeof G&&(q=G),_e={}),new Ne.Parser(_e).parseString(le,q)},Ne.parseStringPromise=function(le,G){var P;return"object"==typeof G&&(P=G),new Ne.Parser(P).parseStringPromise(le)}}).call(this)},3749:function(Ge,Ne){(function(){"use strict";var K;K=new RegExp(/(?!xmlns)^.*:/),Ne.normalize=function(I){return I.toLowerCase()},Ne.firstCharLowerCase=function(I){return I.charAt(0).toLowerCase()+I.slice(1)},Ne.stripPrefix=function(I){return I.replace(K,"")},Ne.parseNumbers=function(I){return isNaN(I)||(I=I%1==0?parseInt(I,10):parseFloat(I)),I},Ne.parseBooleans=function(I){return/^(?:true|false)$/i.test(I)&&(I="true"===I.toLowerCase()),I}}).call(this)},5452:function(Ge,Ne,K){(function(){"use strict";var I,V,z,re,J={}.hasOwnProperty;V=K(7067),I=K(4032),z=K(2238),re=K(3749),Ne.defaults=V.defaults,Ne.processors=re,Ne.ValidationError=function(S){function B(X){this.message=X}return function(S,B){for(var X in B)J.call(B,X)&&(S[X]=B[X]);function ee(){this.constructor=S}ee.prototype=B.prototype,S.prototype=new ee,S.__super__=B.prototype}(B,Error),B}(),Ne.Builder=I.Builder,Ne.Parser=z.Parser,Ne.parseString=z.parseString,Ne.parseStringPromise=z.parseStringPromise}).call(this)},599:function(Ge){(function(){Ge.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},2269:function(Ge){(function(){Ge.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},3452:function(Ge){(function(){var Ne,K,I,V,z,re,oe,J=[].slice,S={}.hasOwnProperty;Ne=function(){var B,X,ee,ge,le,G;if(G=arguments[0],le=2<=arguments.length?J.call(arguments,1):[],z(Object.assign))Object.assign.apply(null,arguments);else for(B=0,ee=le.length;B<ee;B++)if(null!=(ge=le[B]))for(X in ge)!S.call(ge,X)||(G[X]=ge[X]);return G},z=function(B){return!!B&&"[object Function]"===Object.prototype.toString.call(B)},re=function(B){var X;return!!B&&("function"==(X=typeof B)||"object"===X)},I=function(B){return z(Array.isArray)?Array.isArray(B):"[object Array]"===Object.prototype.toString.call(B)},V=function(B){var X;if(I(B))return!B.length;for(X in B)if(S.call(B,X))return!1;return!0},oe=function(B){var X,ee;return re(B)&&(ee=Object.getPrototypeOf(B))&&(X=ee.constructor)&&"function"==typeof X&&X instanceof X&&Function.prototype.toString.call(X)===Function.prototype.toString.call(Object)},K=function(B){return z(B.valueOf)?B.valueOf():B},Ge.exports.assign=Ne,Ge.exports.isFunction=z,Ge.exports.isObject=re,Ge.exports.isArray=I,Ge.exports.isEmpty=V,Ge.exports.isPlainObject=oe,Ge.exports.getValue=K}).call(this)},6316:function(Ge){(function(){Ge.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},5968:function(Ge,Ne,K){(function(){var I;I=K(2269),K(8563),Ge.exports=function(){function re(oe,J,S){if(this.parent=oe,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==J)throw new Error("Missing attribute name. "+this.debugInfo(J));this.name=this.stringify.name(J),this.value=this.stringify.attValue(S),this.type=I.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(re.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(re.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(re.prototype,"textContent",{get:function(){return this.value},set:function(oe){return this.value=oe||""}}),Object.defineProperty(re.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(re.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(re.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(re.prototype,"specified",{get:function(){return!0}}),re.prototype.clone=function(){return Object.create(this)},re.prototype.toString=function(oe){return this.options.writer.attribute(this,this.options.writer.filterOptions(oe))},re.prototype.debugInfo=function(oe){return null==(oe=oe||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+oe+"}, parent: <"+this.parent.name+">"},re.prototype.isEqualNode=function(oe){return!(oe.namespaceURI!==this.namespaceURI||oe.prefix!==this.prefix||oe.localName!==this.localName||oe.value!==this.value)},re}()}).call(this)},1361:function(Ge,Ne,K){(function(){var I,z,oe={}.hasOwnProperty;I=K(2269),z=K(2182),Ge.exports=function(J){function S(B,X){if(S.__super__.constructor.call(this,B),null==X)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=I.CData,this.value=this.stringify.cdata(X)}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),S.prototype.clone=function(){return Object.create(this)},S.prototype.toString=function(B){return this.options.writer.cdata(this,this.options.writer.filterOptions(B))},S}(z)}).call(this)},2182:function(Ge,Ne,K){(function(){var V,re={}.hasOwnProperty;V=K(8563),Ge.exports=function(oe){function J(S){J.__super__.constructor.call(this,S),this.value=""}return function(oe,J){for(var S in J)re.call(J,S)&&(oe[S]=J[S]);function B(){this.constructor=oe}B.prototype=J.prototype,oe.prototype=new B,oe.__super__=J.prototype}(J,oe),Object.defineProperty(J.prototype,"data",{get:function(){return this.value},set:function(S){return this.value=S||""}}),Object.defineProperty(J.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(J.prototype,"textContent",{get:function(){return this.value},set:function(S){return this.value=S||""}}),J.prototype.clone=function(){return Object.create(this)},J.prototype.substringData=function(S,B){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.appendData=function(S){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.insertData=function(S,B){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.deleteData=function(S,B){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.replaceData=function(S,B,X){throw new Error("This DOM method is not implemented."+this.debugInfo())},J.prototype.isEqualNode=function(S){return!(!J.__super__.isEqualNode.apply(this,arguments).isEqualNode(S)||S.data!==this.data)},J}(V)}).call(this)},2516:function(Ge,Ne,K){(function(){var I,V,oe={}.hasOwnProperty;I=K(2269),V=K(2182),Ge.exports=function(J){function S(B,X){if(S.__super__.constructor.call(this,B),null==X)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=I.Comment,this.value=this.stringify.comment(X)}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),S.prototype.clone=function(){return Object.create(this)},S.prototype.toString=function(B){return this.options.writer.comment(this,this.options.writer.filterOptions(B))},S}(V)}).call(this)},5806:function(Ge,Ne,K){(function(){var V,z;V=K(9276),z=K(3735),Ge.exports=function(){function re(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new V,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(re.prototype,"parameterNames",{get:function(){return new z(Object.keys(this.defaultParams))}}),re.prototype.getParameter=function(oe){return this.params.hasOwnProperty(oe)?this.params[oe]:null},re.prototype.canSetParameter=function(oe,J){return!0},re.prototype.setParameter=function(oe,J){return null!=J?this.params[oe]=J:delete this.params[oe]},re}()}).call(this)},9276:function(Ge){(function(){Ge.exports=function(){function K(){}return K.prototype.handleError=function(I){throw new Error(I)},K}()}).call(this)},9906:function(Ge){(function(){Ge.exports=function(){function K(){}return K.prototype.hasFeature=function(I,V){return!0},K.prototype.createDocumentType=function(I,V,z){throw new Error("This DOM method is not implemented.")},K.prototype.createDocument=function(I,V,z){throw new Error("This DOM method is not implemented.")},K.prototype.createHTMLDocument=function(I){throw new Error("This DOM method is not implemented.")},K.prototype.getFeature=function(I,V){throw new Error("This DOM method is not implemented.")},K}()}).call(this)},3735:function(Ge){(function(){Ge.exports=function(){function K(I){this.arr=I||[]}return Object.defineProperty(K.prototype,"length",{get:function(){return this.arr.length}}),K.prototype.item=function(I){return this.arr[I]||null},K.prototype.contains=function(I){return-1!==this.arr.indexOf(I)},K}()}).call(this)},7274:function(Ge,Ne,K){(function(){var I,z,oe={}.hasOwnProperty;z=K(8563),I=K(2269),Ge.exports=function(J){function S(B,X,ee,ge,le,G){if(S.__super__.constructor.call(this,B),null==X)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==ee)throw new Error("Missing DTD attribute name. "+this.debugInfo(X));if(!ge)throw new Error("Missing DTD attribute type. "+this.debugInfo(X));if(!le)throw new Error("Missing DTD attribute default. "+this.debugInfo(X));if(0!==le.indexOf("#")&&(le="#"+le),!le.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(X));if(G&&!le.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(X));this.elementName=this.stringify.name(X),this.type=I.AttributeDeclaration,this.attributeName=this.stringify.name(ee),this.attributeType=this.stringify.dtdAttType(ge),G&&(this.defaultValue=this.stringify.dtdAttDefault(G)),this.defaultValueType=le}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),S.prototype.toString=function(B){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(B))},S}(z)}).call(this)},2068:function(Ge,Ne,K){(function(){var I,z,oe={}.hasOwnProperty;z=K(8563),I=K(2269),Ge.exports=function(J){function S(B,X,ee){if(S.__super__.constructor.call(this,B),null==X)throw new Error("Missing DTD element name. "+this.debugInfo());ee||(ee="(#PCDATA)"),Array.isArray(ee)&&(ee="("+ee.join(",")+")"),this.name=this.stringify.name(X),this.type=I.ElementDeclaration,this.value=this.stringify.dtdElementValue(ee)}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),S.prototype.toString=function(B){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(B))},S}(z)}).call(this)},8349:function(Ge,Ne,K){(function(){var I,z,re,J={}.hasOwnProperty;re=K(3452).isObject,z=K(8563),I=K(2269),Ge.exports=function(S){function B(X,ee,ge,le){if(B.__super__.constructor.call(this,X),null==ge)throw new Error("Missing DTD entity name. "+this.debugInfo(ge));if(null==le)throw new Error("Missing DTD entity value. "+this.debugInfo(ge));if(this.pe=!!ee,this.name=this.stringify.name(ge),this.type=I.EntityDeclaration,re(le)){if(!le.pubID&&!le.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(ge));if(le.pubID&&!le.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(ge));if(this.internal=!1,null!=le.pubID&&(this.pubID=this.stringify.dtdPubID(le.pubID)),null!=le.sysID&&(this.sysID=this.stringify.dtdSysID(le.sysID)),null!=le.nData&&(this.nData=this.stringify.dtdNData(le.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(ge))}else this.value=this.stringify.dtdEntityValue(le),this.internal=!0}return function(S,B){for(var X in B)J.call(B,X)&&(S[X]=B[X]);function ee(){this.constructor=S}ee.prototype=B.prototype,S.prototype=new ee,S.__super__=B.prototype}(B,S),Object.defineProperty(B.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(B.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(B.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(B.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(B.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(B.prototype,"xmlVersion",{get:function(){return null}}),B.prototype.toString=function(X){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(X))},B}(z)}).call(this)},3087:function(Ge,Ne,K){(function(){var I,z,oe={}.hasOwnProperty;z=K(8563),I=K(2269),Ge.exports=function(J){function S(B,X,ee){if(S.__super__.constructor.call(this,B),null==X)throw new Error("Missing DTD notation name. "+this.debugInfo(X));if(!ee.pubID&&!ee.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(X));this.name=this.stringify.name(X),this.type=I.NotationDeclaration,null!=ee.pubID&&(this.pubID=this.stringify.dtdPubID(ee.pubID)),null!=ee.sysID&&(this.sysID=this.stringify.dtdSysID(ee.sysID))}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),Object.defineProperty(S.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(S.prototype,"systemId",{get:function(){return this.sysID}}),S.prototype.toString=function(B){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(B))},S}(z)}).call(this)},4789:function(Ge,Ne,K){(function(){var I,z,re,J={}.hasOwnProperty;re=K(3452).isObject,z=K(8563),I=K(2269),Ge.exports=function(S){function B(X,ee,ge,le){var G;B.__super__.constructor.call(this,X),re(ee)&&(ee=(G=ee).version,ge=G.encoding,le=G.standalone),ee||(ee="1.0"),this.type=I.Declaration,this.version=this.stringify.xmlVersion(ee),null!=ge&&(this.encoding=this.stringify.xmlEncoding(ge)),null!=le&&(this.standalone=this.stringify.xmlStandalone(le))}return function(S,B){for(var X in B)J.call(B,X)&&(S[X]=B[X]);function ee(){this.constructor=S}ee.prototype=B.prototype,S.prototype=new ee,S.__super__=B.prototype}(B,S),B.prototype.toString=function(X){return this.options.writer.declaration(this,this.options.writer.filterOptions(X))},B}(z)}).call(this)},9195:function(Ge,Ne,K){(function(){var I,V,z,re,oe,S,B,X,ge={}.hasOwnProperty;X=K(3452).isObject,B=K(8563),I=K(2269),V=K(7274),re=K(8349),z=K(2068),oe=K(3087),S=K(5264),Ge.exports=function(le){function G(P,q,_e){var Re,U,Y,C,M,x;if(G.__super__.constructor.call(this,P),this.type=I.DocType,P.children)for(U=0,Y=(C=P.children).length;U<Y;U++)if((Re=C[U]).type===I.Element){this.name=Re.name;break}this.documentObject=P,X(q)&&(q=(M=q).pubID,_e=M.sysID),null==_e&&(_e=(x=[q,_e])[0],q=x[1]),null!=q&&(this.pubID=this.stringify.dtdPubID(q)),null!=_e&&(this.sysID=this.stringify.dtdSysID(_e))}return function(le,G){for(var P in G)ge.call(G,P)&&(le[P]=G[P]);function q(){this.constructor=le}q.prototype=G.prototype,le.prototype=new q,le.__super__=G.prototype}(G,le),Object.defineProperty(G.prototype,"entities",{get:function(){var P,q,_e,Re,U;for(Re={},q=0,_e=(U=this.children).length;q<_e;q++)(P=U[q]).type===I.EntityDeclaration&&!P.pe&&(Re[P.name]=P);return new S(Re)}}),Object.defineProperty(G.prototype,"notations",{get:function(){var P,q,_e,Re,U;for(Re={},q=0,_e=(U=this.children).length;q<_e;q++)(P=U[q]).type===I.NotationDeclaration&&(Re[P.name]=P);return new S(Re)}}),Object.defineProperty(G.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(G.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(G.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),G.prototype.element=function(P,q){var _e;return _e=new z(this,P,q),this.children.push(_e),this},G.prototype.attList=function(P,q,_e,Re,U){var Y;return Y=new V(this,P,q,_e,Re,U),this.children.push(Y),this},G.prototype.entity=function(P,q){var _e;return _e=new re(this,!1,P,q),this.children.push(_e),this},G.prototype.pEntity=function(P,q){var _e;return _e=new re(this,!0,P,q),this.children.push(_e),this},G.prototype.notation=function(P,q){var _e;return _e=new oe(this,P,q),this.children.push(_e),this},G.prototype.toString=function(P){return this.options.writer.docType(this,this.options.writer.filterOptions(P))},G.prototype.ele=function(P,q){return this.element(P,q)},G.prototype.att=function(P,q,_e,Re,U){return this.attList(P,q,_e,Re,U)},G.prototype.ent=function(P,q){return this.entity(P,q)},G.prototype.pent=function(P,q){return this.pEntity(P,q)},G.prototype.not=function(P,q){return this.notation(P,q)},G.prototype.up=function(){return this.root()||this.documentObject},G.prototype.isEqualNode=function(P){return!(!G.__super__.isEqualNode.apply(this,arguments).isEqualNode(P)||P.name!==this.name||P.publicId!==this.publicId||P.systemId!==this.systemId)},G}(B)}).call(this)},519:function(Ge,Ne,K){(function(){var I,V,z,oe,J,S,B,ee={}.hasOwnProperty;B=K(3452).isPlainObject,z=K(9906),V=K(5806),oe=K(8563),I=K(2269),S=K(5041),J=K(4354),Ge.exports=function(ge){function le(G){le.__super__.constructor.call(this,null),this.name="#document",this.type=I.Document,this.documentURI=null,this.domConfig=new V,G||(G={}),G.writer||(G.writer=new J),this.options=G,this.stringify=new S(G)}return function(ge,le){for(var G in le)ee.call(le,G)&&(ge[G]=le[G]);function P(){this.constructor=ge}P.prototype=le.prototype,ge.prototype=new P,ge.__super__=le.prototype}(le,ge),Object.defineProperty(le.prototype,"implementation",{value:new z}),Object.defineProperty(le.prototype,"doctype",{get:function(){var G,P,q,_e;for(P=0,q=(_e=this.children).length;P<q;P++)if((G=_e[P]).type===I.DocType)return G;return null}}),Object.defineProperty(le.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(le.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(le.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(le.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===I.Declaration?this.children[0].encoding:null}}),Object.defineProperty(le.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===I.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(le.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===I.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(le.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(le.prototype,"origin",{get:function(){return null}}),Object.defineProperty(le.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(le.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(le.prototype,"contentType",{get:function(){return null}}),le.prototype.end=function(G){var P;return P={},G?B(G)&&(P=G,G=this.options.writer):G=this.options.writer,G.document(this,G.filterOptions(P))},le.prototype.toString=function(G){return this.options.writer.document(this,this.options.writer.filterOptions(G))},le.prototype.createElement=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createTextNode=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createComment=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createCDATASection=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createProcessingInstruction=function(G,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createAttribute=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createEntityReference=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.getElementsByTagName=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.importNode=function(G,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createElementNS=function(G,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createAttributeNS=function(G,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.getElementsByTagNameNS=function(G,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.getElementById=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.adoptNode=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.renameNode=function(G,P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.getElementsByClassName=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createEvent=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createNodeIterator=function(G,P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},le.prototype.createTreeWalker=function(G,P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},le}(oe)}).call(this)},1105:function(Ge,Ne,K){(function(){var I,V,z,re,oe,J,S,B,X,ee,ge,le,P,q,_e,Re,U,Y,C,M,x,F,ie,L={}.hasOwnProperty;ie=K(3452),x=ie.isObject,M=ie.isFunction,F=ie.isPlainObject,C=ie.getValue,I=K(2269),le=K(519),P=K(3352),re=K(1361),oe=K(2516),_e=K(9942),Y=K(474),q=K(4666),ee=K(4789),ge=K(9195),J=K(7274),B=K(8349),S=K(2068),X=K(3087),z=K(5968),U=K(5041),Re=K(4354),V=K(6316),Ge.exports=function(){function be(Z,pe,He){var Je;this.name="?xml",this.type=I.Document,Z||(Z={}),Je={},Z.writer?F(Z.writer)&&(Je=Z.writer,Z.writer=new Re):Z.writer=new Re,this.options=Z,this.writer=Z.writer,this.writerOptions=this.writer.filterOptions(Je),this.stringify=new U(Z),this.onDataCallback=pe||function(){},this.onEndCallback=He||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return be.prototype.createChildNode=function(Z){var He,Je,nt,un,ht,Gn,en;switch(Z.type){case I.CData:this.cdata(Z.value);break;case I.Comment:this.comment(Z.value);break;case I.Element:for(He in Je={},Gn=Z.attribs)!L.call(Gn,He)||(Je[He]=Gn[He].value);this.node(Z.name,Je);break;case I.Dummy:this.dummy();break;case I.Raw:this.raw(Z.value);break;case I.Text:this.text(Z.value);break;case I.ProcessingInstruction:this.instruction(Z.target,Z.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+Z.constructor.name)}for(un=0,ht=(en=Z.children).length;un<ht;un++)this.createChildNode(nt=en[un]),nt.type===I.Element&&this.up();return this},be.prototype.dummy=function(){return this},be.prototype.node=function(Z,pe,He){var Je;if(null==Z)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(Z));return this.openCurrent(),Z=C(Z),null==pe&&(pe={}),pe=C(pe),x(pe)||(He=(Je=[pe,He])[0],pe=Je[1]),this.currentNode=new P(this,Z,pe),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=He&&this.text(He),this},be.prototype.element=function(Z,pe,He){var Je,nt,un,ht,Gn,en;if(this.currentNode&&this.currentNode.type===I.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(Z)||x(Z)||M(Z))for(ht=this.options.noValidation,this.options.noValidation=!0,(en=new le(this.options).element("TEMP_ROOT")).element(Z),this.options.noValidation=ht,nt=0,un=(Gn=en.children).length;nt<un;nt++)this.createChildNode(Je=Gn[nt]),Je.type===I.Element&&this.up();else this.node(Z,pe,He);return this},be.prototype.attribute=function(Z,pe){var He;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(Z));if(null!=Z&&(Z=C(Z)),x(Z))for(He in Z)!L.call(Z,He)||this.attribute(He,Z[He]);else M(pe)&&(pe=pe.apply()),this.options.keepNullAttributes&&null==pe?this.currentNode.attribs[Z]=new z(this,Z,""):null!=pe&&(this.currentNode.attribs[Z]=new z(this,Z,pe));return this},be.prototype.text=function(Z){var pe;return this.openCurrent(),pe=new Y(this,Z),this.onData(this.writer.text(pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.cdata=function(Z){var pe;return this.openCurrent(),pe=new re(this,Z),this.onData(this.writer.cdata(pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.comment=function(Z){var pe;return this.openCurrent(),pe=new oe(this,Z),this.onData(this.writer.comment(pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.raw=function(Z){var pe;return this.openCurrent(),pe=new _e(this,Z),this.onData(this.writer.raw(pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.instruction=function(Z,pe){var He,Je,un,ht;if(this.openCurrent(),null!=Z&&(Z=C(Z)),null!=pe&&(pe=C(pe)),Array.isArray(Z))for(He=0,un=Z.length;He<un;He++)this.instruction(Je=Z[He]);else if(x(Z))for(Je in Z)!L.call(Z,Je)||this.instruction(Je,Z[Je]);else M(pe)&&(pe=pe.apply()),ht=new q(this,Z,pe),this.onData(this.writer.processingInstruction(ht,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},be.prototype.declaration=function(Z,pe,He){var Je;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return Je=new ee(this,Z,pe,He),this.onData(this.writer.declaration(Je,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.doctype=function(Z,pe,He){if(this.openCurrent(),null==Z)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new ge(this,pe,He),this.currentNode.rootNodeName=Z,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},be.prototype.dtdElement=function(Z,pe){var He;return this.openCurrent(),He=new S(this,Z,pe),this.onData(this.writer.dtdElement(He,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.attList=function(Z,pe,He,Je,nt){var un;return this.openCurrent(),un=new J(this,Z,pe,He,Je,nt),this.onData(this.writer.dtdAttList(un,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.entity=function(Z,pe){var He;return this.openCurrent(),He=new B(this,!1,Z,pe),this.onData(this.writer.dtdEntity(He,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.pEntity=function(Z,pe){var He;return this.openCurrent(),He=new B(this,!0,Z,pe),this.onData(this.writer.dtdEntity(He,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.notation=function(Z,pe){var He;return this.openCurrent(),He=new X(this,Z,pe),this.onData(this.writer.dtdNotation(He,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},be.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},be.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},be.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},be.prototype.openNode=function(Z){var He,Je,nt;if(!Z.isOpen){if(!this.root&&0===this.currentLevel&&Z.type===I.Element&&(this.root=Z),He="",Z.type===I.Element){for(Je in this.writerOptions.state=V.OpenTag,He=this.writer.indent(Z,this.writerOptions,this.currentLevel)+"<"+Z.name,nt=Z.attribs)!L.call(nt,Je)||(He+=this.writer.attribute(nt[Je],this.writerOptions,this.currentLevel));He+=(Z.children?">":"/>")+this.writer.endline(Z,this.writerOptions,this.currentLevel),this.writerOptions.state=V.InsideTag}else this.writerOptions.state=V.OpenTag,He=this.writer.indent(Z,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+Z.rootNodeName,Z.pubID&&Z.sysID?He+=' PUBLIC "'+Z.pubID+'" "'+Z.sysID+'"':Z.sysID&&(He+=' SYSTEM "'+Z.sysID+'"'),Z.children?(He+=" [",this.writerOptions.state=V.InsideTag):(this.writerOptions.state=V.CloseTag,He+=">"),He+=this.writer.endline(Z,this.writerOptions,this.currentLevel);return this.onData(He,this.currentLevel),Z.isOpen=!0}},be.prototype.closeNode=function(Z){var pe;if(!Z.isClosed)return"",this.writerOptions.state=V.CloseTag,pe=Z.type===I.Element?this.writer.indent(Z,this.writerOptions,this.currentLevel)+"</"+Z.name+">"+this.writer.endline(Z,this.writerOptions,this.currentLevel):this.writer.indent(Z,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(Z,this.writerOptions,this.currentLevel),this.writerOptions.state=V.None,this.onData(pe,this.currentLevel),Z.isClosed=!0},be.prototype.onData=function(Z,pe){return this.documentStarted=!0,this.onDataCallback(Z,pe+1)},be.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},be.prototype.debugInfo=function(Z){return null==Z?"":"node: <"+Z+">"},be.prototype.ele=function(){return this.element.apply(this,arguments)},be.prototype.nod=function(Z,pe,He){return this.node(Z,pe,He)},be.prototype.txt=function(Z){return this.text(Z)},be.prototype.dat=function(Z){return this.cdata(Z)},be.prototype.com=function(Z){return this.comment(Z)},be.prototype.ins=function(Z,pe){return this.instruction(Z,pe)},be.prototype.dec=function(Z,pe,He){return this.declaration(Z,pe,He)},be.prototype.dtd=function(Z,pe,He){return this.doctype(Z,pe,He)},be.prototype.e=function(Z,pe,He){return this.element(Z,pe,He)},be.prototype.n=function(Z,pe,He){return this.node(Z,pe,He)},be.prototype.t=function(Z){return this.text(Z)},be.prototype.d=function(Z){return this.cdata(Z)},be.prototype.c=function(Z){return this.comment(Z)},be.prototype.r=function(Z){return this.raw(Z)},be.prototype.i=function(Z,pe){return this.instruction(Z,pe)},be.prototype.att=function(){return this.currentNode&&this.currentNode.type===I.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},be.prototype.a=function(){return this.currentNode&&this.currentNode.type===I.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},be.prototype.ent=function(Z,pe){return this.entity(Z,pe)},be.prototype.pent=function(Z,pe){return this.pEntity(Z,pe)},be.prototype.not=function(Z,pe){return this.notation(Z,pe)},be}()}).call(this)},4173:function(Ge,Ne,K){(function(){var I,z,oe={}.hasOwnProperty;z=K(8563),I=K(2269),Ge.exports=function(J){function S(B){S.__super__.constructor.call(this,B),this.type=I.Dummy}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),S.prototype.clone=function(){return Object.create(this)},S.prototype.toString=function(B){return""},S}(z)}).call(this)},3352:function(Ge,Ne,K){(function(){var I,V,re,oe,J,S,B,X,ge={}.hasOwnProperty;X=K(3452),B=X.isObject,S=X.isFunction,J=X.getValue,oe=K(8563),I=K(2269),V=K(5968),re=K(5264),Ge.exports=function(le){function G(P,q,_e){var Re,U,Y,C;if(G.__super__.constructor.call(this,P),null==q)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(q),this.type=I.Element,this.attribs={},this.schemaTypeInfo=null,null!=_e&&this.attribute(_e),P.type===I.Document&&(this.isRoot=!0,this.documentObject=P,P.rootObject=this,P.children))for(U=0,Y=(C=P.children).length;U<Y;U++)if((Re=C[U]).type===I.DocType){Re.name=this.name;break}}return function(le,G){for(var P in G)ge.call(G,P)&&(le[P]=G[P]);function q(){this.constructor=le}q.prototype=G.prototype,le.prototype=new q,le.__super__=G.prototype}(G,le),Object.defineProperty(G.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(G.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(G.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(G.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(G.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(G.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(G.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(G.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new re(this.attribs)),this.attributeMap}}),G.prototype.clone=function(){var q,_e,Re;for(q in(_e=Object.create(this)).isRoot&&(_e.documentObject=null),_e.attribs={},Re=this.attribs)!ge.call(Re,q)||(_e.attribs[q]=Re[q].clone());return _e.children=[],this.children.forEach(function(U){var Y;return(Y=U.clone()).parent=_e,_e.children.push(Y)}),_e},G.prototype.attribute=function(P,q){var _e;if(null!=P&&(P=J(P)),B(P))for(_e in P)!ge.call(P,_e)||this.attribute(_e,P[_e]);else S(q)&&(q=q.apply()),this.options.keepNullAttributes&&null==q?this.attribs[P]=new V(this,P,""):null!=q&&(this.attribs[P]=new V(this,P,q));return this},G.prototype.removeAttribute=function(P){var _e,Re;if(null==P)throw new Error("Missing attribute name. "+this.debugInfo());if(P=J(P),Array.isArray(P))for(_e=0,Re=P.length;_e<Re;_e++)delete this.attribs[P[_e]];else delete this.attribs[P];return this},G.prototype.toString=function(P){return this.options.writer.element(this,this.options.writer.filterOptions(P))},G.prototype.att=function(P,q){return this.attribute(P,q)},G.prototype.a=function(P,q){return this.attribute(P,q)},G.prototype.getAttribute=function(P){return this.attribs.hasOwnProperty(P)?this.attribs[P].value:null},G.prototype.setAttribute=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.getAttributeNode=function(P){return this.attribs.hasOwnProperty(P)?this.attribs[P]:null},G.prototype.setAttributeNode=function(P){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.removeAttributeNode=function(P){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.getElementsByTagName=function(P){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.getAttributeNS=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.setAttributeNS=function(P,q,_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.removeAttributeNS=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.getAttributeNodeNS=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.setAttributeNodeNS=function(P){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.getElementsByTagNameNS=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.hasAttribute=function(P){return this.attribs.hasOwnProperty(P)},G.prototype.hasAttributeNS=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.setIdAttribute=function(P,q){return this.attribs.hasOwnProperty(P)?this.attribs[P].isId:q},G.prototype.setIdAttributeNS=function(P,q,_e){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.setIdAttributeNode=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.getElementsByTagName=function(P){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.getElementsByTagNameNS=function(P,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.getElementsByClassName=function(P){throw new Error("This DOM method is not implemented."+this.debugInfo())},G.prototype.isEqualNode=function(P){var q,_e,Re;if(!G.__super__.isEqualNode.apply(this,arguments).isEqualNode(P)||P.namespaceURI!==this.namespaceURI||P.prefix!==this.prefix||P.localName!==this.localName||P.attribs.length!==this.attribs.length)return!1;for(q=_e=0,Re=this.attribs.length-1;0<=Re?_e<=Re:_e>=Re;q=0<=Re?++_e:--_e)if(!this.attribs[q].isEqualNode(P.attribs[q]))return!1;return!0},G}(oe)}).call(this)},5264:function(Ge){(function(){Ge.exports=function(){function K(I){this.nodes=I}return Object.defineProperty(K.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),K.prototype.clone=function(){return this.nodes=null},K.prototype.getNamedItem=function(I){return this.nodes[I]},K.prototype.setNamedItem=function(I){var V;return V=this.nodes[I.nodeName],this.nodes[I.nodeName]=I,V||null},K.prototype.removeNamedItem=function(I){var V;return V=this.nodes[I],delete this.nodes[I],V||null},K.prototype.item=function(I){return this.nodes[Object.keys(this.nodes)[I]]||null},K.prototype.getNamedItemNS=function(I,V){throw new Error("This DOM method is not implemented.")},K.prototype.setNamedItemNS=function(I){throw new Error("This DOM method is not implemented.")},K.prototype.removeNamedItemNS=function(I,V){throw new Error("This DOM method is not implemented.")},K}()}).call(this)},8563:function(Ge,Ne,K){(function(){var I,V,z,re,oe,J,S,B,ge,le,G,P,q,_e,Re,U,Y,C={}.hasOwnProperty;Y=K(3452),U=Y.isObject,Re=Y.isFunction,_e=Y.isEmpty,q=Y.getValue,B=null,z=null,re=null,oe=null,J=null,G=null,P=null,le=null,S=null,V=null,ge=null,I=null,Ge.exports=function(){function M(x){this.parent=x,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,B||(B=K(3352),z=K(1361),re=K(2516),oe=K(4789),J=K(9195),G=K(9942),P=K(474),le=K(4666),S=K(4173),V=K(2269),ge=K(5112),K(5264),I=K(599))}return Object.defineProperty(M.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(M.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(M.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(M.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(M.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new ge(this.children)),this.childNodeList}}),Object.defineProperty(M.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(M.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(M.prototype,"previousSibling",{get:function(){var x;return x=this.parent.children.indexOf(this),this.parent.children[x-1]||null}}),Object.defineProperty(M.prototype,"nextSibling",{get:function(){var x;return x=this.parent.children.indexOf(this),this.parent.children[x+1]||null}}),Object.defineProperty(M.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(M.prototype,"textContent",{get:function(){var x,F,ie,L,be;if(this.nodeType===V.Element||this.nodeType===V.DocumentFragment){for(be="",F=0,ie=(L=this.children).length;F<ie;F++)(x=L[F]).textContent&&(be+=x.textContent);return be}return null},set:function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),M.prototype.setParent=function(x){var ie,L,be,Z;for(this.parent=x,x&&(this.options=x.options,this.stringify=x.stringify),Z=[],ie=0,L=(be=this.children).length;ie<L;ie++)Z.push(be[ie].setParent(this));return Z},M.prototype.element=function(x,F,ie){var L,Z,pe,He,Je,nt,un,ht,Gn,en;if(Je=null,null===F&&null==ie&&(F=(ht=[{},null])[0],ie=ht[1]),null==F&&(F={}),F=q(F),U(F)||(ie=(Gn=[F,ie])[0],F=Gn[1]),null!=x&&(x=q(x)),Array.isArray(x))for(Z=0,nt=x.length;Z<nt;Z++)Je=this.element(x[Z]);else if(Re(x))Je=this.element(x.apply());else if(U(x)){for(He in x)if(C.call(x,He))if(Re(en=x[He])&&(en=en.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===He.indexOf(this.stringify.convertAttKey))Je=this.attribute(He.substr(this.stringify.convertAttKey.length),en);else if(!this.options.separateArrayItems&&Array.isArray(en)&&_e(en))Je=this.dummy();else if(U(en)&&_e(en))Je=this.element(He);else if(this.options.keepNullNodes||null!=en)if(!this.options.separateArrayItems&&Array.isArray(en))for(pe=0,un=en.length;pe<un;pe++)(L={})[He]=en[pe],Je=this.element(L);else U(en)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===He.indexOf(this.stringify.convertTextKey)?Je=this.element(en):(Je=this.element(He)).element(en):Je=this.element(He,en);else Je=this.dummy()}else Je=this.options.keepNullNodes||null!==ie?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===x.indexOf(this.stringify.convertTextKey)?this.text(ie):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===x.indexOf(this.stringify.convertCDataKey)?this.cdata(ie):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===x.indexOf(this.stringify.convertCommentKey)?this.comment(ie):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===x.indexOf(this.stringify.convertRawKey)?this.raw(ie):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===x.indexOf(this.stringify.convertPIKey)?this.instruction(x.substr(this.stringify.convertPIKey.length),ie):this.node(x,F,ie):this.dummy();if(null==Je)throw new Error("Could not create any elements with: "+x+". "+this.debugInfo());return Je},M.prototype.insertBefore=function(x,F,ie){var L,be,Z,pe,He;if(null!=x?x.type:void 0)return pe=F,(Z=x).setParent(this),pe?(be=children.indexOf(pe),He=children.splice(be),children.push(Z),Array.prototype.push.apply(children,He)):children.push(Z),Z;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(x));return be=this.parent.children.indexOf(this),He=this.parent.children.splice(be),L=this.parent.element(x,F,ie),Array.prototype.push.apply(this.parent.children,He),L},M.prototype.insertAfter=function(x,F,ie){var L,be,Z;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(x));return be=this.parent.children.indexOf(this),Z=this.parent.children.splice(be+1),L=this.parent.element(x,F,ie),Array.prototype.push.apply(this.parent.children,Z),L},M.prototype.remove=function(){var x;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return x=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[x,x-x+1].concat([])),this.parent},M.prototype.node=function(x,F,ie){var L,be;return null!=x&&(x=q(x)),F||(F={}),F=q(F),U(F)||(ie=(be=[F,ie])[0],F=be[1]),L=new B(this,x,F),null!=ie&&L.text(ie),this.children.push(L),L},M.prototype.text=function(x){var F;return U(x)&&this.element(x),F=new P(this,x),this.children.push(F),this},M.prototype.cdata=function(x){var F;return F=new z(this,x),this.children.push(F),this},M.prototype.comment=function(x){var F;return F=new re(this,x),this.children.push(F),this},M.prototype.commentBefore=function(x){var ie,L;return ie=this.parent.children.indexOf(this),L=this.parent.children.splice(ie),this.parent.comment(x),Array.prototype.push.apply(this.parent.children,L),this},M.prototype.commentAfter=function(x){var ie,L;return ie=this.parent.children.indexOf(this),L=this.parent.children.splice(ie+1),this.parent.comment(x),Array.prototype.push.apply(this.parent.children,L),this},M.prototype.raw=function(x){var F;return F=new G(this,x),this.children.push(F),this},M.prototype.dummy=function(){return new S(this)},M.prototype.instruction=function(x,F){var ie,be,Z,pe;if(null!=x&&(x=q(x)),null!=F&&(F=q(F)),Array.isArray(x))for(Z=0,pe=x.length;Z<pe;Z++)this.instruction(ie=x[Z]);else if(U(x))for(ie in x)!C.call(x,ie)||this.instruction(ie,x[ie]);else Re(F)&&(F=F.apply()),be=new le(this,x,F),this.children.push(be);return this},M.prototype.instructionBefore=function(x,F){var L,be;return L=this.parent.children.indexOf(this),be=this.parent.children.splice(L),this.parent.instruction(x,F),Array.prototype.push.apply(this.parent.children,be),this},M.prototype.instructionAfter=function(x,F){var L,be;return L=this.parent.children.indexOf(this),be=this.parent.children.splice(L+1),this.parent.instruction(x,F),Array.prototype.push.apply(this.parent.children,be),this},M.prototype.declaration=function(x,F,ie){var L,be;return L=this.document(),be=new oe(L,x,F,ie),0===L.children.length?L.children.unshift(be):L.children[0].type===V.Declaration?L.children[0]=be:L.children.unshift(be),L.root()||L},M.prototype.dtd=function(x,F){var L,be,Z,pe,He,Je,nt,un,ht;for(L=this.document(),be=new J(L,x,F),Z=pe=0,Je=(un=L.children).length;pe<Je;Z=++pe)if(un[Z].type===V.DocType)return L.children[Z]=be,be;for(Z=He=0,nt=(ht=L.children).length;He<nt;Z=++He)if(ht[Z].isRoot)return L.children.splice(Z,0,be),be;return L.children.push(be),be},M.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},M.prototype.root=function(){var x;for(x=this;x;){if(x.type===V.Document)return x.rootObject;if(x.isRoot)return x;x=x.parent}},M.prototype.document=function(){var x;for(x=this;x;){if(x.type===V.Document)return x;x=x.parent}},M.prototype.end=function(x){return this.document().end(x)},M.prototype.prev=function(){var x;if((x=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[x-1]},M.prototype.next=function(){var x;if(-1===(x=this.parent.children.indexOf(this))||x===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[x+1]},M.prototype.importDocument=function(x){var F;return(F=x.root().clone()).parent=this,F.isRoot=!1,this.children.push(F),this},M.prototype.debugInfo=function(x){var F,ie;return null!=(x=x||this.name)||(null!=(F=this.parent)?F.name:void 0)?null==x?"parent: <"+this.parent.name+">":(null!=(ie=this.parent)?ie.name:void 0)?"node: <"+x+">, parent: <"+this.parent.name+">":"node: <"+x+">":""},M.prototype.ele=function(x,F,ie){return this.element(x,F,ie)},M.prototype.nod=function(x,F,ie){return this.node(x,F,ie)},M.prototype.txt=function(x){return this.text(x)},M.prototype.dat=function(x){return this.cdata(x)},M.prototype.com=function(x){return this.comment(x)},M.prototype.ins=function(x,F){return this.instruction(x,F)},M.prototype.doc=function(){return this.document()},M.prototype.dec=function(x,F,ie){return this.declaration(x,F,ie)},M.prototype.e=function(x,F,ie){return this.element(x,F,ie)},M.prototype.n=function(x,F,ie){return this.node(x,F,ie)},M.prototype.t=function(x){return this.text(x)},M.prototype.d=function(x){return this.cdata(x)},M.prototype.c=function(x){return this.comment(x)},M.prototype.r=function(x){return this.raw(x)},M.prototype.i=function(x,F){return this.instruction(x,F)},M.prototype.u=function(){return this.up()},M.prototype.importXMLBuilder=function(x){return this.importDocument(x)},M.prototype.replaceChild=function(x,F){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.removeChild=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.appendChild=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.hasChildNodes=function(){return 0!==this.children.length},M.prototype.cloneNode=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.isSupported=function(x,F){return!0},M.prototype.hasAttributes=function(){return 0!==this.attribs.length},M.prototype.compareDocumentPosition=function(x){var F,ie;return(F=this)===x?0:this.document()!==x.document()?(ie=I.Disconnected|I.ImplementationSpecific,Math.random()<.5?ie|=I.Preceding:ie|=I.Following,ie):F.isAncestor(x)?I.Contains|I.Preceding:F.isDescendant(x)?I.Contains|I.Following:F.isPreceding(x)?I.Preceding:I.Following},M.prototype.isSameNode=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.lookupPrefix=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.isDefaultNamespace=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.lookupNamespaceURI=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.isEqualNode=function(x){var F,ie,L;if(x.nodeType!==this.nodeType||x.children.length!==this.children.length)return!1;for(F=ie=0,L=this.children.length-1;0<=L?ie<=L:ie>=L;F=0<=L?++ie:--ie)if(!this.children[F].isEqualNode(x.children[F]))return!1;return!0},M.prototype.getFeature=function(x,F){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.setUserData=function(x,F,ie){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.getUserData=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},M.prototype.contains=function(x){return!!x&&(x===this||this.isDescendant(x))},M.prototype.isDescendant=function(x){var F,L,be,Z;for(L=0,be=(Z=this.children).length;L<be;L++)if(x===(F=Z[L])||F.isDescendant(x))return!0;return!1},M.prototype.isAncestor=function(x){return x.isDescendant(this)},M.prototype.isPreceding=function(x){var F,ie;return F=this.treePosition(x),ie=this.treePosition(this),-1!==F&&-1!==ie&&F<ie},M.prototype.isFollowing=function(x){var F,ie;return F=this.treePosition(x),ie=this.treePosition(this),-1!==F&&-1!==ie&&F>ie},M.prototype.treePosition=function(x){var F,ie;return ie=0,F=!1,this.foreachTreeNode(this.document(),function(L){if(ie++,!F&&L===x)return F=!0}),F?ie:-1},M.prototype.foreachTreeNode=function(x,F){var ie,L,be,Z,pe;for(x||(x=this.document()),L=0,be=(Z=x.children).length;L<be;L++){if(pe=F(ie=Z[L]))return pe;if(pe=this.foreachTreeNode(ie,F))return pe}},M}()}).call(this)},5112:function(Ge){(function(){Ge.exports=function(){function K(I){this.nodes=I}return Object.defineProperty(K.prototype,"length",{get:function(){return this.nodes.length||0}}),K.prototype.clone=function(){return this.nodes=null},K.prototype.item=function(I){return this.nodes[I]||null},K}()}).call(this)},4666:function(Ge,Ne,K){(function(){var I,V,oe={}.hasOwnProperty;I=K(2269),V=K(2182),Ge.exports=function(J){function S(B,X,ee){if(S.__super__.constructor.call(this,B),null==X)throw new Error("Missing instruction target. "+this.debugInfo());this.type=I.ProcessingInstruction,this.target=this.stringify.insTarget(X),this.name=this.target,ee&&(this.value=this.stringify.insValue(ee))}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),S.prototype.clone=function(){return Object.create(this)},S.prototype.toString=function(B){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(B))},S.prototype.isEqualNode=function(B){return!(!S.__super__.isEqualNode.apply(this,arguments).isEqualNode(B)||B.target!==this.target)},S}(V)}).call(this)},9942:function(Ge,Ne,K){(function(){var I,V,oe={}.hasOwnProperty;I=K(2269),V=K(8563),Ge.exports=function(J){function S(B,X){if(S.__super__.constructor.call(this,B),null==X)throw new Error("Missing raw text. "+this.debugInfo());this.type=I.Raw,this.value=this.stringify.raw(X)}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),S.prototype.clone=function(){return Object.create(this)},S.prototype.toString=function(B){return this.options.writer.raw(this,this.options.writer.filterOptions(B))},S}(V)}).call(this)},7647:function(Ge,Ne,K){(function(){var I,V,re,J={}.hasOwnProperty;I=K(2269),re=K(3576),V=K(6316),Ge.exports=function(S){function B(X,ee){this.stream=X,B.__super__.constructor.call(this,ee)}return function(S,B){for(var X in B)J.call(B,X)&&(S[X]=B[X]);function ee(){this.constructor=S}ee.prototype=B.prototype,S.prototype=new ee,S.__super__=B.prototype}(B,S),B.prototype.endline=function(X,ee,ge){return X.isLastRootNode&&ee.state===V.CloseTag?"":B.__super__.endline.call(this,X,ee,ge)},B.prototype.document=function(X,ee){var le,G,P,q,_e,Re,U,Y;for(le=G=0,q=(Re=X.children).length;G<q;le=++G)Re[le].isLastRootNode=le===X.children.length-1;for(ee=this.filterOptions(ee),Y=[],P=0,_e=(U=X.children).length;P<_e;P++)Y.push(this.writeChildNode(U[P],ee,0));return Y},B.prototype.attribute=function(X,ee,ge){return this.stream.write(B.__super__.attribute.call(this,X,ee,ge))},B.prototype.cdata=function(X,ee,ge){return this.stream.write(B.__super__.cdata.call(this,X,ee,ge))},B.prototype.comment=function(X,ee,ge){return this.stream.write(B.__super__.comment.call(this,X,ee,ge))},B.prototype.declaration=function(X,ee,ge){return this.stream.write(B.__super__.declaration.call(this,X,ee,ge))},B.prototype.docType=function(X,ee,ge){var G,P,q;if(ge||(ge=0),this.openNode(X,ee,ge),ee.state=V.OpenTag,this.stream.write(this.indent(X,ee,ge)),this.stream.write("<!DOCTYPE "+X.root().name),X.pubID&&X.sysID?this.stream.write(' PUBLIC "'+X.pubID+'" "'+X.sysID+'"'):X.sysID&&this.stream.write(' SYSTEM "'+X.sysID+'"'),X.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(X,ee,ge)),ee.state=V.InsideTag,G=0,P=(q=X.children).length;G<P;G++)this.writeChildNode(q[G],ee,ge+1);ee.state=V.CloseTag,this.stream.write("]")}return ee.state=V.CloseTag,this.stream.write(ee.spaceBeforeSlash+">"),this.stream.write(this.endline(X,ee,ge)),ee.state=V.None,this.closeNode(X,ee,ge)},B.prototype.element=function(X,ee,ge){var P,q,_e,Re,U,C,M;for(U in ge||(ge=0),this.openNode(X,ee,ge),ee.state=V.OpenTag,this.stream.write(this.indent(X,ee,ge)+"<"+X.name),C=X.attribs)!J.call(C,U)||this.attribute(C[U],ee,ge);if(q=0===(P=X.children.length)?null:X.children[0],0===P||X.children.every(function(x){return(x.type===I.Text||x.type===I.Raw)&&""===x.value}))ee.allowEmpty?(this.stream.write(">"),ee.state=V.CloseTag,this.stream.write("</"+X.name+">")):(ee.state=V.CloseTag,this.stream.write(ee.spaceBeforeSlash+"/>"));else if(!ee.pretty||1!==P||q.type!==I.Text&&q.type!==I.Raw||null==q.value){for(this.stream.write(">"+this.endline(X,ee,ge)),ee.state=V.InsideTag,_e=0,Re=(M=X.children).length;_e<Re;_e++)this.writeChildNode(M[_e],ee,ge+1);ee.state=V.CloseTag,this.stream.write(this.indent(X,ee,ge)+"</"+X.name+">")}else this.stream.write(">"),ee.state=V.InsideTag,ee.suppressPrettyCount++,this.writeChildNode(q,ee,ge+1),ee.suppressPrettyCount--,ee.state=V.CloseTag,this.stream.write("</"+X.name+">");return this.stream.write(this.endline(X,ee,ge)),ee.state=V.None,this.closeNode(X,ee,ge)},B.prototype.processingInstruction=function(X,ee,ge){return this.stream.write(B.__super__.processingInstruction.call(this,X,ee,ge))},B.prototype.raw=function(X,ee,ge){return this.stream.write(B.__super__.raw.call(this,X,ee,ge))},B.prototype.text=function(X,ee,ge){return this.stream.write(B.__super__.text.call(this,X,ee,ge))},B.prototype.dtdAttList=function(X,ee,ge){return this.stream.write(B.__super__.dtdAttList.call(this,X,ee,ge))},B.prototype.dtdElement=function(X,ee,ge){return this.stream.write(B.__super__.dtdElement.call(this,X,ee,ge))},B.prototype.dtdEntity=function(X,ee,ge){return this.stream.write(B.__super__.dtdEntity.call(this,X,ee,ge))},B.prototype.dtdNotation=function(X,ee,ge){return this.stream.write(B.__super__.dtdNotation.call(this,X,ee,ge))},B}(re)}).call(this)},4354:function(Ge,Ne,K){(function(){var V,re={}.hasOwnProperty;V=K(3576),Ge.exports=function(oe){function J(S){J.__super__.constructor.call(this,S)}return function(oe,J){for(var S in J)re.call(J,S)&&(oe[S]=J[S]);function B(){this.constructor=oe}B.prototype=J.prototype,oe.prototype=new B,oe.__super__=J.prototype}(J,oe),J.prototype.document=function(S,B){var ee,ge,le,G;for(B=this.filterOptions(B),le="",ee=0,ge=(G=S.children).length;ee<ge;ee++)le+=this.writeChildNode(G[ee],B,0);return B.pretty&&le.slice(-B.newline.length)===B.newline&&(le=le.slice(0,-B.newline.length)),le},J}(V)}).call(this)},5041:function(Ge){(function(){var K=function(V,z){return function(){return V.apply(z,arguments)}},I={}.hasOwnProperty;Ge.exports=function(){function V(z){var re,oe;for(re in this.assertLegalName=K(this.assertLegalName,this),this.assertLegalChar=K(this.assertLegalChar,this),z||(z={}),this.options=z,this.options.version||(this.options.version="1.0"),oe=z.stringify||{})!I.call(oe,re)||(this[re]=oe[re])}return V.prototype.name=function(z){return this.options.noValidation?z:this.assertLegalName(""+z||"")},V.prototype.text=function(z){return this.options.noValidation?z:this.assertLegalChar(this.textEscape(""+z||""))},V.prototype.cdata=function(z){return this.options.noValidation?z:(z=(z=""+z||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(z))},V.prototype.comment=function(z){if(this.options.noValidation)return z;if((z=""+z||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+z);return this.assertLegalChar(z)},V.prototype.raw=function(z){return this.options.noValidation?z:""+z||""},V.prototype.attValue=function(z){return this.options.noValidation?z:this.assertLegalChar(this.attEscape(z=""+z||""))},V.prototype.insTarget=function(z){return this.options.noValidation?z:this.assertLegalChar(""+z||"")},V.prototype.insValue=function(z){if(this.options.noValidation)return z;if((z=""+z||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+z);return this.assertLegalChar(z)},V.prototype.xmlVersion=function(z){if(this.options.noValidation)return z;if(!(z=""+z||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+z);return z},V.prototype.xmlEncoding=function(z){if(this.options.noValidation)return z;if(!(z=""+z||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+z);return this.assertLegalChar(z)},V.prototype.xmlStandalone=function(z){return this.options.noValidation?z:z?"yes":"no"},V.prototype.dtdPubID=function(z){return this.options.noValidation?z:this.assertLegalChar(""+z||"")},V.prototype.dtdSysID=function(z){return this.options.noValidation?z:this.assertLegalChar(""+z||"")},V.prototype.dtdElementValue=function(z){return this.options.noValidation?z:this.assertLegalChar(""+z||"")},V.prototype.dtdAttType=function(z){return this.options.noValidation?z:this.assertLegalChar(""+z||"")},V.prototype.dtdAttDefault=function(z){return this.options.noValidation?z:this.assertLegalChar(""+z||"")},V.prototype.dtdEntityValue=function(z){return this.options.noValidation?z:this.assertLegalChar(""+z||"")},V.prototype.dtdNData=function(z){return this.options.noValidation?z:this.assertLegalChar(""+z||"")},V.prototype.convertAttKey="@",V.prototype.convertPIKey="?",V.prototype.convertTextKey="#text",V.prototype.convertCDataKey="#cdata",V.prototype.convertCommentKey="#comment",V.prototype.convertRawKey="#raw",V.prototype.assertLegalChar=function(z){var oe;if(this.options.noValidation)return z;if("1.0"===this.options.version){if(oe=z.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+z+" at index "+oe.index)}else if("1.1"===this.options.version&&(oe=z.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+z+" at index "+oe.index);return z},V.prototype.assertLegalName=function(z){if(this.options.noValidation)return z;if(this.assertLegalChar(z),!z.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return z},V.prototype.textEscape=function(z){return this.options.noValidation?z:z.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},V.prototype.attEscape=function(z){return this.options.noValidation?z:z.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},V}()}).call(this)},474:function(Ge,Ne,K){(function(){var I,V,oe={}.hasOwnProperty;I=K(2269),V=K(2182),Ge.exports=function(J){function S(B,X){if(S.__super__.constructor.call(this,B),null==X)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=I.Text,this.value=this.stringify.text(X)}return function(J,S){for(var B in S)oe.call(S,B)&&(J[B]=S[B]);function X(){this.constructor=J}X.prototype=S.prototype,J.prototype=new X,J.__super__=S.prototype}(S,J),Object.defineProperty(S.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(S.prototype,"wholeText",{get:function(){var B,X,ee;for(ee="",X=this.previousSibling;X;)ee=X.data+ee,X=X.previousSibling;for(ee+=this.data,B=this.nextSibling;B;)ee+=B.data,B=B.nextSibling;return ee}}),S.prototype.clone=function(){return Object.create(this)},S.prototype.toString=function(B){return this.options.writer.text(this,this.options.writer.filterOptions(B))},S.prototype.splitText=function(B){throw new Error("This DOM method is not implemented."+this.debugInfo())},S.prototype.replaceWholeText=function(B){throw new Error("This DOM method is not implemented."+this.debugInfo())},S}(V)}).call(this)},3576:function(Ge,Ne,K){(function(){var I,V,Re,U={}.hasOwnProperty;Re=K(3452).assign,I=K(2269),K(4789),K(9195),K(1361),K(2516),K(3352),K(9942),K(474),K(4666),K(4173),K(7274),K(2068),K(8349),K(3087),V=K(6316),Ge.exports=function(){function Y(C){var M,x,F;for(M in C||(C={}),this.options=C,x=C.writer||{})!U.call(x,M)||(F=x[M],this["_"+M]=this[M],this[M]=F)}return Y.prototype.filterOptions=function(C){var M,x,F,ie,L,be,Z,pe;return C||(C={}),C=Re({},this.options,C),(M={writer:this}).pretty=C.pretty||!1,M.allowEmpty=C.allowEmpty||!1,M.indent=null!=(x=C.indent)?x:"  ",M.newline=null!=(F=C.newline)?F:"\n",M.offset=null!=(ie=C.offset)?ie:0,M.dontPrettyTextNodes=null!=(L=null!=(be=C.dontPrettyTextNodes)?be:C.dontprettytextnodes)?L:0,M.spaceBeforeSlash=null!=(Z=null!=(pe=C.spaceBeforeSlash)?pe:C.spacebeforeslash)?Z:"",!0===M.spaceBeforeSlash&&(M.spaceBeforeSlash=" "),M.suppressPrettyCount=0,M.user={},M.state=V.None,M},Y.prototype.indent=function(C,M,x){var F;return!M.pretty||M.suppressPrettyCount?"":M.pretty&&(F=(x||0)+M.offset+1)>0?new Array(F).join(M.indent):""},Y.prototype.endline=function(C,M,x){return!M.pretty||M.suppressPrettyCount?"":M.newline},Y.prototype.attribute=function(C,M,x){var F;return this.openAttribute(C,M,x),F=" "+C.name+'="'+C.value+'"',this.closeAttribute(C,M,x),F},Y.prototype.cdata=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x)+"<![CDATA[",M.state=V.InsideTag,F+=C.value,M.state=V.CloseTag,F+="]]>"+this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.comment=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x)+"\x3c!-- ",M.state=V.InsideTag,F+=C.value,M.state=V.CloseTag,F+=" --\x3e"+this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.declaration=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x)+"<?xml",M.state=V.InsideTag,F+=' version="'+C.version+'"',null!=C.encoding&&(F+=' encoding="'+C.encoding+'"'),null!=C.standalone&&(F+=' standalone="'+C.standalone+'"'),M.state=V.CloseTag,F+=M.spaceBeforeSlash+"?>",F+=this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.docType=function(C,M,x){var ie,L,be,Z;if(x||(x=0),this.openNode(C,M,x),M.state=V.OpenTag,be=this.indent(C,M,x),be+="<!DOCTYPE "+C.root().name,C.pubID&&C.sysID?be+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(be+=' SYSTEM "'+C.sysID+'"'),C.children.length>0){for(be+=" [",be+=this.endline(C,M,x),M.state=V.InsideTag,ie=0,L=(Z=C.children).length;ie<L;ie++)be+=this.writeChildNode(Z[ie],M,x+1);M.state=V.CloseTag,be+="]"}return M.state=V.CloseTag,be+=M.spaceBeforeSlash+">",be+=this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),be},Y.prototype.element=function(C,M,x){var ie,L,be,Z,pe,He,Je,nt,un,ht,Gn,en,jr;for(nt in x||(x=0),un=!1,ht="",this.openNode(C,M,x),M.state=V.OpenTag,ht+=this.indent(C,M,x)+"<"+C.name,Gn=C.attribs)!U.call(Gn,nt)||(ht+=this.attribute(Gn[nt],M,x));if(be=0===(L=C.children.length)?null:C.children[0],0===L||C.children.every(function(on){return(on.type===I.Text||on.type===I.Raw)&&""===on.value}))M.allowEmpty?(ht+=">",M.state=V.CloseTag,ht+="</"+C.name+">"+this.endline(C,M,x)):(M.state=V.CloseTag,ht+=M.spaceBeforeSlash+"/>"+this.endline(C,M,x));else if(!M.pretty||1!==L||be.type!==I.Text&&be.type!==I.Raw||null==be.value){if(M.dontPrettyTextNodes)for(Z=0,He=(en=C.children).length;Z<He;Z++)if(((ie=en[Z]).type===I.Text||ie.type===I.Raw)&&null!=ie.value){M.suppressPrettyCount++,un=!0;break}for(ht+=">"+this.endline(C,M,x),M.state=V.InsideTag,pe=0,Je=(jr=C.children).length;pe<Je;pe++)ht+=this.writeChildNode(ie=jr[pe],M,x+1);M.state=V.CloseTag,ht+=this.indent(C,M,x)+"</"+C.name+">",un&&M.suppressPrettyCount--,ht+=this.endline(C,M,x),M.state=V.None}else ht+=">",M.state=V.InsideTag,M.suppressPrettyCount++,un=!0,ht+=this.writeChildNode(be,M,x+1),M.suppressPrettyCount--,un=!1,M.state=V.CloseTag,ht+="</"+C.name+">"+this.endline(C,M,x);return this.closeNode(C,M,x),ht},Y.prototype.writeChildNode=function(C,M,x){switch(C.type){case I.CData:return this.cdata(C,M,x);case I.Comment:return this.comment(C,M,x);case I.Element:return this.element(C,M,x);case I.Raw:return this.raw(C,M,x);case I.Text:return this.text(C,M,x);case I.ProcessingInstruction:return this.processingInstruction(C,M,x);case I.Dummy:return"";case I.Declaration:return this.declaration(C,M,x);case I.DocType:return this.docType(C,M,x);case I.AttributeDeclaration:return this.dtdAttList(C,M,x);case I.ElementDeclaration:return this.dtdElement(C,M,x);case I.EntityDeclaration:return this.dtdEntity(C,M,x);case I.NotationDeclaration:return this.dtdNotation(C,M,x);default:throw new Error("Unknown XML node type: "+C.constructor.name)}},Y.prototype.processingInstruction=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x)+"<?",M.state=V.InsideTag,F+=C.target,C.value&&(F+=" "+C.value),M.state=V.CloseTag,F+=M.spaceBeforeSlash+"?>",F+=this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.raw=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x),M.state=V.InsideTag,F+=C.value,M.state=V.CloseTag,F+=this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.text=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x),M.state=V.InsideTag,F+=C.value,M.state=V.CloseTag,F+=this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.dtdAttList=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x)+"<!ATTLIST",M.state=V.InsideTag,F+=" "+C.elementName+" "+C.attributeName+" "+C.attributeType,"#DEFAULT"!==C.defaultValueType&&(F+=" "+C.defaultValueType),C.defaultValue&&(F+=' "'+C.defaultValue+'"'),M.state=V.CloseTag,F+=M.spaceBeforeSlash+">"+this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.dtdElement=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x)+"<!ELEMENT",M.state=V.InsideTag,F+=" "+C.name+" "+C.value,M.state=V.CloseTag,F+=M.spaceBeforeSlash+">"+this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.dtdEntity=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x)+"<!ENTITY",M.state=V.InsideTag,C.pe&&(F+=" %"),F+=" "+C.name,C.value?F+=' "'+C.value+'"':(C.pubID&&C.sysID?F+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(F+=' SYSTEM "'+C.sysID+'"'),C.nData&&(F+=" NDATA "+C.nData)),M.state=V.CloseTag,F+=M.spaceBeforeSlash+">"+this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.dtdNotation=function(C,M,x){var F;return this.openNode(C,M,x),M.state=V.OpenTag,F=this.indent(C,M,x)+"<!NOTATION",M.state=V.InsideTag,F+=" "+C.name,C.pubID&&C.sysID?F+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.pubID?F+=' PUBLIC "'+C.pubID+'"':C.sysID&&(F+=' SYSTEM "'+C.sysID+'"'),M.state=V.CloseTag,F+=M.spaceBeforeSlash+">"+this.endline(C,M,x),M.state=V.None,this.closeNode(C,M,x),F},Y.prototype.openNode=function(C,M,x){},Y.prototype.closeNode=function(C,M,x){},Y.prototype.openAttribute=function(C,M,x){},Y.prototype.closeAttribute=function(C,M,x){},Y}()}).call(this)},7904:function(Ge,Ne,K){(function(){var I,V,z,re,oe,J,S,B,X,ee;ee=K(3452),B=ee.assign,X=ee.isFunction,z=K(9906),re=K(519),oe=K(1105),S=K(4354),J=K(7647),I=K(2269),V=K(6316),Ge.exports.create=function(ge,le,G,P){var q,_e;if(null==ge)throw new Error("Root element needs a name.");return P=B({},le,G,P),_e=(q=new re(P)).element(ge),P.headless||(q.declaration(P),(null!=P.pubID||null!=P.sysID)&&q.dtd(P)),_e},Ge.exports.begin=function(ge,le,G){var P;return X(ge)&&(le=(P=[ge,le])[0],G=P[1],ge={}),le?new oe(ge,le,G):new re(ge)},Ge.exports.stringWriter=function(ge){return new S(ge)},Ge.exports.streamWriter=function(ge,le){return new J(ge,le)},Ge.exports.implementation=new z,Ge.exports.nodeType=I,Ge.exports.writerState=V}).call(this)}},Ge=>{Ge(Ge.s=3132)}]);